(function(){var L,q;(function(e){var f={},g=function(k){var l=f[k];if(l==e)throw"Module not defined or loaded: "+k;if(l.compiled)return l.compiled;var h=[];if(l.dependencies&&0<l.dependencies.length)for(var d=0;d<l.dependencies.length;d++)h.push(g(l.dependencies[d]));l.compiled=l.factory.apply(this,h.concat(l.extraArguments));if(!l.compiled)throw"Module defined but not loadable: "+k;return l.compiled};L=function(f,l){var h=f,d=l,c=2;h.splice||(d=h,h=e,c--);for(var c=Array.prototype.slice.call(arguments,
c),b=[],a=0;a<h.length;a++)b.push(g(h[a]));d.apply(this,b.concat(c))};q=function(g,l,h){var d=l,c=h,b=3;d.splice||(c=d,d=e,b--);b=Array.prototype.slice.call(arguments,b);f[g]={dependencies:d,factory:c,extraArguments:b||[]}}})();q("components","component.bookmark component.collapseexpand component.like component.links component.moderate component.page component.rate component.searchresult component.tag component.theater component.webpreview component.tourtip component.viewhtml component.previewhtml component.masonry component.resizedimage component.tip component.select component.poll component.convertcontent component.feature component.forumvotes component.forumqualityvotes component.vote component.squeezetext component.code component.loading component.presentcontent component.presentservice component.userpresence component.agodate component.html component.scheduledfile component.contentpeek".split(" "),
function(){return{}});q("component.agodate",["module.ui"],function(e,f,g,k){function l(c){c=f(c);c.html(d.formatAgoDate(d.parseDate(c.attr("data-dateutc"))))}function h(){f(".ui-agodate").each(function(){l(this)})}var d=f.telligent.evolution;f.telligent.evolution.ui.components.agodate={setup:function(){g.setInterval(h,15E3)},add:function(c,b){l(c)}};return{}},jQuery,window);q("component.bookmark",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.bookmark={setup:function(){},add:function(e,
h){e.empty();var d={contentId:h.contentid,contentTypeId:h.contenttypeid,typeId:h.bookmarktypeid,initialState:"true"==h.value,contentTypeName:h.contenttypename,onBookmark:function(c,b,a,d){f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}&ContentTypeId={ContentTypeId}"+(a?"&TypeId="+a:""),data:{ContentId:c,ContentTypeId:b},dataType:"json",success:function(a){d()}})},onUnbookmark:function(c,b,a,d){f.telligent.evolution.del({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/bookmark.json?ContentId={ContentId}"+(a?"&TypeId="+a:""),data:{ContentId:c},dataType:"json",success:function(a){d()}})}};h.configuration.deleteBookmarkText&&(d.deleteBookmarkText=h.configuration.deleteBookmarkText);h.configuration.addBookmarkText&&(d.addBookmarkText=h.configuration.addBookmarkText);h.configuration.processingText&&(d.processingText=h.configuration.processingText);h.configuration.addBookmarkCssClass&&(d.addBookmarkCssClass=h.configuration.addBookmarkCssClass);h.configuration.deleteBookmarkCssClass&&
(d.deleteBookmarkCssClass=h.configuration.deleteBookmarkCssClass);h.configuration.processingCssClass&&(d.processingCssClass=h.configuration.processingCssClass);f(e).evolutionBookmark(d)}};return{}},jQuery,window);q("component.code",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.code={setup:function(){},add:function(e,h){var d={};f(e).data("_code_init")||(f(e).data("_code_init",!0),h.mode&&(d.mode=h.mode),h.theme!==k&&(d.theme=h.theme),h.minlines!==k&&(d.minLines=parseInt(h.minlines,
10)),h.maxlines!==k&&(d.maxLines=parseInt(h.maxlines,10)),h.readonly&&(d.readOnly="true"===h.readonly?!0:!1),h.gutter&&(d.gutter="true"===h.gutter?!0:!1),h.wordwrap&&(d.wordWrap="true"===h.wordwrap?!0:!1),h.enablefullscreen&&(d.enableFullScreen="false"===h.enablefullscreen?!1:!0),h.sourcecomparison&&(d.sourceComparison=sourceComparison),f(e).evolutionCodeEditor(d))}};return{}},jQuery,window);q("component.collapseexpand",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.collapseexpand=
{setup:function(){},add:function(e,h){var d=f("<a></a>").attr({href:"#"}).text(h.collapsetext),c=!1;d.on("click",function(){c?(e.slideUp(),d.text(h.collapsetext)):(e.slideDown(),d.text(h.expandtext));c=!c;return!1});e.removeClass().before(d).hide()}};return{}},jQuery,window);q("component.convertcontent",["module.ui","lib.util"],function(e,f,g,k,l){g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=
g.telligent.evolution.ui.components||{};g.telligent.evolution.ui.components.convertcontent={setup:function(){},add:function(e,d){var c=g('<a href="#">'+d.label+"</a>");g(e).empty().append(c);c.on("click.convertcontent",function(b){b.preventDefault();k.location="#_cptype=panel&_cpcontexttype=Explicit&_cppanelid=63f2015f-0f61-49e0-ac07-598d70cdcbff&sourceContentId="+d.sourcecontentid+"&sourceContentTypeId="+d.sourcecontenttypeid;return!1})}};return{}},jQuery,window);q("component.feature",["module.ui"],
function(e,f,g,k){f.telligent.evolution.ui.components.feature={setup:function(){f.telligent.evolution.messaging.subscribe("ui-feature",function(e){(e.typeId?f('.ui-feature[data-contentid="'+e.contentId+'"][data-contenttypeid="'+e.contentTypeId+'"][data-typeid="'+e.typeId+'"]'):f('.ui-feature[data-contentid="'+e.contentId+'"][data-contenttypeid="'+e.contentTypeId+'"]')).attr("data-value",e.value.toString())},{excludeAutoNameSpaces:!0})},add:function(e,h){e.empty();var d={contentId:h.contentid,contentTypeId:h.contenttypeid,
typeId:h.typeid,panelUrl:h.panelurl,initialState:"true"==h.value,contentTypeName:h.contenttypename};h.configuration.editFeatureText&&(d.editFeatureText=h.configuration.editFeatureText);h.configuration.addFeatureText&&(d.addFeatureText=h.configuration.addFeatureText);h.configuration.processingText&&(d.processingText=h.configuration.processingText);h.configuration.addFeatureCssClass&&(d.addFeatureCssClass=h.configuration.addFeatureCssClass);h.configuration.editFeatureCssClass&&(d.editFeatureCssClass=
h.configuration.editFeatureCssClass);h.configuration.processingCssClass&&(d.processingCssClass=h.configuration.processingCssClass);f(e).evolutionFeature(d)}};return{}},jQuery,window);q("component.forumqualityvotes",["module.ui","module.messaging"],function(e,f,g,k,l){function h(a){var d=g.extend({},b.defaults,a||{}),p=g.telligent.evolution.template.compile(d.votersTemplate),e=g.telligent.evolution.template.compile(d.votersPopupTemplate),h=function(a,b,d){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/forums/threads/{ThreadId}/votes.json",data:{ThreadId:a.id,VoteType:"Quality",PageSize:a.pageSize,PageIndex:b,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:b||0},cache:!1,dataType:"json"}).then(function(a){a.Votes=a.ForumThreadVotes;g.telligent.evolution.batch(function(){g.each(a.Votes,function(a,b){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:b.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){b.userAvatarHtml=
a.Html})})}).then(function(){d({voters:g.map(a.Votes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},m=function(a,b){var m=0,f=g(p(g.extend(a,{noVotesText:c.noVotesText}))),r=g.telligent.evolution.ui.data(g(b).closest(d.delegatedSelector)),w=g(e({voters:f,hasMorePages:a.hasMorePages,showMoreText:d.modalShowMoreText})),z=w.find("ul"),A=w.find(".show-more");z.html(f);A.on("click",
function(a){a.preventDefault();m++;h(r,m,function(a){z.append(p(a));a.hasMorePages?A.show():A.hide();z.scrollTop(z[0].scrollHeight)})});g.glowModal({title:d.modalTitleText,html:w,width:450,height:"100%"})};(function(){g(d.containerSelector).on("click",d.popupSelector,function(a){a.preventDefault();var b=g(this);a=g.telligent.evolution.ui.data(g(b).closest(d.delegatedSelector));h(a,0,function(a){m(a,b)});return!1})})()}function d(a){return g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a,VoteType:"Quality"}}).then(function(a){return null==a.ForumThreadVote?null:a.ForumThreadVote.Value})}var c={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',voteTemplate:' <div class="thread-vote updownvote">  \t  <span class="vote-indicator ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= tipTextThread %></span>      <a href="#" class="vote up ui-tip <% if(voted == "true") { %>selected<% } %>" data-tip="<%= upvoteText %>" data-messagename="ui.forumqualityvotes.vote.message" data-threadid="<%= id %>" data-value="true"><%= upvoteText %></a>      <span class="score ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= scoreformatted %></span>      <a href="#" class="vote down ui-tip <% if(voted == "false") { %>selected<% } %>" data-tip="<%= downvoteText %>" data-messagename="ui.forumqualityvotes.vote.message" data-threadid="<%= id %>" data-value="false"><%= downvoteText %></a>  </div> ',
anonymousVoteTemplate:' <div class="thread-vote updownvote">  \t  <span class="vote-indicator ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= tipTextThread %></span>      <a href="<%= loginurl %>" class="vote up ui-tip" data-tip="<%= logintext %>"><%= logintext %></a>      <span class="score ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= scoreformatted %></span>      <a href="<%= loginurl %>" class="vote down ui-tip" data-tip="<%= logintext %>"><%= logintext %></a>  </div> ',noVotesText:"No Votes",
modalTitleText:"People who voted on this thread",tipTextThread:"View Voters",modalShowMoreText:"More",containerSelector:".content-fragment",delegatedSelector:".ui-forumqualityvotes",popupSelector:".voter-popup",upVoteText:"Vote Up",downVoteText:"Vote Down",logintext:"Login to vote on this thread",loginurl:""},b={setup:function(){h({})},add:function(a,n){a=g(this);var p=g.extend({},b.defaults,n||{});n.loginurl&&""!=n.loginurl?(anonymousVoteTemplate=g.telligent.evolution.template.compile(p.anonymousVoteTemplate),
a.html(g(anonymousVoteTemplate(g.extend(n,{id:n.id,tipTextThread:c.tipTextThread,score:n.score,scoreformatted:0<n.score?"+"+n.score:n.score,logintext:c.logintext,loginurl:n.loginurl}))))):(voteTemplate=g.telligent.evolution.template.compile(p.voteTemplate),a.html(g(voteTemplate(g.extend(n,{id:n.id,voted:n.voted,tipTextThread:c.tipTextThread,upvoteText:p.upVoteText,score:n.score,scoreformatted:0<n.score?"+"+n.score:n.score,downvoteText:p.downVoteText})))),f.subscribe("ui.forumqualityvotes.vote.message",
function(a){a=g(a.target);g.fn.evolutionTip.hide();a.hasClass("selected")?g.telligent.evolution.del({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a.data("threadid"),VoteType:"Quality"}}):g.telligent.evolution.post({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a.data("threadid"),VoteType:"Quality",Value:a.data("value")}})}));f.subscribe("forumThread.voted",function(b){if(a.data("id")==
b.threadId&&"Quality"==b.voteType){var c=a;if(0<c.length){var n=c.find(".thread-vote .vote.up"),p=c.find(".thread-vote .vote.down"),e=c.find(".thread-vote .score"),h=0<b.count?"+"+b.count:b.count;e.html(h);c.attr("data-score",h).attr("data-scoreformatted",h);d(b.threadId).then(function(a){null==a?(n.removeClass("selected"),p.removeClass("selected"),c.attr("data-value","")):a?(n.addClass("selected"),p.removeClass("selected"),c.attr("data-value",a)):a||(n.removeClass("selected"),p.addClass("selected"),
c.attr("data-value",a))})}}});p=g.map((n.presentservices||"").split(","),function(a){a=a.split("|");var b={};2<=a.length&&(b={ContentId:a[0],ContentTypeId:a[1]},2<a.length&&(b.TypeId=a[2]));return b});g.telligent.evolution.presence.register({node:a.get(0),contents:p})},defaults:c};g.telligent.evolution.ui.components.forumqualityvotes=b;return{}},jQuery,window);q("component.forumvotes",["module.ui","module.messaging"],function(e,f,g,k,l){function h(b){var a=g.extend({},c.defaults,b||{}),n=g.telligent.evolution.template.compile(a.votersTemplate),
p=g.telligent.evolution.template.compile(a.votersPopupTemplate),e=function(a,b,c){("thread"==a.type?g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/votes.json",data:{ThreadId:a.id,PageSize:a.pageSize,PageIndex:b,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:b||0},cache:!1,dataType:"json"}):g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/replies/{ReplyId}/votes.json",
data:{ReplyId:a.id,PageSize:a.pageSize,PageIndex:b,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:b||0},cache:!1,dataType:"json"})).then(function(a){a.Votes=a.ForumThreadVotes||a.ForumReplyVotes;g.telligent.evolution.batch(function(){g.each(a.Votes,function(a,b){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:b.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){b.userAvatarHtml=
a.Html})})}).then(function(){c({voters:g.map(a.Votes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},h=function(b,c){var h=0,f=g(n(g.extend(b,{noVotesText:d.noVotesText}))),x=g.telligent.evolution.ui.data(g(c).closest(a.delegatedSelector)),r=g(p({voters:f,hasMorePages:b.hasMorePages,showMoreText:a.modalShowMoreText})),w=r.find("ul"),z=r.find(".show-more");w.html(f);z.on("click",
function(a){a.preventDefault();h++;e(x,h,function(a){w.append(n(a));a.hasMorePages?z.show():z.hide();w.scrollTop(w[0].scrollHeight)})});g.glowModal({title:"thread"==x.type?a.modalTitleTextThread:a.modalTitleTextReply,html:r,width:450,height:"100%"})};(function(){g(a.containerSelector).on("click",a.delegatedSelector,function(b){b.preventDefault();var c=g(this);b=g.telligent.evolution.ui.data(g(c).closest(a.delegatedSelector));e(b,0,function(a){h(a,c)});return!1})})()}var d={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',noVotesText:"No Votes",modalTitleTextThread:"People who had this question",modalTitleTextReply:"People helped by this answer",modalShowMoreText:"More",containerSelector:".content-fragment",delegatedSelector:".ui-forumvotes"},
c={setup:function(){h({})},add:function(b,a){b.attr("data-tip","thread"==a.type?c.defaults.modalTitleTextThread:c.defaults.modalTitleTextReply).addClass("ui-tip");f.subscribe("ui-forumvote",function(c){if(c.id==a.id&&c.type==a.type){var d=0<c.count?"+"+c.count:c.count;g(b).html(d).attr("data-count",d);c.voted?g(b).attr("data-voted","true"):g(b).attr("data-voted","false")}});f.subscribe("forumThread.voted",function(a){a.threadId==g(b).data("id")&&"Interest"==a.voteType&&(a=0<a.count?"+"+a.count:a.count,
g(b).html(a).attr("data-count",a))});var d=g.map((a.presentservices||"").split(","),function(a){a=a.split("|");var b={};2<=a.length&&(b={ContentId:a[0],ContentTypeId:a[1]},2<a.length&&(b.TypeId=a[2]));return b});g.telligent.evolution.presence.register({node:b.get(0),contents:d})},defaults:d};g.telligent.evolution.ui.components.forumvotes=c;return{}},jQuery,window);q("component.html",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.html={setup:function(){},add:function(e,h){var d=
{};f(e).is("textarea")&&!f(e).data("_html_init")&&(f(e).data("_html_init",!0),h.width&&(d.width=h.width),h.height&&(d.height=h.height),h.contenttypeid&&(d.contentTypeId=h.contenttypeid),h.placeholder&&(d.placeholder=h.placeholder),h.enablefileupload&&(d.enableFileUpload="true"===h.enablefileupload?!0:!1),h.submittable&&(d.submittable="true"===h.submittable?!0:!1),h.entertosubmitprompt&&(d.enterToSubmitPrompt=h.entertosubmitprompt),h.submitlabel&&(d.submitLabel=h.submitlabel),h.beforesubmithtml&&(d.beforeSubmitHtml=
h.beforesubmithtml),h.aftersubmithtml&&(d.afterSubmitHtml=h.aftersubmithtml),h.autoresize&&(d.autoResize="true"===h.autoresize?!0:!1),h.enableentertosubmittoggle&&(d.enableEnterToSubmitToggle="true"===h.enableentertosubmittoggle?!0:!1),f(e).evolutionHtmlEditor(d))}};return{}},jQuery,window);q("component.like",["module.ui","module.messaging"],function(e,f,g,k,l){var h=function(d,c,b,a){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,
ContentTypeId:c,TypeId:b,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:!1,dataType:"json",success:function(b){a.call(this,{count:b.TotalCount,latestLike:0<b.Likes.length?b.Likes[0]:null})}})};g.telligent.evolution.ui.components.like={setup:function(){g.telligent.evolution.messaging.subscribe("ui.like",function(d){(d.typeId?g('.ui-like[data-contentid="'+d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"][data-configuration*="LikeTypeId='+d.typeId+'"]'):g('.ui-like[data-contentid="'+
d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"]')).attr("data-initialstate",d.liked.toString()).attr("data-initialcount",d.count.toString()).attr("data-initialmessage",d.message.toString())},{excludeAutoNameSpaces:!0});g.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",onList:function(d,c,b,a,n,e){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,ContentTypeId:c,TypeId:b,SortBy:"Date",
SortOrder:"Descending",PageSize:n||20,PageIndex:e||0},cache:!1,dataType:"json",success:function(b){g.telligent.evolution.batch(function(){g.each(b.Likes,function(a,b){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:b.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){b.userAvatarHtml=a.Html})})}).then(function(){a({likers:g.map(b.Likes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,
avatarHtml:a.userAvatarHtml}}),hasMorePages:(b.PageIndex+1)*b.PageSize<b.TotalCount})})}})},onOptions:function(d){d=g.telligent.evolution.ui.data(d);return{contentId:d.contentid,contentTypeId:d.contenttypeid,typeId:d.configuration.LikeTypeId}}})},add:function(d,c){var b="true"===c.readonly;g(d).evolutionLike({contentId:c.contentid,contentTypeId:c.contenttypeid,initialState:c.initialstate,initialMessage:c.initialmessage,initialCount:c.initialcount,format:b?c.format.replace("{toggle}",""):c.format,
typeId:c.configuration.LikeTypeId,onLike:function(a,b,c,d){g.fn.evolutionTip.hide();var e={ContentId:a,ContentTypeId:b};null!==c&&0<c.length&&(e.TypeId=c);g.telligent.evolution.post({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:e,cache:!1,dataType:"json",success:function(e){h(a,b,c,d)}})},onUnlike:function(a,b,c,d){g.fn.evolutionTip.hide();var e={ContentId:a};null!==c&&0<c.length&&(e.TypeId=c);g.telligent.evolution.del({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",
data:e,cache:!1,dataType:"json",success:function(e){h(a,b,c,d)}})}})}};return{}},jQuery,window);q("component.links",["module.ui","lib.dynamicLinks","lib.sheetProvider","lib.util"],function(e,f,g,k,l,h,d){function c(c,d,n){!0===c.data("linkshown")?(c.data("linkshown",!1),c.off(".uilinks"),l.fn.uilinks.hide()):(l.telligent.evolution.messaging.publish(v.show),l(window).width()<y.minWidth?a(d,n):b(c,d))}function b(a,b){function c(){k.isOverElement(d)||k.isOverElement(a)||(l.fn.uilinks.hide(),a.data("linkshown",
!1))}a.css({position:"relative "});for(var d=l(document.createElement("ul")),n=0;n<b.length;n++){var e=l(document.createElement("li"));e.append(l(b[n].element).css("float","none").get(0));d.append(e)}s||(s=l("<div></div>").glowPopUpPanel({cssClass:"links-popup-panel",zIndex:25E3,hideOnDocumentClick:!0,position:"updown"}));a.off(".uilinks").on("glowDelayedMouseLeave.uilinks",500,c);s.glowPopUpPanel("hide",!0).glowPopUpPanel("html",d).one("glowPopUpPanelShown",function(){a.data("linkshown",!0);d.on("glowDelayedMouseLeave",
500,c)}).one("glowPopUpPanelHidden",function(){a.data("linkshown",!1)}).off(".uilinks").on("glowPopUpPanelShowing.uilinks",function(b,c){a.addClass("links-expanded").attr("data-position",c.position)}).on("glowPopUpPanelHiding.uilinks",function(b,c){a.removeClass("links-expanded").attr("data-position","")}).glowPopUpPanel("show",a)}function a(a,b){var c=a.slice(0);c.push(b);g.actionSheet.show({links:l.map(c,function(a){return a.element})});g.actionSheet.content().on("click","a",function(a){g.actionSheet.hide()});
b.element.on("click",function(a){a.preventDefault();g.actionSheet.hide();l.telligent.evolution.messaging.publish(v.hide);return!1});var d=l.telligent.evolution.messaging.subscribe("sheet.closed",function(){l.each(a,function(a,b){n(l(b.element))});l.telligent.evolution.messaging.unsubscribe(d)},{excludeAutoNameSpaces:!0})}function n(a){a.is('[class^="ui-"]')&&!a.hasClass("ui-tourtip")?a.empty().remove():a.detach()}function p(a,b,c){clearTimeout(a.reflowWaitTimeout);l(h).width()<b.width()?(a.reflowWaitCheckCount++,
10>a.reflowWaitCheckCount&&(a.reflowWaitTimeout=setTimeout(function(){p(a,b,c)},250))):c.render()}function u(a,b){var d=a.find("> li, > ul > li"),e=b.maxlinks,p=b.minlinks,h=null;a.removeClass("ui-links");var g={parent:a,links:[],onShowMore:function(a,b){c(h,a,b)}};e&&(g.maxLinks=parseInt(e,10));p&&(g.minLinks=parseInt(p,10));g.direction=b.direction;for(e=0;e<d.length;e++){var p=l(d[e]),s=p.children();n(s);var u=s.is("[data-selected]");s.is("[data-more]")?(h=s,g.moreLink={element:s,selected:u,className:p.get(0).className}):
s.is("[data-cancel]")?g.cancelLink={element:s,selected:u,className:p.get(0).className}:g.links.push({element:s,selected:u,className:p.get(0).className})}g.onLinksChange=function(b){l.telligent.evolution.messaging.publish(v.change,l.extend({},b,{target:a}))};a.empty();var J=new f(g);a.show();b.reflowWaitCheckCount=0;b.reflowWaitTimeout=null;var F=k.scrollParent(a);k.isPartiallyVisible(F,a)?t(a,b,J):(y.delayedInits.push({container:F,attempt:function(){return k.isInDom(a)?!b.finalized&&k.isPartiallyVisible(F,
a)?(t(a,b,J),!1):!0:!1}}),m(F))}function t(a,b,c){b.finalized=!0;p(b,a,c);a.data("_dynamic_links",c);var d=function(b,n){k.isInDom(a)?n.oldWidth!=n.newWidth&&c.render():l(window).off("resized",d)};b=a.closest(".layout-region");if(0<b.length)b.on("resized",d);else l(window).on("resized",d);a.on("content-resized",function(){c.render()});var n=l.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){k.isInDom(a)?h.setTimeout(function(){c.render()},300):l.telligent.evolution.messaging.unsubscribe(n)},
{excludeAutoNameSpaces:!0})}function m(a){a.data("_delayed_uilinks_monitored")||(a.data("_delayed_uilinks_monitored",!0),a.on("scroll._delayed_uilinks",k.requestAnimationFrameThrottle(l.fn.uilinks.forceRender)),a.on("resized._delayed_uilinks",k.requestAnimationFrameThrottle(l.fn.uilinks.forceRender)),y.delayedInitContainers.push(a))}var s,v={show:"ui.links.show",hide:"ui.links.hide",change:"ui.links.change"};l.fn.uilinks=function(){var a=this.data("_dynamic_links"),b=Array.prototype.slice.call(arguments,
0),d=b[0];if(!a)return this;if("add"==d)return d=b[1],b=l.extend({},{className:null,selected:!1},b[2]||{}),a.addLink({element:d,className:b.className,selected:b.selected}).element;if("insert"==d){var d=b[1],n=b[2],b=l.extend({},{className:null,selected:!1},b[3]||{});return a.addLink({element:d,className:b.className,selected:b.selected},n).element}if("remove"==d)a.removeLink(b[1]);else if("show"==d)(b=b[1]||a.moreLink().element)&&l(b).focus(),c(b,a.links(!0),a.cancelLink());else if("hide"==d)l.fn.uilinks.hide();
else if("resize"==d)a.resize();else{if("isVisible"==d)return d=b[1],a.isVisible(d);if("update"==d)return d=b[1],b=l.extend({},{index:null,className:null,selected:null},b[2]||{}),a.update(d,b);if("links"==d)return l.map(a.links(),function(a){return a.element});if("list"==d)return b=b[1]||{},a.links(b&&!0===b.hidden);"reconfigure"==d&&(d=b[1]||{},n=e.data(this),b={},n.minlinks&&(b.minLinks=n.minlinks),n.maxlinks&&(b.maxLinks=n.maxlinks),n.direction&&(b.direction=n.direction),l.extend(b,d),a.reconfigure(b))}return this};
l.fn.uilinks.hide=function(){l.telligent.evolution.messaging.publish(v.hide);g.actionSheet.hide();s&&s.glowPopUpPanel("hide")};l.fn.uilinks.forceRender=function(){var a=[];if(y.delayedInits)for(var b=0;b<y.delayedInits.length;b++)y.delayedInits[b].attempt()||a.push(b);a.reverse();for(b=0;b<a.length;b++)y.delayedInits&&y.delayedInits.splice(a[b],1);if((!y.delayedInits||0===y.delayedInits.length)&&y.delayedInitContainers)for(a=0;a<y.delayedInitContainers.length;a++)y.delayedInitContainers[a].off("._delayed_uilinks").data("_delayed_uilinks_monitored",
!1)};var y={setup:function(){y.delayedInits=[];y.delayedInitContainers=[]},add:function(a,b){a=l(a);u(a,b)},minWidth:570};l.telligent=l.telligent||{};l.telligent.evolution=l.telligent.evolution||{};l.telligent.evolution.ui=l.telligent.evolution.ui||{};l.telligent.evolution.ui.components=l.telligent.evolution.ui.components||{};return l.telligent.evolution.ui.components.links=y},jQuery,window);q("component.loading",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.loading={setup:function(){},
add:function(e,h){function d(){var c=e.css("color");if(c){var b=parseInt(h.width,10);isNaN(b)&&(b=48);var a=parseInt(h.height,10);isNaN(a)&&(a=48);var n=Math.min(b/3,a);e.css({display:"block",width:b+"px",height:a+"px",margin:"0 auto",padding:(a-n)/2+"px 0","text-align":"center","box-sizing":"border-box"}).html(f(['<div class="spinner"><div class="bounce1" style="width:',n,"px;height:",n,"px;background-color:",c,';"></div><div class="bounce2" style="width:',n,"px;height:",n,"px;background-color:",
c,';"></div><div class="bounce3" style="width:',n,"px;height:",n,"px;background-color:",c,';"></div></div>'].join("")))}else g.setTimeout(function(){d()},50)}d()}};return{}},jQuery,window);q("component.masonry",["module.ui","plugin.evolutionMasonry"],function(e,f,g,k,l){e={setup:function(){},add:function(e,d){g(e).data("_evolutionMasonry")||(g(e).data("_evolutionMasonry",!0),g(e).evolutionMasonry({columnClass:d.columnclass||g.fn.evolutionMasonry.defaults.columnClass}).css({visibility:"visible"}))}};
g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=g.telligent.evolution.ui.components||{};return g.telligent.evolution.ui.components.masonry=e},jQuery,window);q("component.moderate",["module.ui"],function(e,f,g,k){var l=function(e,d,c){f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:e,ContentTypeId:d},cache:!1,dataType:"json",
success:function(b){c(b)}})};f.telligent.evolution.ui.components.moderate={setup:function(){},add:function(e,d){e=f(e);var c={contentId:d.contentid,contentTypeId:d.contenttypeid,supportsAbuse:"true"===d.supportsabuse,initialState:"true"===d.initialstate,onReport:l};if(d.configuration&&d.configuration.AdditionalLinks){var b=JSON.parse(d.configuration.AdditionalLinks);if(!c.supportsAbuse&&0===b.length)return;c.onGetAdditionalLinks=function(a){a(b)}}else if(d.configuration&&d.configuration.AdditionalLinksUrl){if(!c.supportsAbuse&&
0===d.configuration.AdditionalLinksUrl.length)return;c.onGetAdditionalLinks=function(a){f.telligent.evolution.get({url:d.configuration.AdditionalLinksUrl,cache:!1,dataType:"json",success:function(b){a(b.links||[])}})}}if(c.supportsAbuse||c.onGetAdditionalLinks)d.configuration&&d.configuration.LinkClassName&&(c.linkClassName=d.configuration.LinkClassName),e.evolutionModerate(c)}};return{}},jQuery,window);q("component.page",["module.ui"],function(e,f,g,k){var l={};f.telligent.evolution.ui.components.page=
{setup:function(){},add:function(e,d){var c={currentPage:parseInt(d.currentpage,10),pageSize:parseInt(d.pagesize,10),totalItems:parseInt(d.totalitems,10),showPrevious:"undefined"===typeof d.configuration.ShowPrevious?!1:"true"===d.configuration.ShowPrevious,showNext:"undefined"===typeof d.configuration.ShowNext?!1:"true"===d.configuration.ShowNext,showFirst:"undefined"===typeof d.configuration.ShowFirst?!0:"true"===d.configuration.ShowFirst,showLast:"undefined"===typeof d.configuration.ShowLast?!0:
"true"===d.configuration.ShowLast,showIndividualPages:"undefined"===typeof d.configuration.ShowIndividualPages?!0:"true"===d.configuration.ShowIndividualPages,numberOfPagesToDisplay:"undefined"===typeof d.configuration.NumberOfPagesToDisplay?5:parseInt(d.configuration.NumberOfPagesToDisplay,10),pageKey:d.pagekey,hash:d.configuration.Target,baseUrl:d.configuration.BaseUrl||window.location.href,template:"undefined"!==typeof d.configuration.Template?d.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
d.pagedcontenturl&&(l[d.pagedcontentpagingevent]={onPage:function(a,b,c){c=c||{};c[d.pagekey]=a;a=f.telligent.evolution.url.modify({url:d.pagedcontenturl,query:c});f.telligent.evolution.get({url:a,cache:!1,success:function(a){b(a)}})}},f.extend(c,{onPage:function(a,b,c){l[d.pagedcontentpagingevent].onPage(a,b,c)},refreshOnAnyHashChange:"true"===d.loadonanyhashchange,pagedContentContainer:"#"+d.pagedcontentwrapperid,pagedContentPagingEvent:d.pagedcontentpagingevent,pagedContentPagedEvent:d.pagedcontentpagedevent,
transition:d.configuration.Transition,transitionDuration:"undefined"===typeof d.configuration.TransitionDuration?200:parseInt(d.configuration.TransitionDuration,10)}));f(e).evolutionPager(c);if("true"===d.loadingindicator){var b=f("#"+d.pagedcontentwrapperid),a=f("<div></div>").css({backgroundColor:"#fff",position:"absolute",opacity:0.75,zIndex:1});f.telligent.evolution.messaging.subscribe(d.pagedcontentpagingevent,function(){var c=b.offset();a.hide().appendTo("body").css({width:b.width(),height:b.height(),
top:c.top,left:c.left}).show()});f.telligent.evolution.messaging.subscribe(d.pagedcontentpagedevent,function(){a.hide()})}}};return{}},jQuery,window);q("component.contentpeek",function(e,f,g){function k(){var h=e.telligent.evolution.theme.getReflowBreakpoint();return null!==h&&e(f).width()<h}var l;e.telligent.evolution.ui.components.contentpeek={setup:function(){if(!k())e(document).on("glowDelayedMouseEnter",".ui-contentpeek",500,function(){l=e(this);e.telligent.evolution.messaging.publish("contentPeek.show",
{contentTypeId:l.data("contenttypeid"),contentId:l.data("contentid"),element:this})}).on("glowDelayedMouseLeave",".ui-contentpeek",250,function(h){l=e(this);h.stopPropagation();e.telligent.evolution.messaging.publish("contentPeek.hide",{contentTypeId:l.data("contenttypeid"),contentId:l.data("contentid"),element:this})})},add:function(e,d){}};return{}},jQuery,window);q("component.poll",["module.ui"],function(e,f,g,k){var l="Vote",h="Voting Ends: {0}",d="View Results",c="Voting Ended: {0}",b="Your vote was received, check back when the poll expires to view the result.",
a="Total Votes : {0}",n="You voted for '{0}'.",p="User Vote Report",u="Vote",t="You have already voted for '{0}'.",m="Please login to vote",s=function(a,b,c){var d=a.data("pollview");"vote"!=d&&("results"!=d?(d=y(a,b,c),a.data("pollview","vote"),a.html(d)):c.canShowResults&&f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+b.Id+"/summary.json",cache:!1,success:function(d){d=v(a,b,d.VoteSummary,c);a.data("pollview","results");a.html(d)}}))},v=function(b,d,e,
m){b=f("<div></div>").addClass("poll results");var r=0,v=f("<div></div>").addClass("poll-header"),g=f('<div class="poll-content"></div>'),w=f('<ul class="poll-answers-container"><ul>');v.append(f("<h4></h4>").addClass("poll-question").html(d.Question));b.append(v);d.RenderedDescription&&g.append(f("<div></div>").addClass("poll-description").html(d.RenderedDescription));f.each(e.Summary,function(a,b){r+=e.Summary[a].VoteCount});f.each(e.Summary,function(a,b){var c=e.Summary[a],d=0==r?0:Math.round(c.VoteCount*
(100/r));w.append(f('<li><div class="poll-answer">'+c.PollOption.Option+' <span class="poll-result-value">'+d+'%</span></div><div class="poll-graph-container"><div class="poll-graph" style="width:'+d+'%;"></div></div></li>').attr("data-polloptionid",c.PollOption.OptionId))});g.append(w);b.append(g);v=f('<div class="poll-footer"></div>');g=f('<ul class="poll-footer-attributes"></ul>');if(null!=m.expiredDate){var t=new Date>m.expiredDate?c:h,l=f("<li></li>").addClass("poll-expires");g.append(l);f.telligent.evolution.language.formatDateAndTime(new Date(m.expiredDate),
function(a){l.html(t.replace("{0}",a))})}var s=f("<li></li>");g.append(s);f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+d.Id+"/vote.json",cache:!1,success:function(a){if(null==a.Errors){if(a.OptionId){var b=null;f.each(d.Options,function(c,d){d.OptionId==a.OptionId&&(b=d.Option)});b?(w.find('li[data-polloptionid="'+a.OptionId+'"]').addClass("selected"),s.addClass("poll-voted").html(n.replace("{0}",b))):s.remove()}}else s.remove()}});g.append(f("<li></li>").addClass("poll-votecount").html(a.replace("{0}",
r)));m.canVote&&g.append(f("<li></li>").html('<a href="javascript:void(0)" class="poll-view-vote">'+u+"</a>"));m.reporturl&&(m=f("<li></li>").addClass("poll-report").html(f("<a></a>").attr("href",m.reporturl).html(p)),g.append(m));v.append(g);b.append(v);return b},y=function(b,c,n){b=f("<div></div>").addClass("poll voting").css("visibility","none");var e=f.telligent.evolution.user.accessing.isSystemAccount,r=f("<div></div>").addClass("poll-header"),v=f('<div class="poll-content"></div>'),g=f('<ul class="poll-answers-container"></ul>');
r.append(f("<h4></h4>").addClass("poll-question").html(c.Question));b.append(r);c.RenderedDescription&&v.append(f("<div></div>").addClass("poll-description").html(c.RenderedDescription));f.each(c.Options,function(a,b){var d=f("<li></li>"),e=f("<span></span>").addClass("poll-input").html(f('<input type="radio" />').val(b.OptionId).attr("name",c.Id).addClass("options-"+c.Id).attr("id",c.Id+"-"+b.OptionId)),p=f('<label for="'+c.Id+"-"+b.OptionId+'"></label>').addClass("poll-answer").html(b.Option);n.readOnly||
d.append(e);d.append(p);g.append(d)});v.append(g);n.canVote&&v.append(f('<a href="#"></a>').addClass("button poll-vote").html(l));b.append(v);var r=f('<div class="poll-footer"></div>'),w=f('<ul class="poll-footer-attributes"></ul>');if(null!=c.ExpiredDate){var s=f("<li></li>").addClass("poll-expires");w.append(s);f.telligent.evolution.language.formatDateAndTime(new Date(c.ExpiredDate),function(a){s.html(h.replace("{0}",a))})}f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+
c.Id+"/vote.json",cache:!1,success:function(b){if(b.OptionId){var r=null;f.each(c.Options,function(a,c){c.OptionId==b.OptionId&&(r=c.Option)});w.append(f("<li></li>").addClass("poll-alreadyvoted").html(t.replace("{0}",r)))}null==b.Errors?f("#"+c.Id+"-"+b.OptionId).prop("checked",!0):alert(b.Errors);if(n.canShowResults){var h=f("<li></li>").addClass("poll-votecount");w.append(h);w.append(f("<li></li>").html('<a href="javascript:void(0)" class="poll-view-results">'+d+"</a>"));f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+c.Id+"/summary.json",cache:!1,success:function(b){if(null==b.Errors){var c=0;f.each(b.VoteSummary.VoteCount,function(a,d){c+=b.VoteSummary.VoteCount[a]});h.html(a.replace("{0}",c))}else alert(b.Errors)}})}if(e){var v=f("<li></li>").html(f("<a></a>").attr("href",n.loginurl).html(m));w.append(v)}n.reporturl&&(v=f("<li></li>").html(f("<a></a>").attr("href",n.reporturl).html(p)),w.append(v))}});r.append(w);b.append(r);return b},x=function(a,c,d){a.on("click",".poll-view-results",function(){f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+c.Id+"/summary.json",success:function(b){null==b.Errors?a.evolutionTransform({opacity:0},{duration:200,complete:function(){var n=v(a,c,b.VoteSummary,d);a.data("pollview","results");a.html(n);a.evolutionTransform({opacity:1},{duration:200})}}):alert(b.Errors)}});return!1});a.on("click",".poll-view-vote",function(){a.evolutionTransform({opacity:0},{duration:200,complete:function(){var b=y(a,c,d);a.data("pollview","vote");a.html(b);a.evolutionTransform({opacity:1},{duration:200})}});
return!1});a.on("click",".button.poll-vote",function(){var n=f(".options-"+c.Id+":checked").val();f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c.Id+"/vote.json",data:{OptionId:n},success:function(n){f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c.Id+"/summary.json",cache:!1,success:function(b){null==b.Errors?a.evolutionTransform({opacity:0},{duration:200,complete:function(){if(d.showResultsBeforeExpiration||
d.expiredDate>new Date)d.canShowResults=!0;if(d.canShowResults){var n=v(a,c,b.VoteSummary,d);a.data("pollview","results");a.html(n);a.evolutionTransform({opacity:1},{duration:200})}}}):alert(b.Errors)},error:function(a){f.telligent.evolution.notifications.show(b,{type:"success",duration:5E3})}})}});return!1})},r=function(a,b){return f.Deferred(function(c){var d=a.expiresDate&&a.expiredDate<new Date;a.canVote=!a.readOnly&&f.telligent.evolution.user.accessing.isAuthenticated&&!d;f.telligent.evolution.user.accessing.isAuthenticated?
f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+b+"/vote.json",cache:!1,success:function(b){a.canShowResults=b.OptionId?a.showResultsBeforeExpiration||d:a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||d);c.resolve(!a.canShowResults)},error:function(){a.canVote=!1;a.canShowResults=a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||d);c.resolve(!0)}}):(a.canShowResults=a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||d),c.resolve(!a.canShowResults))}).promise()},
w=function(e){e&&(e=f.telligent.evolution.url.parseQuery(e),null!=e.voteButton&&(l=e.voteButton),null!=e.expiredText&&(h=e.expiredText),null!=e.viewResults&&(d=e.viewResults),null!=e.alreadyExpiredText&&(c=e.alreadyExpiredText),null!=e.voteMessage&&(b=e.voteMessage),null!=e.voteCountText&&(a=e.voteCountText),null!=e.votedOnText&&(n=e.votedOnText),null!=e.alreadyVotedOnText&&(t=e.alreadyVotedOnText),null!=e.userVoteReport&&(p=e.userVoteReport),null!=e.anonymousUserLoginText&&(m=e.anonymousUserLoginText),
null!=e.viewVote&&(u=e.viewVote))};f.telligent.evolution.ui.components.poll={setup:function(){f.telligent.evolution.messaging.subscribe("socket.connected",function(){if(f.telligent.evolution.sockets.polls)f.telligent.evolution.sockets.polls.on("updated",function(a){f.telligent.evolution.messaging.publish("polls.updated",a)})},{excludeAutoNameSpaces:!0})},add:function(a,b){w(b.resources);var c=b.pollid,d=null;if(c){var e={reporturl:b.reporturl,loginurl:b.loginurl,readOnly:"True"===b.readonly};f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+c+".json",success:function(b){b.Poll&&(e.showResultsBeforeExpiration=b.Poll.ShowResultsBeforeExpiration,e.showResultsBeforeVote=b.Poll.ShowResultsBeforeVote,e.expiredDate=null==b.Poll.ExpiredDate?null:f.telligent.evolution.parseDate(b.Poll.ExpiredDate),r(e,c).then(function(n){!n&&e.canShowResults&&a.data("pollview","results");s(a,b.Poll,e);x(a,b.Poll,e);f.telligent.evolution.messaging.subscribe("polls.updated",function(n){c==n.pollId&&(g.clearTimeout(d),d=g.setTimeout(function(){s(a,
b.Poll,e)},1E3))})}))}})}}};return{}},jQuery,window);q("component.presentcontent",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.presentcontent={setup:function(){},add:function(e,h){var d=f.map((h.presentcontents||"").split(","),function(c){c=c.split("|");var b={};2<=c.length&&(b={ContentId:c[0],ContentTypeId:c[1]},2<c.length&&(b.TypeId=c[2]));return b});f.telligent.evolution.presence.register({node:e.get(0),contents:d})}};return{}},jQuery,window);q("component.presentservice",
["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.presentservice={setup:function(){},add:function(e,h){var d=f.map((h.presentservices||"").split(","),function(c){c=c.split("|");var b={};2<=c.length&&(b={ServiceId:c[0]},2<c.length&&(b.TypeId=c[2]));return b});f.telligent.evolution.presence.register({node:e.get(0),services:d})}};return{}},jQuery,window);q("component.previewhtml",["module.ui"],function(e,f,g,k){function l(d,c,b,a){d={url:d,width:0,height:0,outputIsPersisted:!1};c&&
(d.width=Math.floor(c));b&&(d.height=Math.floor(b));a&&(d.outputIsPersisted=a);return f.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/preview.json",data:d})}function h(d,c){var b=d.parent().width();b>c.width&&(b=c.width);l(c.url,b,c.height,c.persist).then(function(a){d.html(a.Html)})}f.telligent.evolution.ui.components.previewhtml={setup:function(){},add:function(d,c){h(d,c);f(window).on("resized",function(){h(d,c)})}};return{}},jQuery,window);q("component.rate",
["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.rate={setup:function(){},add:function(e,h){var d=f.extend({},{isReadOnly:"true"===h.readonly,value:parseFloat(h.initialvalue),ratingCount:parseFloat(h.initialcount)});d.value*=f.fn.evolutionStarRating.defaults.maxRating;d.onRate=function(c){h.contentid&&h.contenttypeid&&(c/=f.fn.evolutionStarRating.defaults.maxRating,c={ContentId:h.contentid,ContentTypeId:h.contenttypeid,Value:c},h.ratingtypeid&&(c.TypeId=h.ratingtypeid),f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ratings.json",data:c,success:function(b){b={ContentId:h.contentid};h.ratingtypeid&&(b.TypeId=h.ratingtypeid);f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:b,success:function(a){a&&a.RatedItem&&a.RatedItem.AverageValue?f(e).evolutionStarRating("option",{value:a.RatedItem.AverageValue*f.fn.evolutionStarRating.defaults.maxRating,ratingCount:a.RatedItem.Count}):f(e).evolutionStarRating("option",{value:0,ratingCount:0})}})}}))};0==
d.ratingCount&&d.isReadOnly||f(e).evolutionStarRating(d)}};return{}},jQuery,window);q("component.resizedimage",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.resizedimage={setup:function(){},add:function(e,h){e.removeClass("ui-resizedimage");f.telligent.evolution.media.previewHtml(h.src,{width:h.width||0,height:h.height||0,resizeMethod:h.resizemethod||"ZoomAndCrop",success:function(d){d=f(d.html);d.attr("style")&&e.attr("style",d.attr("style"));e.attr("src",d.attr("src"))}})}};
return{}},jQuery,window);q("component.scheduledfile",["module.ui","module.messaging"],function(e,f,g,k,l){function h(c){f.subscribe("scheduledFile.complete","messages-"+c.progressKey,function(b){b.progressKey===c.progressKey&&(c.indicator.evolutionProgressIndicator("complete",b),d(c))});f.subscribe("scheduledFile.error","messages-"+c.progressKey,function(b){b.progressKey===c.progressKey&&(c.indicator.evolutionProgressIndicator("error",b?b.message:null),d(c))});f.subscribe("scheduledFile.progress",
"messages-"+c.progressKey,function(b){b.progressKey===c.progressKey&&c.indicator.evolutionProgressIndicator("progress",b)})}function d(c){setTimeout(function(){f.unsubscribe("messages-"+c.progressKey)},100)}g.telligent.evolution.ui.components.scheduledfile={setup:function(){},add:function(c,b){g.telligent.evolution.presence.register({node:g("body"),services:[{ServiceId:b.presenceid}]});g.telligent.evolution.scheduledFile.monitor(b.progresskey,{runAsUserId:b.runasuserid||null,presenceId:b.presenceid||
null});var a=g.extend({},{progressKey:b.progresskey,percentComplete:b.percentcomplete,log:JSON.parse(b.log),indicator:g(c).evolutionProgressIndicator({includePercentComplete:"true"==b.includepercentcomplete,includeLatestMessage:"true"==b.includelatestmessage,includeAllMessages:"true"==b.includeallmessages,warnBeforeUnload:"false"==b.durable,showPending:"scheduled"==b.state})});a.percentComplete&&0<a.percentComplete&&a.indicator.evolutionProgressIndicator("progress",{percentComplete:parseFloat(a.percentComplete)});
if(a.log)for(var d=0;d<a.log.length;d++)a.indicator.evolutionProgressIndicator("progress",{message:a.log[d]});h(a)}};return{}},jQuery,window);q("component.searchresult",["module.ui","module.template"],function(e,f,g,k,l){var h=g.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),d=function(c,b){g.telligent.evolution.get({url:c,dataType:"json",success:function(a){a&&b(h(a))}})};g.telligent.evolution.ui.components.searchresult=
{setup:function(){},add:function(c,b){if(b.detailsurl){var a=null,e=c.find("ul.details"),p=e.html();c.on("mouseenter",function(c){null!==a?e.html(a):d(b.detailsurl,function(b){a=b;e.html(a)})}).on("mouseleave",function(a){e.html(p)})}}};return{}},jQuery,window);q("component.select",["module.ui","module.messaging"],function(e,f,g,k,l){function h(d){if(d.is("select")&&g(window).width()>(g.telligent.evolution.theme.getReflowBreakpoint()||670))if(d.data("renderedUiSelect"))d.hide(),d.data("renderedUiSelect").show();
else{var c="uiselect "+d.get(0).className.replace("ui-select-enabled","");0<d.closest(".view,.filter,.sort").length&&(c+=" options-slim");d.show().glowDropDownList({selectedItemWidth:"auto",selectedItemHeight:"auto",itemsWidth:"auto",itemsHeight:"auto",buttonImageUrl:null,className:c,activeClassName:"active"});c=d.prevAll(".uiselect").first();d.data("renderedUiSelect",c)}else d.show(),(d=d.data("renderedUiSelect"))&&d.hide()}g.telligent.evolution.ui.components.select={setup:function(){f.subscribe("reflow.reflowend",
function(){g(".ui-select-enabled").each(function(){h(g(this))})},{excludeAutoNameSpaces:!0})},add:function(d,c){d.removeClass("ui-select").addClass("ui-select-enabled");h(d)}};return{}},jQuery,window);q("component.squeezetext",["module.ui","plugin.evolutionSqueezeText"],function(e,f,g,k,l){e={setup:function(){},add:function(e,d){g(e).evolutionSqueezeText({minSize:parseFloat(d.minsize)||g.fn.evolutionSqueezeText.defaults.minSize,minSpacing:parseFloat(d.minspacing)||g.fn.evolutionSqueezeText.defaults.minSpacing,
enableSpacing:d.enablespacing!==l?"true"===d.enablespacing:g.fn.evolutionSqueezeText.defaults.enableSpacing,resetOnFailure:d.resetonfailure!==l?"true"===d.resetonfailure:g.fn.evolutionSqueezeText.defaults.resetOnFailure,truncateOnFailure:d.truncateonfailure!==l?"true"===d.truncateonfailure:g.fn.evolutionSqueezeText.defaults.truncateOnFailure,onFailure:function(){g(this).attr("data-tip",g(this).text()).evolutionTip()}})}};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};
g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=g.telligent.evolution.ui.components||{};return g.telligent.evolution.ui.components.squeezetext=e},jQuery,window);q("component.tag",["module.ui"],function(e,f,g,k){var l=function(e,d,c){var b=f(c);b.html("");if(e){var a=!0;f.each(e.split(/,/),function(c,e){var h=f.trim(e);h&&(a?a=!1:b.append(", "),d?b.append(f("<a>").attr("rel","nofollow tag").attr("href",d.replace(/{tag}/g,f.telligent.evolution.url.encodePathComponent(f.telligent.evolution.html.decode(h)))).text(h)):
b.append(h))})}};f.telligent.evolution.ui.components.tag={setup:function(){},add:function(e,d){var c=jQuery("<span></span>");f(e).append(c);l(d.tags,d.urlformat,c);var b=null;"true"!==d.readonly&&(b=f('<a href="javascript:void(0);" class="internal-link edit-tags"></a>'),f(e).append(b),b.evolutionInlineTagEditor({allTags:f.grep(d.selectabletags.split(","),function(a){return a}),currentTags:f.grep(d.tags.split(","),function(a){return a}),onSave:function(a,b){var e={Tags:a&&0<a.length?a.join(","):"",
ContentId:d.contentid,ContentTypeId:d.contenttypeid};d.tagtypeid&&(e.TypeId=d.tagtypeid);f.telligent.evolution.put({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",data:e,success:function(a){l(e.Tags,d.urlformat,c);b()}})}}))}};return{}},jQuery,window);q("component.theater",["module.ui"],function(e,f,g,k){var l=function(e,d){f.telligent.evolution.get({url:e,cache:!1,success:function(c){d(c)}})};f.telligent.evolution.ui.components.theater={setup:function(){},add:function(e,
d){e=f(e);e.on("click",function(c){!0!==e.data("disabletheater")&&(c.preventDefault(),f.evolutionTheater.show({content:function(b){l(d.theaterurl,b)},loaded:function(b){}}))})}};return{}},jQuery,window);q("component.tip",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.tip={setup:function(){},add:function(e,h){f(e).evolutionTip({attribute:h.tipcontent||f.fn.evolutionTip.defaults.attribute,horizontal:h.tiphorizontal,vertical:h.tipvertical})}};return{}},jQuery,window);q("component.tourtip",
["module.ui","module.tourtips"],function(e,f,g,k,l){g.telligent.evolution.ui.components.tourtip={setup:function(){},add:function(e,d){g.telligent.evolution.tourTips.register({key:d.tourtipkey,message:d.tourtipmessage,index:d.tourtipindex,element:e.get(0)})}};return{}},jQuery,window);q("component.userpresence",["module.ui","module.messaging","lib.util"],function(e,f,g,k,l,h){var d;k.telligent.evolution.ui.components.userpresence={setup:function(){d=k("body")},add:function(c,b){var a=b.presentlabel,
e=b.notpresentlabel;k.telligent.evolution.sockets&&k.telligent.evolution.sockets.presence&&(k.telligent.evolution.presence.register({node:d,contents:[{ContentId:b.contentid,ContentTypeId:b.contenttypeid}]}),f.subscribe("user.presenceChanged",function(d){d&&b.userid==d.userId&&(!0===d.present?c.show().html(a).attr("data-tip",a).addClass("present"):!1===d.present?c.show().html(e).attr("data-tip",e).removeClass("present"):c.hide())}))}};return{}},jQuery,window);q("component.viewhtml",["module.ui","module.messaging"],
function(e,f,g,k,l){function h(a,b,c,d){a={url:a,width:0,height:0,outputIsPersisted:!1};b&&(a.width=Math.floor(b));c&&(a.height=Math.floor(c));d&&(a.outputIsPersisted=d);return g.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/view.json",data:a})}function d(a,b,e){k.clearTimeout(b.reflowWaitTimeout);if("none"==a.css("display")||"none"==a.parent().css("display")||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)k.setTimeout(function(){d(a,
b,e)},499);else if(!e||"viewable"==b.resizedBy){var f=g(k).width(),t=a.parent().width(),m=a.parent().height(),l="parent",v=m;if(f<t)b.reflowWaitCheckCount++,10>b.reflowWaitCheckCount&&(b.reflowWaitTimeout=setTimeout(function(){d(a,b,e)},250));else{0==t&&(t=a.parents(".layout-region-inner").width());t>b.width&&(t=b.width);if(0==m||"parent"!=b.resizedBy||m>c)v=c,m=Math.round(0.8*c),l="viewable";m>b.height&&0<b.height&&(v=m=b.height,l="configured");b.resizedBy=l;if(v!=b.lastHeight||t!=b.lastHeight){var l=
a.width(),y=a.height();if(!(t==b.lastWidth&&v<=b.lastHeight&&(y<=v||0==v)||v==b.lastHeight&&t<=b.lastWidth&&(l<=t||0==t))){var x=[],r=!0;a.children().each(function(){g(this);var a=(this.nodeName||"").toLowerCase();"video"==a||"audio"==a||"embed"==a||"object"==a?x.push(this):"script"!=a&&("style"!=a&&"meta"!=a)&&(r=!1)});r&&0<a.children().length?(g.each(x,function(){var a=g(this),b=a.width()||1,c=a.height()||1;b/t>c/m?a.attr({width:t+"px !important",height:c*t/b+"px !important"}):a.attr({width:b*m/
c+"px !important",height:m+"px !important"})}),a.trigger("rendered")):(""==b.lastHtml&&a.html(g('<div><span class="ui-loading"></span></div>').css({display:"inline-block",width:t?t+"px":0.8*f+"px",height:m?m+"px":0.8*c+"px",display:"flex","align-items":"center","justify-content":"center"})),h(b.url,t,m,b.persist).then(function(c){b.lastHtml!=c.Html&&(a.html(c.Html),b.lastHtml=c.Html,a.trigger("rendered"))}));b.lastHeight=v;b.lastWidth=t}}}}}var c,b=!1;g.telligent.evolution.ui.components.viewhtml=
{setup:function(){c=g(window).height();g(window).on("resized",function(){b||(c=g(window).height())});g.telligent.evolution.messaging.subscribe("window.scrollableheight",function(a){c=a.height;b=!0},{excludeAutoNameSpaces:!0})},add:function(a,b){b.resizedBy="parent";b.lastWidth=-1;b.lastHeight=-1;b.lastHtml="";b.reflowWaitCheckCount=0;b.reflowWaitTimeout=null;d(a,b,!1);g(window).on("resized",function(){d(a,b,!1)});g.telligent.evolution.messaging.subscribe("window.scrollableheight",function(c){d(a,
b,!0)})}};return{}},jQuery,window);q("component.vote",["module.ui"],function(e,f,g,k){function l(d){return f.Deferred(function(c){f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ideas/vote.json",data:{IdeaId:d,UserId:f.telligent.evolution.user.accessing.id},error:function(){c.resolve(null)}}).then(function(b){c.resolve(b.Vote.TotalVotes)})}).promise()}function h(d,c,b){b.contentId==d.contentid&&l(b.contentId).then(function(a){f(c).evolutionUpDownVoting("option",
{yesVotes:b.yesVotes,noVotes:b.noVotes,voteCount:b.totalVotes,score:b.score,userVote:a})})}f.telligent.evolution.ui.components.vote={setup:function(){},add:function(d,c){var b=f.extend({},{isReadOnly:"true"===c.readonly,yesVotes:parseInt(c.initialyesvotes),noVotes:parseInt(c.initialnovotes),voteCount:parseInt(c.initialvotes),score:parseInt(c.initialscore),allowMultipleVotes:"true"===c.allowmultiplevotes,userVote:c.initialuservotetotal,canUserUpVote:"true"===c.canuserupvote,canUserDownVote:"true"===
c.canuserdownvote,canViewVotes:"true"===c.canviewvotes,isUserRegistered:"true"===c.isuserregistered,isUserGroupMember:"true"===c.isusergroupmember,loginUrl:c.loginurl,voteUrl:c.voteurl});f.telligent.evolution.messaging.subscribe("ideaVote.created",function(a){h(c,d,a)});f.telligent.evolution.messaging.subscribe("ideaVote.deleted",function(a){h(c,d,a)});b.onVote=function(a,b){c.contentid&&f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v3/ideas/vote.json",data:{IdeaId:c.contentid,
Value:b},success:function(a){a&&a.Vote&&a.Vote.Idea?f(d).evolutionUpDownVoting("option",{yesVotes:a.Vote.Idea.YesVotes,noVotes:a.Vote.Idea.NoVotes,voteCount:a.Vote.Idea.TotalVotes,score:a.Vote.Idea.Score,userVote:a.Vote.TotalVotes}):f(d).evolutionUpDownVoting("option",{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:null})}})};b.onDeleteVote=function(){c.contentid&&f.telligent.evolution.del({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ideas/vote.json",data:{IdeaId:c.contentid},success:function(a){f.telligent.evolution.get({url:f.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ideas/idea.json",data:{Id:c.contentid},success:function(a){a&&a.Idea?f(d).evolutionUpDownVoting("option",{yesVotes:a.Idea.YesVotes,noVotes:a.Idea.NoVotes,voteCount:a.Idea.TotalVotes,score:a.Idea.Score,userVote:0}):f(d).evolutionUpDownVoting("option",{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:null})}})}})};0==b.voteCount&&b.isReadOnly||f(d).evolutionUpDownVoting(b)}};return{}},jQuery,window);q("component.webpreview",["module.ui"],function(e,f,g,k){f.telligent.evolution.ui.components.webpreview=
{setup:function(){},add:function(e,h){var d=e.hasClass("preview"),c=h.configuration.url,b,a;"undefined"!==typeof h.configuration.maximagewidth&&(b=h.configuration.maximagewidth);"undefined"!==typeof h.configuration.maximageheight&&(a=h.configuration.maximageheight);d||(e.parents(".ui-theater").data("disabletheater",!0),0>h.configuration.url.indexOf(f.telligent.evolution.site.getBaseUrl(!0))&&e.parents(".ui-theater").attr("target","_blank"));f.telligent.evolution.preview.load(c,{maxImageWidth:b,maxImageHeight:a,
success:function(a){d?e.html(a.previewImageHtml||""):a&&(a.excerpt||a.imageUrl)&&(a=f.telligent.evolution.preview.render(a,{template:f.telligent.evolution.preview.defaults.template}),"undefined"!==typeof a&&(null!==a&&0<a.length)&&e.html(a))}})}};return{}},jQuery,window);q("composers",["composer.hashtags","composer.mentions","composer.urlhighlight","composer.autocomplete"],function(){return{}});q("composer.autocomplete",["plugin.evolutionComposer"],function(e,f,g,k){var l={},h=null,d=function(){};
e=function(){return{init:function(b){d=b.settings.onSuggestionList||f.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionList;selectSuggestion=b.settings.onSuggestionSelect||f.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionSelect;b.input.on(c.selectedEventName,function(){selectSuggestion(c.selection());b.release()})},onTransform:function(b){},shouldActivate:function(b){return(b=b.currentWord())&&b.value&&3<=b.value.length?!0:!1},onActivate:function(b){b.data("_autocomplete_composer_active",
!0);f(document).on("click.autocomplete",function(a){b.release();f(document).off(".autocomplete")})},onDeactivate:function(b){b.data("_autocomplete_composer_active",!1);c.hide();b.input.trigger("focus")},val:function(b,a){return b},onkeydown:function(b,a){if(27===a.which)return b.release(),!1;if(9==a.which)b.release();else{if(13===a.which){var d=c.selection();d&&selectSuggestion(d);b.release();return!1}if(38===a.which)return c.moveHighlightUp(),!1;if(40===a.which)return c.moveHighlightDown(),!1}return!0},
onkeypress:function(b,a){return!0},oninput:function(b,a){clearTimeout(h);c.loading(b.input);h=setTimeout(function(){var a=b.val();if(1<a.length){var e=function(a){null!==a&&0<a.length?c.show(b.input,a,b.settings.suggestionHeader):b.release()};"undefined"!==typeof l[a]?b.data("_autocomplete_composer_active")&&e(l[a]):d(a,function(c){b.data("_autocomplete_composer_active")&&(l[a]=c,b.val()==a&&e(c))})}else b.release()},500);return!0},defaults:{}}}();var c=function(){var b=null,a=null,c=null,d=null,
e=null,h=function(m){d=m;if(null===b){b=f('<div class="composer-suggestion-selector popup-list content"></div>').hide().appendTo(f("body"));c=f('<span class="heading"></span>').appendTo(b);a=f('<ul class="content-list content suggestions"></ul>').appendTo(b);e=f('<li class="loading">...</li>');var h=0,t=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){h+=1;3===h&&(h=0);e.get(0).innerHTML=t[h]},175);b.on("click",
"li",function(a){null!==d&&(b.find("li.highlight").removeClass("highlight"),f(this).addClass("highlight"),d.trigger(g.selectedEventName))})}},m=function(){if(null!==d){var a=d.offset(),c=f(d);b.css({width:c.outerWidth()-2,top:a.top+c.outerHeight()-1,left:a.left})}},g={selectedEventName:"SUGGESTION_SELECTED",show:function(d,e,p){c.html(p);h(d);m();b.hide();a.empty();f.each(e,function(b,c){var d=f('<li class="content-item suggestion">'+c.viewHtml+"</li>");d.data("suggestionData",c);a.append(d)});b.show()},
hide:function(){null!==b&&(b.hide(),a.empty())},loading:function(c){h(c);m();b.hide();a.empty().append(e);b.show()},moveHighlightUp:function(){var a=b.find("li.suggestion");if(0!==a.length){var c=a.length;f.each(a,function(a,b){f(b).hasClass("highlight")&&(c=a,f(b).removeClass("highlight"))});0>c-1&&(c=a.length);f(a.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li.suggestion");if(0!==a.length){var c=-1;f.each(a,function(a,b){f(b).hasClass("highlight")&&(c=a,f(b).removeClass("highlight"))});
c+1>=a.length&&(c=-1);f(a.get(c+1)).addClass("highlight")}},selection:function(){var a=b.find("li.suggestion");if(0===a.length)return null;var c=a.filter("li.suggestion.highlight");return null!==c&&0<c.length?c.data("suggestionData"):f(a.get(0)).data("suggestionData")}};return g}();f.fn.evolutionComposer.plugins.autocomplete=e;f.fn.evolutionComposer.plugins.autocomplete.defaults={onSuggestionList:function(b,a){a(null)},onSuggestionSelect:function(b){}};return{}},jQuery,window);q("composer.hashtags",
["plugin.evolutionComposer","lib.globalConfiguration","module.rest"],function(e,f,g,k,l,h){e=function(){for(var c=null,b=!1,a={},e=function(a){var b=a.data("_tagged_tags");if("undefined"===typeof b||null===b)b=[],a.data("_tagged_tags",b);return b},p=function(a){return a.currentWord({additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})},h=function(a,b,c,m,r){var h=e(a)||[];h[h.length]=b;c&&(c=p(a),a.replace(c.start,c.stop+1,b.decodedName+(m?" ":"")),b=c.start+(b.decodedName+(m?" ":"")).length,m=a.input.get(0),
m.setSelectionRange?m.setSelectionRange(b,b):m.createTextRange&&(m=m.createTextRange(),m.collapse(!0),m.moveEnd("character",b),m.moveStart("character",b),m.select()));t(a);a.data("_hashtag_composer_active",!1);d.hide();a.input.trigger("focus");r&&a.release()},t=function(a){var b=e(a).reverse(),c=a.val();a.clearHighlights(a.settings.highlightClass||v);var d={};k.each(b,function(e,n){if(n&&null!==n.decodedName&&0<n.decodedName.length){var m=c.indexOf(n.decodedName);if(0>m||d[m])b.splice(e,1);else for(;0<=
m;)a.addHighlight({start:m,stop:n.decodedName.length+m,className:a.settings.highlightClass||v}),d[m]=!0,m=c.indexOf(n.decodedName,m+1)}});a.renderHighlights()},m=function(a){return 2<a.length&&0===a.indexOf("#")&&!c.test(a.substr(1))&&isNaN(parseInt(a[1],10))},l=function(a){return k.Deferred(function(c){g.get({url:f.baseUrl+"tinymce/apis/hashtags",cache:!0,data:{t:"m",contenttypeid:a||""}}).then(function(a){(b=a&&"true"===a.supported)?c.resolve():c.reject()})["catch"](function(){c.reject()})}).promise()},
v="composer-hashtag-highlight",y=function(){},x=null,r=null,w=/\[tag:([^\]]+)\]/gi,c=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i"),z=0;33>z;z++)a["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(z)]=!0;return{init:function(a){l(a.settings.contentTypeId).then(function(){y=a.settings.onTagList||k.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;a.input.on(d.selectedEventName,function(){h(a,d.selection(),!0,!0,!0)});a.input.on("blur",function(){setTimeout(function(){a.data("_hashtag_composer_active")&&
a.release()},500)})})},onTransform:function(a,b){if(b)for(var c=a.val(),d=w.exec(c);null!==d&&0<=d.index&&null!==d&&1<d.length;){var e={token:"[tag:"+d[1]+"]",name:"#"+d[1],decodedName:"#"+k.telligent.evolution.html.decode(d[1])};a.val(a.val().replace(d[0],e.name));h(a,e,!1);d=w.exec(c)}t(a)},shouldActivate:function(a){return b?m(p(a).value):!1},onActivate:function(a){a.data("_hashtag_composer_active",!0);k(document).on("click.ui-composer-hashtags",function(){a.release();k(document).off(".ui-composer-hashtags")})},
onDeactivate:function(a){var b=p(a);m(b.value)&&h(a,{decodedName:b.value,name:b.value,token:"[tag:"+b.value.substr(1)+"]"},!0,!1,!1);a.data("_hashtag_composer_active",!1);d.hide();a.input.trigger("focus")},val:function(a,c){if(!b)return a;var d=e(c);k.each(d,function(b,c){a=a.replace(RegExp(k.telligent.evolution.regex.encode(c.decodedName),"g"),c.token)});return a},onkeydown:function(a,c){if(!b)return!0;if(27===c.which||32===c.which)a.release();else if(13===c.which||9===c.which){var e=d.selection();
if(e)return h(a,e,!0,!0,!0),!1;a.release()}else{if(38===c.which)return d.moveHighlightUp(),!1;if(40===c.which)return d.moveHighlightDown(),!1}return!0},onkeypress:function(c,d){if(!b)return!0;"undefined"!==typeof a[d.which]&&c.release();return!0},oninput:function(a,c){if(!b)return!0;if(!m(p(a).value))return a.release(),!0;if(a.currentWord().value==r&&a.data("_hashtag_composer_active"))return!0;clearTimeout(x);d.loading(a.input);x=setTimeout(function(){var b=r=a.currentWord().value;m(b)?2<=b.length&&
y(b.substr(1),function(c){if(a.data("_hashtag_composer_active")){c&&(c=k.map(c,function(a){return{name:a.name,token:a.token,decodedName:k.telligent.evolution.html.decode(a.name)}}));var e=p(a).value;e==b&&m(e)&&null!==c&&0<c.length?d.show(a.input,c,b):d.hide()}}):a.release()},500);return!0}}}();var d=function(){var c=null,b=null,a=null,d=function(d){b=d;if(null===c){c=k('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(k("body"));a=k('<li class="loading">...</li>');var e=0,n=["<strong>&bull;</strong>&bull;&bull;",
"&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){e+=1;3===e&&(e=0);a.get(0).innerHTML=n[e]},175);c.on("click","li",function(a){null!==b&&(c.find("li.highlight").removeClass("highlight"),k(this).addClass("highlight"),b.trigger(h.selectedEventName))})}},e=function(){if(null!==b){var a=b.offset(),d=k(b);c.css({width:d.outerWidth()-2,top:a.top+d.outerHeight()-1,left:a.left})}},h={selectedEventName:"HASHTAG_SELECTED",show:function(a,b,h){d(a);e();c.hide().empty();
var f=RegExp(k.telligent.evolution.regex.encode(k.telligent.evolution.html.encode(h)),"i");k.each(b,function(a,b){var d=b.name.match(f),d=null!==d?k("<li>"+b.name.replace(f,"<strong>"+d[0]+"</strong>")+"</li>"):k("<li>"+b.name+"</li>");d.data("tagData",b);c.append(d)});c.show()},hide:function(){null!==c&&c.hide().empty()},loading:function(b){d(b);e();c.hide().empty().append(a).show()},moveHighlightUp:function(){var a=c.find("li");if(0!==a.length){var b=a.length;k.each(a,function(a,c){k(c).hasClass("highlight")&&
(b=a,k(c).removeClass("highlight"))});0>b-1&&(b=a.length);k(a.get(b-1)).addClass("highlight")}},moveHighlightDown:function(){var a=c.find("li");if(0!==a.length){var b=-1;k.each(a,function(a,c){k(c).hasClass("highlight")&&(b=a,k(c).removeClass("highlight"))});b+1>=a.length&&(b=-1);k(a.get(b+1)).addClass("highlight")}},selection:function(){var a=c.find("li");if(0===a.length)return null;var b=a.filter("li.highlight");return null!==b&&0<b.length?b.data("tagData"):k(a.get(0)).data("tagData")}};return h}();
k.fn.evolutionComposer.plugins.hashtags=e;k.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(c,b){k.telligent.evolution.get({url:k.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",data:{QueryText:c,PageSize:5},cache:!1,dataType:"json",success:function(a){a.HashTags&&0<a.HashTags.length?(a=k.map(a.HashTags,function(a){return{name:a.PreviewHtml,token:a.Token}}),b(a)):b(null)}})}};return{}},jQuery,window);q("composer.mentions",["plugin.evolutionComposer",
"lib.globalConfiguration","module.rest"],function(e,f,g,k,l,h){e=function(){var c={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;supported=!1;getMentions=function(b){var a=b.data("_mentioned_mentionables");if("undefined"===typeof a||null===a)a=[],b.data("_mentioned_mentionables",a);return a};setCursorPosition=function(b,a){var c=b.input.get(0);c.setSelectionRange?c.setSelectionRange(a,a):c.createTextRange&&(c=c.createTextRange(),c.collapse(!0),c.moveEnd("character",
a),c.moveStart("character",a),c.select())};mentionMentionable=function(b,a,c){var d=getMentions(b)||[];d[d.length]=a;c&&(c=effectiveCurrentWord(b),b.replace(c.start,c.stop+1,a.decodedName+" "),allowedSpaces(b,0),setCursorPosition(b,c.start+(a.decodedName+" ").length));b.release();updateHighlights(b)};updateHighlights=function(b){var a=getMentions(b),c=b.val();b.clearHighlights(b.settings.highlightClass||mentionHighlightClass);k.each(a,function(d,e){if(e&&null!==e.decodedName&&0<e.decodedName.length){var h=
c.indexOf(e.decodedName);if(0>h)a.splice(d,1);else for(;0<=h;)b.addHighlight({start:h,stop:e.decodedName.length+h,className:b.settings.highlightClass||mentionHighlightClass}),h=c.indexOf(e.decodedName,h+1)}});b.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getContent=getMentionablesTimeout=null;allowedSpaces=function(b,a){return"undefined"!==typeof a?(b.data("_allowed_spaces",a),a):b.data("_allowed_spaces")||0};effectiveCurrentWord=
function(b){var a=b.val().substring(0,caretPosition),d=null;k.each(c,function(b,c){if(null!==c&&0<c.length&&a.match("@"+k.telligent.evolution.regex.encode(b)+"$"))return d="@"+b,!1});if(null!==d){var e=a.length-d.length;allowedSpaces(b,d.split(" ").length-1);return{value:d,start:e,stop:e+d.length}}return b.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(b),additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})};collectRawTokens=function(b){for(var a=b.val(),c=[];null!==
(tokens=rToken.exec(a));)c.push({match:tokens,contentTypeId:tokens[2],contentId:tokens[1]});0<c.length&&getContent&&getContent(c,function(a){k.each(a,function(a,c){var d={token:c.match[0],name:c.name,decodedName:k.trim(c.name)};b.val(b.val().replace(d.token,d.name));mentionMentionable(b,d,!1)});b.input.trigger("input")})};initSupported=function(b){return k.Deferred(function(a){g.get({url:f.baseUrl+"tinymce/apis/mentions",cache:!0,data:{t:"m",contenttypeid:b||""}}).then(function(b){(supported=b&&"true"===
b.supported)?a.resolve():a.reject()})["catch"](function(){a.reject()})}).promise()};rToken=/\[mention:([^:]+):([^\]]+)\]/gi;return{init:function(b){initSupported(b.settings.contentTypeId).then(function(){getMentionables=b.settings.onMentionableList||k.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;getContent=b.settings.onListContent||k.fn.evolutionComposer.plugins.mentions.defaults.onListContent;b.input.on(d.selectedEventName,function(){mentionMentionable(b,d.selection(),!0)});b.input.on({blur:function(){setTimeout(function(){b.data(isActiveKey)&&
b.release()},500)},keydown:function(){caretPosition=b.caretPosition()+1}})})},onTransform:function(b,a){a&&collectRawTokens(b);updateHighlights(b)},shouldActivate:function(b){return supported&&0===effectiveCurrentWord(b).value.indexOf("@")},onActivate:function(b){b.data(isActiveKey,!0);k(document).on("click.mentions",function(){b.release();k(document).off(".mentions")})},onDeactivate:function(b){b.data(isActiveKey,!1);d.hide();b.input.trigger("focus");allowedSpaces(b,0)},val:function(b,a){if(!supported)return b;
var c=getMentions(a);k.each(c,function(a,c){b=b.replace(c.decodedName,c.token)});return b},onkeydown:function(b,a){if(!supported)return!0;if(32===a.which)allowedSpaces(b,allowedSpaces(b)+1);else{if(27===a.which)return b.release(),!1;if(13===a.which||9===a.which){var c=d.selection();c?mentionMentionable(b,c,!0):b.release();return!1}if(38===a.which)return d.moveHighlightUp(),!1;if(40===a.which)return d.moveHighlightDown(),!1}return!0},onkeypress:function(b,a){return!0},oninput:function(b,a){if(!supported)return!0;
clearTimeout(getMentionablesTimeout);d.loading(b.input);getMentionablesTimeout=setTimeout(function(){var a=effectiveCurrentWord(b).value.substring(1);if(1<a.length){var e=function(c){null!==c&&0<c.length?d.show(b.input,c,a):b.release()};"undefined"!==typeof c[a]?b.data(isActiveKey)&&e(c[a]):getMentionables(a,function(d){b.data(isActiveKey)&&(d&&(d=k.map(d,function(a){return{name:a.name,token:a.token,decodedName:k.trim(k.telligent.evolution.html.decode(a.name))}})),c[a]=d,effectiveCurrentWord(b).value.substring(1)==
a&&e(d))})}else b.release()},500);return!0}}}();var d=function(){var c=null,b=null,a=null,d=function(d){b=d;if(null===c){c=k('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(k("body"));a=k('<li class="loading">...</li>');var e=0,p=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){e+=1;3===e&&(e=0);a.get(0).innerHTML=p[e]},175);c.on("click","li",function(a){null!==b&&(c.find("li.highlight").removeClass("highlight"),
k(this).addClass("highlight"),b.trigger(h.selectedEventName))})}},e=function(){if(null!==b){var a=b.offset(),d=k(b);c.css({width:d.outerWidth()-2,top:a.top+d.outerHeight()-1,left:a.left})}},h={selectedEventName:"MENTIONABLE_SELECTED",show:function(a,b,h){d(a);e();c.hide().empty();var f=RegExp(k.telligent.evolution.regex.encode(k.telligent.evolution.html.encode(h)),"i");k.each(b,function(a,b){var d=b.name.match(f),d=null!==d?k("<li>"+b.name.replace(f,"<strong>"+d[0]+"</strong>")+"</li>"):k("<li>"+
b.name+"</li>");d.data("mentionableData",b);c.append(d)});c.show()},hide:function(){null!==c&&c.hide().empty()},loading:function(b){d(b);e();c.hide().empty().append(a).show()},moveHighlightUp:function(){var a=c.find("li");if(0!==a.length){var b=a.length;k.each(a,function(a,c){k(c).hasClass("highlight")&&(b=a,k(c).removeClass("highlight"))});0>b-1&&(b=a.length);k(a.get(b-1)).addClass("highlight")}},moveHighlightDown:function(){var a=c.find("li");if(0!==a.length){var b=-1;k.each(a,function(a,c){k(c).hasClass("highlight")&&
(b=a,k(c).removeClass("highlight"))});b+1>=a.length&&(b=-1);k(a.get(b+1)).addClass("highlight")}},selection:function(){var a=c.find("li");if(0===a.length)return null;var b=a.filter("li.highlight");return null!==b&&0<b.length?b.data("mentionableData"):k(a.get(0)).data("mentionableData")}};return h}();k.fn.evolutionComposer.plugins.mentions=e;k.fn.evolutionComposer.plugins.mentions.defaults={onListContent:function(c,b){k.telligent.evolution.batch(function(){k.each(c,function(a,b){k.telligent.evolution.get({url:k.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/genericcontent/{contentId}/{contentTypeId}.json",data:{contentId:b.contentId,contentTypeId:b.contentTypeId}}).then(function(a){b.name=a.Content.HtmlName})})}).then(function(){b(c)})},onMentionableList:function(c,b){k.telligent.evolution.get({url:k.fn.evolutionComposer.plugins.mentions.defaults.mentionablesEndpoint,data:{QueryText:c,PageSize:20},cache:!1,dataType:"json",success:function(a){a.Mentionables&&0<a.Mentionables.length?(a=k.map(a.Mentionables,function(a){return{name:a.PreviewHtml,
token:a.Token}}),b(a)):b(null)}})},mentionablesEndpoint:k.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml"};return{}},jQuery,window);q("composer.urlhighlight",["plugin.evolutionComposer"],function(e,f,g,k){var l=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;e=function(){var e={init:function(d){d.highlighClassName=d.highlighClassName||e.defaults.highlighClassName},onTransform:function(d){var c;c=(d.val()||"").match(l);c=null!==
c&&0<c.length?c[0]:null;if(null!==c){var b;b=d.data("_composer_urlpreview_data");if(null===b||"undefined"===typeof b)b={},d.data("_composer_urlpreview_data",b);var a=d.val().indexOf(c);if(0<=a&&"undefined"===typeof b.lastRange||b.lastRange.start!==a||b.lastRange.stop!==a+c.length)b.lastRange={start:a,stop:a+c.length},d.clearHighlights(d.highlighClassName),d.addHighlight({start:a,stop:a+c.length,className:d.highlighClassName}),d.renderHighlights()}else d.clearHighlights(d.highlighClassName)},shouldActivate:function(d){return!1},
val:function(d,c){return d},onkeydown:function(d,c){return!0},oninput:function(d,c){return!0},defaults:{highlighClassName:"composer-url-highlight",loadingText:"..."}};return e}();f.fn.evolutionComposer.plugins.urlhighlight=e;return{}},jQuery,window);q("events","events.gestures events.hashchange events.notifications events.systemnotifications events.pointers events.scroll events.textinput events.resized events.comments events.presence events.activitystories events.wake events.forums events.quote events.rendered events.likes events.ideaVotes events.mutate events.plugins events.badgeablePanelChange events.users".split(" "),
function(){return{}});q("events.activitystories",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.activitystories&&(f.telligent.evolution.sockets.activitystories.on("created",function(f){e.publish("activitystory.created",f)}),f.telligent.evolution.sockets.activitystories.on("updated",function(f){e.publish("activitystory.updated",f)}),f.telligent.evolution.sockets.activitystories.on("deleted",function(f){e.publish("activitystory.deleted",
f)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.badgeablePanelChange",["module.messaging","lib.globalConfiguration"],function(e,f,g,k){var l=null,h={getUpdatedCounts:function(c){c=g.extend(l||{},c||{},{source:k.location.href});return g.telligent.evolution.post({url:f.badgeablePanelCountUrl,data:c})}},d={setCurrentContext:function(c){l=c},update:function(c){return c&&c.crossWindow?e.publish("_badgedPanels.updateAll",null,{crossWindow:!0}):h.getUpdatedCounts().then(function(b){e.publish("_badgedPanels.countsChanged",
b)})}};e.subscribe("socket.connected",function(){if(g.telligent.evolution.sockets.badgedPanels)g.telligent.evolution.sockets.badgedPanels.on("updated",function(c){d.update()})},{excludeAutoNameSpaces:!0});e.subscribe("_badgedPanels.contextChanged",function(c){d.setCurrentContext(c)},{excludeAutoNameSpaces:!0});e.subscribe("_badgedPanels.updateAll",function(c){d.update()},{excludeAutoNameSpaces:!0});return d},jQuery,window);q("events.comments",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",
function(){f.telligent.evolution.sockets.comments&&(f.telligent.evolution.sockets.comments.on("created",function(f){e.publish("comment.created",f)}),f.telligent.evolution.sockets.comments.on("updated",function(f){e.publish("comment.updated",f)}),f.telligent.evolution.sockets.comments.on("deleted",function(f){e.publish("comment.deleted",f)}),f.telligent.evolution.sockets.comments.on("typing",function(f){e.publish("comment.typing",f)}),f.telligent.evolution.sockets.comments.on("voted",function(f){e.publish("comment.voted",
f)}),f.telligent.evolution.sockets.comments.on("presenceChanged",function(f){e.publish("comments.presenceChanged",f)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.forums",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.forums&&(f.telligent.evolution.sockets.forums.on("thread.updated",function(f){e.publish("forumThread.updated",f)}),f.telligent.evolution.sockets.forums.on("created",function(f){e.publish("forumReply.created",
f)}),f.telligent.evolution.sockets.forums.on("updated",function(f){e.publish("forumReply.updated",f)}),f.telligent.evolution.sockets.forums.on("deleted",function(f){e.publish("forumReply.deleted",f)}),f.telligent.evolution.sockets.forums.on("typing",function(f){e.publish("forumReply.typing",f)}),f.telligent.evolution.sockets.forums.on("voted",function(f){e.publish("forumReply.voted",f)}),f.telligent.evolution.sockets.forums.on("presenceChanged",function(f){e.publish("forumThread.presenceChanged",
f)}),f.telligent.evolution.sockets.forums.on("threadvoted",function(f){e.publish("forumThread.voted",f)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.gestures",["events.pointers","lib.util"],function(e,f,g,k){function l(a){return(new Date).getTime()-(a||(new Date).getTime())}function h(a,b,c,d){a=180*Math.atan2(b-d,c-a)/Math.PI;0>a&&(a+=360);return a}function d(a){if(315<a||45>=a)return"right";if(45<a&&135>=a)return"up";if(135<a&&225>=a)return"left";if(225<a&&315>=a)return"down"}
function c(a,b,c){if(a.selector){var d=g(b.originalEvent.target);if(d.is(a.selector)||0<d.closest(a.selector).length)return c.call(this,b)}else return c.call(this,b)}function b(a,b,c,d){c.target=a.target;d?b.trigger(c):b&&b.triggerHandler(c);return a.cancelBubble==p?!0:a.cancelBubble}function a(a,e){var p;a.on(m.start+n,function(d){return c(e,d,function(){p&&k.clearTimeout(p.tapHoldDurationout);p={startTime:(new Date).getTime(),startPageX:d&&d.pointers&&1<=d.pointers.length?d.pointers[0].pageX:0,
startPageY:d&&d.pointers&&1<=d.pointers.length?d.pointers[0].pageY:0,held:!1,tapHoldDurationout:null,lastTap:p?p.lastTap:0};p.tapHoldDurationout=k.setTimeout(function(){p.held=!0;b(d,a,{type:u.taphold,pointers:d.pointers,originalEvent:d,duration:l(p.startTime||(new Date).getTime())})},t.tapHoldDuration)})});a.on(m.move+n,function(m){return c(e,m,function(){if(p){var c=Math.abs(Math.sqrt(Math.pow((m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0)-p.startPageX,2)+Math.pow((m&&m.pointers&&1<=
m.pointers.length?m.pointers[0].pageY:0)-p.startPageY,2)));p.tapHoldDurationout&&c>=t.tapHoldMaxDistance&&k.clearTimeout(p.tapHoldDurationout);if(p.panning||m&&m.pointers&&1===m.pointers.length&&c>t.panMinDistance){var c=h(p.startPageX,p.startPageY,m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0,m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0),e=d(c),c={type:u.panStart,pointers:m?m.pointers:[],originalEvent:m,angle:c,direction:e,pageX:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:
0,pageY:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0};p.panning||(p.panning=!0,b(m,a,c,!0));c.type=u.pan;b(m,a,c,!0)}}})});a.on(m.end+n,function(m){return c(e,m,function(){if(p){k.clearTimeout(p.tapHoldDurationout);var c=l(p.startTime||(new Date).getTime()),e=Math.abs(Math.sqrt(Math.pow((m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0)-p.startPageX,2)+Math.pow((m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0)-p.startPageY,2)));if(!p.held&&c<=t.tapMaxDuration&&e<=t.tapMaxDistance)c=
{type:u.tap,pointers:m?m.pointers:[],originalEvent:m,duration:c},b(m,a,c),e=(new Date).getTime(),p.lastTap&&e-p.lastTap<=t.doubleTapMaxDuration?(c.type=u.doubleTap,b(m,a,c),p.lastTap=0):p.lastTap=e;else if(p.panning&&b(m,a,{type:u.panEnd,pointers:m?m.pointers:[],originalEvent:m,pageX:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0,pageY:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0},!0),m&&m.pointers&&1===m.pointers.length&&e/c>=t.swipeMinVelocity){var n=h(p.startPageX,p.startPageY,
m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0,m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0),e=d(n),c={type:u.swipe,pointers:m?m.pointers:[],originalEvent:m,duration:c,angle:n,direction:e,pageX:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageX:0,pageY:m&&m.pointers&&1<=m.pointers.length?m.pointers[0].pageY:0};b(m,a,c,!0);c.type+=e;b(m,a,c,!0)}else p={}}})})}var n="._gesture_events_namespace",p,u={tap:"tap",taphold:"taphold",doubleTap:"doubletap",swipe:"swipe",swipeUp:"swipeup",
swipeDown:"swipedown",swipeRight:"swiperight",swipeLeft:"swipeleft",panStart:"panstart",pan:"pan",panEnd:"panend"},t={tapHoldDuration:400,tapHoldMaxDistance:1,tapMaxDuration:350,tapMaxDistance:10,swipeMinVelocity:0.5,panMinDistance:10,doubleTapMaxDuration:250},m={start:"pointerstart",move:"pointermove",end:"pointerend"};if(g.telligent&&g.telligent.evolution&&g.telligent.evolution._SUPPRESS_GESTURES)return{eventNamespace:n.substring(1)};window.onorientationchange===p&&(g.event.special.orientationchange=
{setup:function(){var a=g(window),b,c=function(){a.trigger("orientationchange")};window.addEventListener("resize",f.requestAnimationFrameThrottle(function(a){k.clearTimeout(b);b=k.setTimeout(c,100)}),!1)}});var s={"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"};g.each(u,function(b,c){g.event.special[c]={add:function(b){var d=g(this);c===u.taphold&&
d.css(s);d.data("._gesture_events_bound")||(d.data("._gesture_events_bound",!0),a(d,b))},remove:function(a){a=g(this);a.off(n);a.removeData("._gesture_events_bound")}}});g.gestures={defaults:t};return{eventNamespace:n.substring(1)}},jQuery,window);q("events.hashchange",function(e,f){var g="onhashchange"in f&&(void 0===document.documentMode||7<document.documentMode),k=f.location.href,l=e(f),h;g||(e.event.special.hashchange={setup:function(){h||(h=setInterval(function(){f.location.href!==k&&(k=f.location.href,
l.trigger("hashchange"))},e.hashChangeSettings.interval))}});e.hashChangeSettings={interval:10};return{}},jQuery,window);q("events.ideaVotes",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.ideaVotes&&(f.telligent.evolution.sockets.ideaVotes.on("created",function(f){e.publish("ideaVote.created",f)}),f.telligent.evolution.sockets.ideaVotes.on("deleted",function(f){e.publish("ideaVote.deleted",f)}))},{excludeAutoNameSpaces:!0});return{}},
jQuery,window);q("events.textinput",function(e,f,g){var k="oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");e.event.special.textinput={setup:function(){var f=e(this);if(k)f.on("input",function(d){f.trigger("textinput",{which:d.which})});else{var h;f.on({keydown:function(d){h=f.val()},keyup:function(d){var c=f.val();c!==h&&f.trigger("textinput",{which:d.which});h=c}})}}};return{}},jQuery,window);q("events.likes",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",
function(){f.telligent.evolution.sockets.likes&&(f.telligent.evolution.sockets.likes.on("created",function(f){e.publish("like.created",f)}),f.telligent.evolution.sockets.likes.on("deleted",function(f){e.publish("like.deleted",f)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.mutate",function(e,f){e.event.special.mutate={add:function(f){if(MutationObserver){var k=e(this);k.data("_mutation_observed")||(k.data("_mutation_observed",!0),(new MutationObserver(function(e){k.trigger("mutate",
e)})).observe(this,{childList:!0,characterData:!1,attributes:!1}))}}};return{}},jQuery,window);q("events.notifications",["module.messaging"],function(e,f,g){function k(b){if(!(h&&b&&b.typeId&&d))return!1;for(var a=0;a<d.length;a++)if(!d[a](b))return!0;var c=h[b.typeId];if(!c)return!1;for(a=0;a<c.length;a++)if(!c[a](b))return!0;return!1}var l=0,h={},d=[],c={addFilter:function(b,a){if(b)return"function"===typeof b&&(a=b,b=null),a=a||function(){return!1},l++,a.filterId=l,b?(h[b]=h[b]||[],h[b].push(a)):
d.push(a),l},removeFilter:function(b,a){if(b){var c=h[b];c&&(a?(c=f.grep(c,function(b){return b.filterId!=a}),h[b]=c,d=f.grep(d,function(b){return b.filterId!=a})):delete h[b])}},clearFilters:function(){h={};d=[];l=0}};return{initiate:function(){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.notifications&&(f.telligent.evolution.sockets.notifications.on("received",function(b){k(b)&&(b.suppress=!0);e.publish("notification.raised",b)}),f.telligent.evolution.sockets.notifications.on("read",
function(b){k(b)&&(b.suppress=!0);e.publish("notification.read",b)}))},{excludeAutoNameSpaces:!0});f.telligent=f.telligent||{};f.telligent.evolution=f.telligent.evolution||{};f.telligent.evolution.notifications=f.extend(f.telligent.evolution.notifications||{},c)}}},jQuery,window);q("events.plugins",["module.messaging","lib.util"],function(e,f,g,k){e.subscribe("socket.connected",function(){if(g.telligent.evolution.sockets.plugins)g.telligent.evolution.sockets.plugins.on("refresh",f.debounce(function(){e.publish("plugins.initialized")},
5E3))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.pointers",["lib.util","lib.events"],function(e,f,g,k,l){function h(a,b){this.pageX=a;this.pageY=b}function d(a){return[new h(a.pageX,a.pageY)]}function c(a){if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;c++)b[b.length]=new h(a[c].pageX,a[c].pageY);return b}function b(a){return[new h(a.originalEvent.pageX,a.originalEvent.pageY)]}function a(a,b,c,d){a&&a.length&&a.triggerHandler({type:b,pointers:c,originalEvent:d,target:d.target})}
function n(a,b,c,d){if(a.selector){if(c=g(c.target),c.is(a.selector)||0<c.closest(a.selector).length)return d.call(this,b)}else d.call(this,b)}function p(){var a={pointermove:"tepointermove",pointerstart:"tepointerstart",pointerend:"tepointerend"};g.fn.on=g.fn.bind=u(g.fn.on,a,!0);g.fn.trigger=u(g.fn.trigger,a,!1);g.fn.off=g.fn.unbind=u(g.fn.off,a,!1)}function u(a,b,c){return function(){var d=Array.prototype.slice.call(arguments,0);if(c&&1===d.length&&g.isPlainObject(d[0])){var e=d[0];g.each(b,function(a,
b){e[a]!=l&&(e[b]=e[a],delete e[a])});return a.call(this,e)}if("string"!=typeof d[0])return a.apply(this,d);eventParts=d[0].split(".",2);if(2==eventParts.length&&"_pointer_events_namespace"==eventParts[1])return a.apply(this,d);b[eventParts[0]]&&(eventParts[0]=b[eventParts[0]],d[0]=eventParts.join("."));return a.apply(this,d)}}var t={start:"pointerstart",testart:"tepointerstart",move:"pointermove",temove:"tepointermove",end:"pointerend",teend:"tepointerend"};k={pointerMoveThrottle:10};if(g.telligent&&
g.telligent.evolution&&g.telligent.evolution._SUPPRESS_POINTERS)return{eventNamespace:"_pointer_events_namespace"};var m=window.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel"},s=[{test:function(){return"onmspointerdown"in window||"onpointerdown"in window},add:function(c,d){var p=!1;c.on(m.down+"._pointer_events_namespace",function(e){e.button&&0<e.button||n(d,e,e.originalEvent,
function(){a(c,t.testart,b(e),e);p=!0})});c.on(m.move+"._pointer_events_namespace",e.requestAnimationFrameThrottle(function(e){n(d,e,e.originalEvent,function(){p&&a(c,t.temove,b(e),e)})}));c.on(m.up+"._pointer_events_namespace",function(e){e.button&&0<e.button||n(d,e,e.originalEvent,function(){p=!1;a(c,t.teend,b(e),e)})});c.on(m.cancel+"._pointer_events_namespace",function(e){n(d,e,e.originalEvent,function(){p=!1;a(c,t.teend,b(e),e)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"ontouchstart"in
window},add:function(b,d){var m=!1,p=!0;d&&(d.data&&d.data.passive!==l)&&(p=d.data.passive);var h=b.get(0);h&&(f.addHandler(h,"touchstart._pointer_events_namespace",function(e){n(d,e,e,function(){a(b,t.testart,c(e.touches),e);m=!0})},{passive:p}),f.addHandler(h,"touchmove._pointer_events_namespace",e.requestAnimationFrameThrottle(function(e){n(d,e,e,function(){m&&a(b,t.temove,c(e.touches),e)})}),{passive:p}),f.addHandler(h,"touchend._pointer_events_namespace",function(e){n(d,e,e,function(){m=!1;a(b,
t.teend,c(e.changedTouches),e)})},{passive:p}),f.addHandler(h,"touchcancel._pointer_events_namespace",function(e){n(d,e,e,function(){m=!1;a(b,t.teend,c(e.changedTouches),e)})},{passive:p}))},remove:function(a){(a=a.get(0))&&f.removeHandler(a,"._pointer_events_namespace")}},{test:function(){return"onmousedown"in document},add:function(b,c){var m=!1;b.on("mousedown._pointer_events_namespace",function(e){1===e.which&&n(c,e,e.originalEvent,function(){a(b,t.testart,d(e),e);m=!0})});b.on("mousemove._pointer_events_namespace",
e.requestAnimationFrameThrottle(function(e){n(c,e,e.originalEvent,function(){m&&a(b,t.temove,d(e),e)})}));b.on("mouseup._pointer_events_namespace",function(e){1===e.which&&n(c,e,e.originalEvent,function(){m=!1;a(b,t.teend,d(e),e)})});b.on("mouseleave._pointer_events_namespace",function(e){n(c,e,e.originalEvent,function(){m&&a(b,t.teend,d(e),e);m=!1})})},remove:function(a){a.off("._pointer_events_namespace")}}],v,y=0;for(;y<s.length;y++)!v&&s[y].test()&&(v=s[y]);if(v){for(var x in t)g.event.special[t[x]]=
{add:function(a){var b=g(this);b.data("._pointer_events_bound")||(b.data("._pointer_events_bound",!0),v.add(b,a))},remove:function(a){a=g(this);v.remove(a);a.removeData("._pointer_events_bound")}};g.pointer={defaults:k};p();return{eventNamespace:"_pointer_events_namespace"}}},jQuery,window);q("events.presence",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.presence&&(f.telligent.evolution.sockets.presence.on("userPresenceChanged",function(f){e.publish("user.presenceChanged",
f)}),f.telligent.evolution.sockets.usersPresence.on("usersPresenceChanged",function(f){e.publish("users.presenceChanged",f)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.quote",function(e,f){function g(){if(!c){e(document).on("selectionchange._evolution_quote",function(){d()});if(!("onselectionchange"in document))e(document).on("mousemove._evolution_quote",function(){d()});e(document).on("customizepage._evolution_quote",function(){k()});n=e('<a href="#" class="evolution-quote-handle"></a>').html(e.event.special.quote.defaults.quoteText).hide().on("click",
function(a){null!=b&&(e(b.element).trigger(e.Event("quote",{quotedHtml:b.html})),u=!1,n.hide(),f.getSelection?f.getSelection().empty?f.getSelection().empty():f.getSelection().removeAllRanges&&f.getSelection().removeAllRanges():document.selection&&document.selection.empty());return!1}).on("mouseout",function(a){u=!1}).on("mouseover mousemove",function(a){u||(a.buttons&&0!=a.buttons?n.hide():u=!0)}).appendTo(e("body"));c=!0}}function k(){!c||0<a.length||(e(document).off("._evolution_quote"),n.remove(),
n=null,c=!1)}function l(b){for(var c=0;c<a.length;c++)if(a[c].parentElement==b||e.contains(a[c].parentElement,b)){if(!a[c].selector)return!0;c=e(a[c].selector,e(a[c].parentElement));return 0<c.filter(b).length||0<c.find(b).length}return!1}function h(){if(window.getSelection){var a=window.getSelection();if(a&&0<a.rangeCount&&0<a.toString().length){var b=a.anchorNode;if(null!=b&&null!=a.focusNode)for(;!e.contains(b,a.focusNode);)b=b.parentNode;var a=a.getRangeAt(0),c=null,d=null,p=null,n=null,h=null;
if(null!=a){var f=a.getClientRects();if(f&&0<f.length)for(var g=0;g<f.length;g++){h=f[g];if(null==d||h.top<d)d=h.top;if(null==c||h.left<c)c=h.left;if(null==p||h.left+h.width>p)p=h.left+h.width;if(null==n||h.top+h.height>n)n=h.top+h.height}h=document.createElement("div");h.appendChild(a.cloneContents());h=h.innerHTML}return{html:h,element:b,left:c,top:d,width:null!=c&&null!=p?p-c:null,height:null!=d&&null!=n?n-d:null}}}else if(document.selection&&(b=document.selection.createRange())&&b.text)return h=
b.getBoundingClientRect(),{html:b.htmlText,element:b.parentElement(),left:h.left,top:h.top,width:h.right-h.left,height:h.bottom-h.top};return null}function d(){var a=h();a&&null!=a.html&&0<a.html.length&&a.element&&l(a.element)?(f.clearTimeout(p),b=a,n.show().css({position:"absolute",left:a.left+e(f).scrollLeft()+"px",top:a.top+a.height+e(f).scrollTop()+"px"})):(f.clearTimeout(p),p=f.setTimeout(function(){b=null;c&&n&&(u=!1,n.hide())},250))}var c=!1,b=null,a=[],n,p=null,u=!1;e.event.special.quote=
{setup:function(){},add:function(b){a.push({parentElement:this,selector:b.selector});g()},remove:function(b){var c=this,d=!1;a=e.grep(a,function(a){if(d||a.parentElement!=c||a.selector!=b.selector)return!0;if(!d)return d=!0,!1});k()},teardown:function(){},defaults:{quoteText:"Quote"}};return{}},jQuery,window);q("events.rendered",function(e,f,g){var k={},l=function(h){h&&k[h]!=g&&(k[h]--,0===k[h]&&e(h).trigger(e.Event("rendered")))};e.event.special.rendered={setup:function(){k[this]=0},add:function(e){},
remove:function(e){},teardown:function(){delete k[this]},noBubble:!0};return{incrementLoading:function(e){e.get&&(e=e.get(0));e&&k[e]!=g&&k[e]++},decrementLoading:function(e){e.get?l(e.get(0)):l(e)}}},jQuery,window);q("events.resized",["lib.util"],function(e,f,g,k){var l=0;f.event.special.resized={setup:function(e){e=f("<div></div>").css({position:"absolute",width:"100px",height:"100px",overflow:"scroll",left:"-200px"});f("body").append(e);try{var d=e.get(0);l=d.offsetWidth-d.clientWidth}catch(c){l=
0}e.remove()},add:function(){function h(){s=a.width();k=a[0].scrollWidth;v=a.height();x=a[0].scrollHeight;if(Math.abs(s-p)>l||Math.abs(v-u)>l||Math.abs(k-t)>l||Math.abs(x-m)>l){var b={oldWidth:p,oldHeight:u,oldScrollWidth:t,oldScrollHeight:m,newWidth:s,newHeight:v,newScrollWidth:k,newScrollHeight:x};p=s;u=v;t=k;m=x;c.trigger("resized",b)}}function d(){g.clearTimeout(n);n=g.setTimeout(h,f.event.special.resized.defaults.throttle)}var c=f(this);if(!c.data("_resized_init")){c.data("_resized_init",!0);
var b=this===document||this===g,a=b?f(window):c,n,p=0,u=0,t=0,m=0,s,v,k,x,p=a.width(),u=a.height(),t=a.get(0).scrollWidth,m=a.get(0).scrollHeight;if(b)a.on("resize",e.requestAnimationFrameThrottle(d));else a.data("_resized_init",{intervalHandle:g.setInterval(h,f.event.special.resized.defaults.throttle)})}},teardown:function(){var e=this===document||this===g,d=e?f(window):f(this);e||((e=d.data("initDataKey"))&&e.intervalHandle&&g.clearInterval(e.intervalHandle),d.data("initDataKey",!1))}};f.event.special.resized.defaults=
{throttle:25};return{}},jQuery,window);q("events.scroll",["lib.events"],function(e,f,g){(function(){var g={};f.event.special.scrollend={setup:function(e){g=f.extend({padding:200,delay:250,initialLoadAttempts:10,initialLoadDelay:1E3},e)},add:function(l){var h=f(this);if(!h.data("_scrollend_init")){h.data("_scrollend_init",!0);var d=g.delay,c=g.padding;l&&l.data&&(l.data.delay&&(d=l.data.delay),l.data.padding&&(c=l.data.padding));var b=this===document,a=b?f(window):h,n=!1,p=-1,u=0,t=!1,m=function(){return b?
f("body").prop("scrollHeight")||a.height()+1:a.prop("scrollHeight")||a.height()+1};e.addHandler(a.get(0),"scroll",function(){n=!0},{passive:!0});setInterval(function(){if(n){var d;d=b?f(h).height()-f(h).scrollTop()-f(a).height()<=c:h.scrollTop()+h.innerHeight()+c>=h[0].scrollHeight;d?h.trigger("scrollend"):n=!1}},d);l.data&&!1===l.data.prefill||setInterval(function(){if(t){var b=a.height();b>p&&(p=b,m()<=p&&(u=0,t=!1))}else p=a.height(),m()<=p+c&&u<g.initialLoadAttempts?(u++,h.trigger("scrollend")):
t=!0},g.initialLoadDelay)}}}})();(function(){var g={};f.event.special.scrolltop={setup:function(e){g=f.extend({padding:200,delay:250},e)},add:function(){var l=f(this);if(!l.data("_scrolltop_init")){l.data("_scrolltop_init",!0);var h=this===document?f(window):l,d=!1;e.addHandler(h.get(0),"scroll",function(){d=!0},{passive:!0});setInterval(function(){d&&(l.scrollTop()<=g.padding&&l.trigger("scrolltop"),d=!1)},g.delay)}}}})();return{}},jQuery,window);q("events.systemnotifications",["module.messaging"],
function(e,f,g){return{initiate:function(){e.subscribe("socket.connected",function(){f.telligent.evolution.sockets.systemnotifications&&(f.telligent.evolution.sockets.systemnotifications.on("received",function(f){e.publish("systemnotification.raised",f)}),f.telligent.evolution.sockets.systemnotifications.on("resolved",function(f){e.publish("systemnotification.resolved",f)}))},{excludeAutoNameSpaces:!0})}}},jQuery,window);q("events.users",["module.messaging"],function(e,f,g){e.subscribe("socket.connected",
function(){if(f.telligent.evolution.sockets.users)f.telligent.evolution.sockets.users.on("deauthenticated",function(f){e.publish("user.deauthenticated",f)})},{excludeAutoNameSpaces:!0});return{}},jQuery,window);q("events.wake",["lib.backgroundTimer"],function(e,f,g,k){f.event.special.wake={setup:function(l){var h=(new Date).getTime();e.setInterval(function(){var d=(new Date).getTime();4E3<d-h&&f(g).trigger("wake");h=d},2E3)}};return{}},jQuery,window);q("lib","lib.actionSheet lib.dynamicLinks lib.messageLinks lib.scrollFix lib.sheet lib.sheetProvider lib.util lib.touchEventAdapter lib.globalConfiguration lib.storageProxy lib.lruCache lib.backgroundTimer lib.reflow lib.storageShim lib.imagePreview lib.legacyFormFilter lib.jsSupport lib.events lib.cookies lib.jQueryShim lib.keyboardActive lib.sharedObjectProxy lib.sharedObjectProxyState lib.crossTabRequest".split(" "),
function(){return{}});q("lib.actionSheet",function(e,f,g){function k(h,d){var c=e(document.createElement("li"));c.append(d);h.append(c)}function l(h,d){var c=e(document.createElement("ul"));c.addClass("action-sheet");for(var b=0;b<d.length;b++)k(c,d[b]);c.on("click","a",function(a){h.sheet.hide()});h.sheet.show(c);h.content=c}return function(e){e=e||{};e.sheet=e.sheet;return{show:function(d){d=d||{};d.links=d.links||[];l(e,d.links||[])},hide:function(){e.sheet.hide()},content:function(){return e.content}}}},
jQuery,window);q("lib.backgroundTimer",function(e,f){var g=null,k=e.self!==e.top;if(e.Worker&&e.Blob&&!k)try{var l=e.URL.createObjectURL(new Blob(["\t\t\t\tvar ids = {};\t\t\t\tonmessage = function(e) {\t\t\t\t\tvar name = e.data.name,\t\t\t\t\t\tid = e.data.id,\t\t\t\t\t\tduration = e.data.duration;\t\t\t\t\tif (name === 'st') {\t\t\t\t\t\tids[id] = setTimeout(function(){\t\t\t\t\t\t\tpostMessage(id);\t\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t\t}\t\t\t\t\t\t}, duration);\t\t\t\t\t} else if (name === 'ct') {\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\tclearTimeout(ids[id]);\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t}\t\t\t\t\t} else if (name === 'si') {\t\t\t\t\t\tids[id] = setInterval(function(){\t\t\t\t\t\t\tpostMessage(id);\t\t\t\t\t\t}, duration);\t\t\t\t\t} else if (name === 'ci') {\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\tclearInterval(ids[id]);\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t}\t\t\t\t\t}\t\t\t\t}\t\t\t"])),
h=new Worker(l),d=0,c={},g={setTimeout:function(a,b){d++;c[d]=a;h.postMessage({name:"st",id:d,duration:b});return d},clearTimeout:function(a){delete c[a];h.postMessage({name:"ct",id:a})},setInterval:function(a,b){d++;c[d]=a;h.postMessage({name:"si",id:d,duration:b});return d},clearInterval:function(a){delete c[a];h.postMessage({name:"ci",id:a})}};h.onmessage=function(a){if(a.data&&c[a.data])c[a.data]()}}catch(b){}g||(g={setTimeout:function(a,b){return e.setTimeout(a,b)},clearTimeout:function(a){return e.clearTimeout(a)},
setInterval:function(a,b){return e.setInterval(a,b)},clearInterval:function(a){return e.clearInterval(a)}});return g},window);q("lib.cookies",["module.url","lib.globalConfiguration"],function(e,f,g,k,l){function h(b){document.cookie=e.encode(b)+"=;path="+f.baseUrl+";Max-Age=-999;"}var d=function(){var b=/[.*+?^${}()|[\]\\]/g;return function(a){return a.replace(b,"\\$&")}}(),c={set:function(b,a){null===a||a===l?h(b):document.cookie="https:"==k.location.protocol?e.encode(b)+"="+e.encode(a)+";path="+
f.baseUrl+";SameSite="+f.cookieSameSiteSetting+";secure":e.encode(b)+"="+e.encode(a)+";path="+f.baseUrl+";SameSite="+f.cookieSameSiteSetting},get:function(b){return(b=document.cookie.match("(^|;)\\s*"+d(b)+"\\s*=\\s*([^;]+)"))?b.pop():null},remove:function(b){h(b)}};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});return g.telligent.evolution.cookies=c},jQuery,window);q("lib.crossTabRequest",["lib.crossWindowBus","lib.backgroundTimer"],function(e,f,g,k,l){var h={},d=
{timeout:50};return function(c){g.extend({},h,c||{});var b={},a={},n=new e({key:"__ctr",includeLocal:!1,receive:function(c,d,e){"req"==c?(c=null,b[d.name]&&(c=b[d.name](d.data)),n.send(e.source,"resp",{name:d.name,response:c})):"resp"==c&&(a[d.name]=a[d.name]||[],a[d.name].push({source:e.source,response:d.response}))}});return{handle:function(a,c){b[a]=c},request:function(b,c,e){return g.Deferred(function(m){var h=g.extend({},d,e||{});a=a||{};delete a[b];n.broadcast("req",{name:b,data:c});f.setTimeout(function(){a[b]?
m.resolve({responses:a[b]}):m.resolve({responses:[]})},h.timeout)}).promise()}}}},jQuery,window);q("lib.crossWindowBus",["lib.backgroundTimer"],function(e,f,g,k){function l(a,b){this.key=a;if("BroadcastChannel"in g)this.channel=new BroadcastChannel(this.key),this.channel.onmessage=function(a){b(a.data)};else f(g).on("storage",function(c){if(c.originalEvent&&c.originalEvent.key===a&&c.originalEvent.newValue&&0<c.originalEvent.newValue.length)try{var d=JSON.parse(c.originalEvent.newValue);d&&b(d)}catch(e){}})}
function h(a,b,c){return{source:b.source,local:b.source===a.id,broadcast:c}}function d(a,b,c,d){var f={name:c,data:d,source:a.id,target:b,salt:Math.floor(1E5*Math.random())};a.transport.send(f);a.includeLocal&&(a.receive&&b===a.id)&&e.setTimeout(function(){a.receive(c,d,h(a,f,!1))},0)}function c(a,b,c){var d={name:b,data:c,source:a.id,salt:Math.floor(1E5*Math.random())};a.transport.send(d);a.includeLocal&&a.receive&&e.setTimeout(function(){a.receive(b,c,h(a,d,!0))},0)}var b={key:"__cwb",receive:null,
includeLocal:!1};l.prototype.send=function(a){this.channel?this.channel.postMessage(a):localStorage.setItem(this.key,JSON.stringify(a))};return function(a){var e=f.extend({},b,a||{},{id:Math.floor(1E5*Math.random())});e.transport=new l(e.key,function(a){try{a.source!=e.id&&(a.target!==k&&a.target===e.id?e.receive(a.name,a.data,h(e,a,!1)):a.target===k&&e.receive(a.name,a.data,h(e,a,!0)))}catch(b){}});return{id:function(){return e.id},broadcast:function(a,b){c(e,a,b)},send:function(a,b,c){d(e,a,b,c)}}}},
jQuery,window);q("lib.devicePixelRatio",["lib.cookies"],function(e,f,g,k){function l(){return Math.round(window.devicePixelRatio||1)||1}return{setCookie:function(h){e.set(".te.dpr",l())},getRatio:l}},jQuery,window);q("lib.dynamicLinks",["lib.scrollFix","lib.actionSheet"],function(e,f,g,k,l){function h(a){var b=g.extend({},m);"vertical"!=a.direction&&(b.display="flex",b["align-items"]="center");return b}function d(a){var b=a.css("white-space"),c;if("nowrap"===b)c=a.outerWidth(!0);else{var d=a.get(0)&&
!!a.get(0).style["white-space"];a.css("white-space","nowrap");c=a.outerWidth(!0);d?a.css("white-space",b):a.css("white-space","")}return c}function c(a){return a.scrollWidth>a.clientWidth}function b(a){var b,d,m;b=h(a);if("vertical"==a.direction){if(a.listWrapper||(a.listWrapper=g(document.createElement("div")).addClass("container").appendTo(a.parent)),!a.list){a.list=g(document.createElement("ul")).appendTo(a.listWrapper).css(b);for(b=0;b<a.links.length;b++)(d=a.links[b])&&d.element&&(m=g(document.createElement("li")).append(d.element),
d.listItem=m,a.list.append(m),d.isOverflowed=!1);a.moreLink!=l&&(m=g(document.createElement("li")).append(a.moreLink.element),a.moreLink.listItem=m,a.list.append(m))}}else{a.parent.css({overflow:"hidden"});a.listWrapper||(a.listWrapper=g(document.createElement("div")).css(t).addClass("container").appendTo(a.parent));if(!a.list){a.list=g(document.createElement("ul")).appendTo(a.listWrapper).css(b);for(b=0;b<a.links.length;b++)(d=a.links[b])&&d.element&&(m=g('<li class="'+d.className+'"></li>').append(d.element),
d.listItem=m,a.list.append(m),d.isOverflowed=!1);a.moreLink!=l&&(m=g(document.createElement("li")).append(a.moreLink.element),a.moreLink.listItem=m,a.list.append(m))}a.list.hide();a.parentWidth=a.listWrapper.width();a.list.show();if(c(a.listWrapper.get(0)))a.listWrapper.on("pan swipe pointerend",function(a){"left"!=a.direction&&"right"!=a.direction||a.stopPropagation()});e.preventBounce(a.listWrapper)}}function a(a){var b,c,e,m,p;a.lastAdditionalLinkCount===l&&(a.lastAdditionalLinkCount=0);a.additionalLinks=
[];a.accumulatedWidth=0;a.preScrollTo=0;if("vertical"==a.direction){for(c=0;c<a.links.length;c++)e=a.links[c],c>a.maxLinks-1?(a.additionalLinks.push(e),e.listItem.hide(),e.isOverflowed=!0):(e.isOverflowed&&(e.listItem.append(e.element).show(),e.isOverflowed=!1),e.listItem.addClass(e.className).appendTo(a.list));a.moreLink&&a.list.append(a.moreLink.listItem.append(a.moreLink.element).show())}else{for(c=a.moreLinkWidth=0;c<a.links.length;c++){e=a.links[c];if(!e.element)return;e.isOverflowed&&(e.listItem.append(e.element).show(),
e.isOverflowed=!1);e.listItem.appendTo(a.list)}a.moreLink&&(a.list.append(a.moreLink.listItem.append(a.moreLink.element).show()),a.moreLinkWidth=d(a.moreLink.element));for(p=c=0;c<a.links.length;c++)e=a.links[c],b=e.listItem,m=d(e.element),e.selected&&(a.preScrollTo=a.accumulatedWidth),a.accumulatedWidth+m>a.parentWidth&&p+1<=a.minLinks?a.accumulatedWidth+=m:0<a.additionalLinks.length||(a.accumulatedWidth+m+a.moreLinkWidth>a.parentWidth||p+1>a.maxLinks)&&p+1>a.minLinks?(e.element.detach(),e.isOverflowed=
!0,b.hide(),a.additionalLinks.push(e)):a.accumulatedWidth+=m,p++}}function n(a){if("vertical"==a.direction){if(0<a.additionalLinks.length&&a.moreLink&&a.onShowMore)a.moreLink.element.off(u).on("click"+u,function(b){a.onShowMore(a.additionalLinks,a.cancelLink);return!1});else a.moreLink&&(a.moreLink.element.detach(),a.moreLink.listItem.hide());a.list.css({visibility:"visible"})}else{0<a.additionalLinks.length&&a.moreLink&&a.onShowMore?(a.moreLink.listItem.addClass(a.moreLink.className),a.accumulatedWidth+=
a.moreLinkWidth,a.moreLink.element.off(u).on("click"+u,function(b){a.onShowMore(a.additionalLinks,a.cancelLink);return!1})):a.moreLink&&(a.moreLink.element.detach(),a.moreLink.listItem.hide());a.list.css({width:a.accumulatedWidth>a.parentWidth?a.accumulatedWidth:a.parentWidth});g(a.listWrapper).get(0).scrollLeft=a.preScrollTo-a.preScrollOffset;var b=a.list.height();0!=b&&(a.parent.css({height:b}),a.listWrapper.css({height:b+20}));a.listWrapper.css({visibility:"visible"})}if(a.lastAdditionalLinkCount!=
a.additionalLinks.length&&(a.lastAdditionalLinkCount=a.additionalLinks.length,a.onLinksChange))a.onLinksChange({visible:a.links.length-a.additionalLinks.length,hidden:a.additionalLinks.length})}function p(c){g.telligent.evolution.ui.suppress(function(){b(c)});a(c);g.telligent.evolution.ui.suppress(function(){n(c)})}var u="._dynamicLinks",t={overflow:"hidden","overflow-x":"auto"},m={visible:"hidden","list-style":"none",padding:"0px",margin:"0px",overflow:"hidden"},s=function(a){var b=g.extend({},s.defaults,
a||{});return{render:function(){p(b)},addLink:function(a,c){a.element=g(a.element);c!=l?b.links.splice(c,0,a):b.links[b.links.length]=a;b.list&&(a&&a.element)&&(listItem=g('<li class="'+a.className+'"></li>').append(a.element),a.listItem=listItem,b.list.append(listItem),a.isOverflowed=!1);p(b);return a},removeLink:function(a){"string"===typeof a||a instanceof String?b.links=g.grep(b.links,function(b){return g(b.element).is(a)?(b.listItem?b.listItem.remove():b.element&&b.element.remove(),!1):!0}):
(a=g(a).get(0),b.links=g.grep(b.links,function(b){if(b.element.get(0)!==a)return!0;b.listItem?b.listItem.remove():b.element&&b.element.remove();return!1}));p(b)},links:function(a){return a?b.additionalLinks:b.links},cancelLink:function(){return b.cancelLink},moreLink:function(){return b.moreLink},resize:function(){p(b)},isVisible:function(a){a=g(a).get(0);for(var c=0;c<(b.additionalLinks||[]).length;c++)if(b.additionalLinks[c].element.get(0)===a)return!1;return!0},update:function(a,c){var d=null,
e=0;if("string"===typeof a||a instanceof String)for(var m=0;m<b.links.length;m++){if(b.links[m].element.is(a)){e=m;d=b.links[m];break}}else for(a=g(a).get(0),m=0;m<b.links.length;m++)if(b.links[m].element.get(0)===a){e=m;d=b.links[m];break}d&&(null!==c.className&&(d.className=c.className),null!==c.selected&&(d.selected=c.selected),null!==c.index&&b.links.splice(c.index,0,b.links.splice(e,1)[0]),d&&d.element&&(d.element.detach(),d.listItem.remove(),listItem=g('<li class="'+d.className+'"></li>').append(d.element),
d.listItem=listItem,b.list.append(listItem),d.isOverflowed=!1),p(b))},reconfigure:function(a){var c=!1;a.maxLinks!==l&&(b.maxLinks=a.maxLinks,c=!0);a.minLinks!==l&&(b.minLinks=a.minLinks,c=!0);a.direction!==l&&(b.direction=a.direction,c=!0);c&&p(b)}}};s.defaults={preScrollOffset:10,minLinks:0,maxLinks:50,direction:"vertical",parent:null,links:[],moreLink:null,cancelLink:null,onShowMore:function(a,b){}};return s},jQuery,window);q("lib.events",function(e,f,g){function k(b){var a=!1;return a=b===g||
null===b?!1:"boolean"===typeof b?b:!h.capture&&b.capture?b.capture:h.passive?b:!1}function l(b,a,c){delete b.byId[a.id];b.byEventName[a.fullEventName]=(b.byEventName[a.fullEventName]||[]).filter(c);0===b.byEventName[a.fullEventName].length&&delete b.byEventName[a.fullEventName];b.byEventName[a.eventName]=(b.byEventName[a.eventName]||[]).filter(c);0===b.byEventName[a.eventName].length&&delete b.byEventName[a.eventName];a.nameSpace&&(b.byNameSpace[a.nameSpace]=(b.byEventName[a.nameSpace]||[]).filter(c),
0===b.byNameSpace[a.nameSpace].length&&delete b.byNameSpace[a.nameSpace])}var h={capture:!1,passive:!1,once:!1};try{var d={};Object.defineProperty(d,"passive",{get:function(){h.passive=!0}});Object.defineProperty(d,"capture",{get:function(){h.capture=!0}});Object.defineProperty(d,"once",{get:function(){h.once=!0}});f.addEventListener("testOptions",null,d);f.removeEventListener("testOptions",null,d)}catch(c){}return{addHandler:function(b,a,c,d){d=k(d===g?null:d);var h=a.split(".",2),f=h[0];a={callback:c,
nameSpace:1<h.length?h[1]:null,eventName:f,fullEventName:a,options:d,id:0};h=e(b).data("_event_handlers")||{byEventName:{},byNameSpace:{},byId:{},count:0};h.count++;a.id=h.count;h.byEventName[a.eventName]=h.byEventName[a.eventName]||[];h.byEventName[a.eventName].push(a);h.byEventName[a.fullEventName]=h.byEventName[a.fullEventName]||[];h.byEventName[a.fullEventName].push(a);h.byId[a.id]=a;a.nameSpace&&(h.byNameSpace[a.nameSpace]=h.byNameSpace[a.nameSpace]||[],h.byNameSpace[a.nameSpace].push(a));e(b).data("_event_handlers",
h);b.addEventListener?b.addEventListener(f,c,d):b.attachEvent&&b.attachEvent("on"+f,c);return a.id},removeHandler:function(b,a,c,d){function h(a){return a.callback===c}function f(a){return a.callback!==c}if(c){if(b.removeEventListener(a,c,k(d===g?null:d)),d=e(b).data("_event_handlers")){var m=null;(a=(d.byEventName[a]||[]).filter(h))&&1==a.length&&(m=a[0]);m&&(l(d,m,f),e(b).data("_event_handlers",d))}}else if(Number.isInteger(a)){if(d=e(b).data("_event_handlers"))if(m=d.byId[a])b.removeEventListener(m.eventName,
m.callback,m.options),l(d,m,f),e(b).data("_event_handlers",d)}else if(a&&""!=a){d=(a||"").split(".",2);var m=d[0],s=1<d.length?d[1]:null;if(d=e(b).data("_event_handlers")){var v=null;null!==s&&"."+s!==a?v=d.byEventName[a]:null!==s?v=d.byNameSpace[s]:null!==m&&(v=d.byEventName[m]);if(v){a=[];for(s=0;s<v.length;s++)m=v[s],b.removeEventListener(m.eventName,m.callback,m.options),a.push(m);for(s=0;s<a.length;s++)m=a[s],l(d,m,f);e(b).data("_event_handlers",d)}}}else if(d=e(b).data("_event_handlers")){for(v in d.byId)d.byId.hasOwnProperty(v)&&
(m=d.byId[v],b.removeEventListener(m.eventName,m.callback,m.options));e(b).removeData("_event_handlers")}}}},jQuery,window);q("lib.globalConfiguration",function(){return{baseUrl:"",authorizationCookieName:"AuthorizationCookie",restUiContext:"",slidingAuthentication:!1,authenticationExpiration:null,authenticationIssue:null,redirectedLogoutUrl:null,loginReturnUrl:null,isLogout:!1,defaultErrorMessage:"An error occured while communicating with the server.",accessingUserId:0,accessingUserIsSystemAccount:!0,
accessingUserIsAuthenticated:!1,dateMinuteInFutureFormat:"in a few seconds",dateMinutesInFutureFormat:"in {0} minutes",dateHourInFutureFormat:"in over an hour",dateHoursInFutureFormat:"in {0} hours",dateDayInFutureFormat:"in {0} day",dateDaysInFutureFormat:"in {0} days",dateMonthInFutureFormat:"in {0} month",dateMonthsInFutureFormat:"in {0} months",dateYearInFutureFormat:"in over {0} year",dateYearsInFutureFormat:"in over {0} years",dateNowAgoFormat:"now",dateMinuteAgoFormat:"a few seconds ago",dateMinutesAgoFormat:"{0} minutes ago",
dateHourAgoFormat:"{0} hour ago",dateHoursAgoFormat:"{0} hours ago",dateDayAgoFormat:"{0} day ago",dateDaysAgoFormat:"{0} days ago",dateMonthAgoFormat:"{0} month ago",dateMonthsAgoFormat:"{0} months ago",dateYearAgoFormat:"over {0} year ago",dateYearsAgoFormat:"over {0} years ago",reflowBreakpoint:670,previewZoomIn:"Zoom In",previewZoomOut:"Zoom Out",previewClose:"Close",scheduledFileStatusUrl:"",badgeablePanelCountUrl:"",enableGlobalForm:!1,collapseExpandedItem:"Collapse",nonDurableProgressTip:"Progress will cancel if you leave.",
nonDurableProgressLabel:"Please wait\u2026",maxUploadFileSize:"0"}});q("lib.imagePreview",["lib.globalConfiguration"],function(e,f,g,k){function l(a,b){if(0!==a.indexOf(f.telligent.evolution.site.getBaseUrl())&&0!==a.indexOf(f.telligent.evolution.site.getBaseUrl(!0)))return null;var c;c=b?C.exec(a):G.exec(a);return null!=c?c[1]:null}function h(){if(u.height()<p||u.width()<n)return d(x),!0;y.css({"max-width":"100%","max-height":"100%"});return!1}function d(a){a?(x=!0,y.css({"max-width":"none","max-height":"none",
cursor:"move",position:"absolute",left:"0px",top:"0px","z-index":"1"}).addClass("zoomed"),t.hide(),m.show()):(x=!1,y.css({"max-width":"100%","max-height":"100%",cursor:"auto",position:""}).removeClass("zoomed"),t.show(),m.hide())}function c(){f(document).off(".imageviewer");u.css("opacity","0");var a=u;window.setTimeout(function(){a.remove()},100);f("body").css("overflow","")}function b(a){var b,c=a.parents("a").first();if(0<c.length&&c.data("imagepreviewurl")){if(b=l(c.data("imagepreviewurl")||"",
!1),!b)return!1}else if(b=l(a.attr("src")||"",!0),!b||a.hasClass("ui-ignoreimagepreview")||0<c.length&&0>(c.attr("href")||"").indexOf(b))return!1;return b}function a(a){f(".viewer img, .content-fragment-content .content .content img, .user-defined-markup img, .post-attachment-viewer img",a).each(function(){var a=f(this);a.data("_cursor_applied")||(a.data("_cursor_applied",!0),b(a)&&a.css({cursor:"zoom-in"}))})}var n,p,u,t,m,s,v,y,x=!1,r=!1,w,z,A,B,C=/\/resized-image(?:\.ashx)?\/__size\/[0-9]+x[0-9]+\/(.+)/i,
G=/\/cfs\-file(?:\.ashx)?\/(.+)/i,I=e.previewZoomIn,J=e.previewZoomOut,F=e.previewClose;return{register:function(){I=e.previewZoomIn;J=e.previewZoomOut;F=e.previewClose;a(f("body"));var g;f("body").on("mutate",function(b){clearTimeout(g);g=setTimeout(function(){a(f("body"))},500)});f("body").on("click",".viewer img, .content-fragment-content .content .content img, .user-defined-markup img, .post-attachment-viewer img",function(a){a=f(a.target);if(a=b(a)){p=n=0;x=!1;u=f('<div class="image-viewer"></div>').css("opacity",
"0").on("click",function(){c();return!1});t=f('<a href="#" class="zoom-in"></a>').html(I).hide().on("click",function(){d(!0);return!1});m=f('<a href="#" class="zoom-out"></a>').html(J).hide().on("click",function(){d(!1);return!1});s=f('<a href="#" class="close"></a>').html(F).on("click",function(){c();return!1});var e=f('<div class="image-viewer-inner"></div>');v=f('<span class="ui-loading"></span>');y=f('<img src="'+f.telligent.evolution.site.getBaseUrl()+"cfs-file/"+a+'" />').hide().css({"-webkit-touch-callout":"none",
"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",opacity:"0","max-width":"none","max-height":"none"}).on("load",function(){v.hide().remove();y.show();n=y.outerWidth(!0);p=y.outerHeight(!0);h();y.css("opacity","1")}).on("click",function(a){a.stopPropagation();a.preventDefault()}).on("doubletap",function(a){h()&&(x=!x,d(x));return!1}).on("mousemove pan",function(a){r&&(u.scrollTop(A+(w-a.pageY)),u.scrollLeft(B+(z-a.pageX)))}).on("mousedown panstart",
function(a){x&&(r=!0,A=u.scrollTop(),B=u.scrollLeft(),w=a.pageY,z=a.pageX,a.preventDefault())}).on("mouseup panend",function(){r=!1});f("body").css("overflow","hidden");f(document).off(".imageviewer").on("pointerstart.imageviewer",".image-viewer",function(a){a=this.scrollTop;var b=this.scrollHeight,c=a+this.offsetHeight;0===a?this.scrollTop=1:c===b&&(this.scrollTop=a-1)}).on("pointermove.imageviewer",{passive:!1},function(a){for(var b=a.target,c=!1;null!==b;){if(b.classList&&b.classList.contains("image-viewer")){c=
!0;break}b=b.parentNode}c||a.preventDefault()});e.append(v).append(y);u.append(t).append(m).append(s).append(e);f("body").append(u);u.css("opacity","1");return!1}})}}},jQuery,window);q("lib.jQueryShim",function(e,f,g){return{shim:function(){}}},jQuery,window);q("lib.jsSupport",["lib.cookies"],function(e,f,g,k){return{setCookie:function(f){e.set(".te.js",1)}}},jQuery,window);q("lib.keyboardActive",function(e,f,g){var k=!1,l=function(){k?e("body").addClass("keyboard-active"):e("body").removeClass("keyboard-active")};
return{init:function(){e(f.document).on("keydown",function(e){k||(k=!0,l())}).on("mousedown mouseup mousemove",function(e){k&&(k=!1,l())})}}},jQuery,window);q("lib.legacyFormFilter",["lib.util","lib.globalConfiguration"],function(e,f,g,k,l){var h=!1,d=/\<form(\s|>)/i,c=function(b){try{h=!0;if("string"==typeof b){if(!d.test(b))return h=!1,b;var a=document.createElement("div");a.innerHTML=b;b=a.childNodes}var c=g(b),e=c.find("form"),a=!1;0<e.length&&(e.children().unwrap(),a=!0);if(0<c.filter("form").length){var a=
!0,f=[];c.each(function(){var a=g(this);a.is("form")?a.children().each(function(){f.push(this)}):f.push(this)});c=g(f)}h=!1;return a?c:b}catch(l){return h=!1,b}};return{init:function(){f.enableGlobalForm&&g.each("html append prepend after before replaceWith".split(" "),function(b,a){g.fn[a]=e.wrap(g.fn[a],{filterArguments:function(a){var b=arguments;!h&&0<b.length&&(b[0]=c(b[0]));return b}})})}}},jQuery,window);q("lib.lruCache",function(e,f,g){var k={size:10,load:function(){},persist:function(e){}};
return function(f){function h(){var b=c.load();b||(b={},c.persist(b));return b}var d,c=e.extend({},k,f||{load:function(){return d},persist:function(b){d=b}});return{size:function(){return c.size},get:function(b){var a=h();return a[b]!==g?(a[b].lastAccess=(new Date).getTime(),c.persist(a),a[b].value):null},set:function(b,a){var d=h();if(d[b]!==g)d[b].lastAccess=(new Date).getTime(),d[b].value=a;else{var e;if(Object.keys)e=Object.keys(d);else{e=[];for(var f in d)d.hasOwnProperty(f)&&e.push(f)}if(e.length>=
c.size){e=null;for(var l in d)null==e?e=l:d[l].lastAccess<d[e].lastAccess&&(e=l);null!==e&&delete d[e]}d[b]={lastAccess:(new Date).getTime(),value:a}}c.persist(d)},del:function(b){var a=h();delete a[b];c.persist(a)}}}},jQuery,window);q("lib.messageLinks",function(e,f,g){return function(f){f=f||{};var g=e(f.parent);return{handle:function(h){g.on(h||"click","a[data-messagename], [data-href]",function(d){null!=e(this).data("messagename")&&0<e(this).data("messagename").length?(d.preventDefault(),d.stopPropagation(),
d.stopImmediatePropagation(),e.telligent.evolution.messaging.publish(e(this).data("messagename"),{target:this}),0<e(this).closest(".links-popup-panel").length&&e.fn.uilinks.hide()):0<e(this).data("href").length&&("a"!==d.target.tagName.toLowerCase()&&0==e(d.target).parents("a").length)&&(d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),location.href=e(this).data("href"))})}}}},jQuery,window);q("lib.reflow",["module.messaging","lib.cookies"],function(e,f,g,k,l){function h(a){var b=
a.singleColumnContainers.first().is(":visible"),d=g(k).width();b&&d>a.minWidth?c(a,"originalRegion",function(a,b){return a.originalOrder-b.originalOrder},function(){a.containers.show();a.singleColumnContainers.hide()}):!b&&d<=a.minWidth&&c(a,"singleColumnRegion",function(a,b){return a.responsiveOrder==b.responsiveOrder?a.regionOrder==b.regionOrder?a.originalOrder-b.originalOrder:a.regionOrder-b.regionOrder:a.responsiveOrder-b.responsiveOrder},function(){a.singleColumnContainers.show();a.containers.hide()})}
function d(a){if(!a.fragments){a.fragments=[];for(var b=a.singleColumnContainers.first().is(":visible")?a.singleColumnContainers:a.containers,c=0;c<b.length;c++)g(".content-fragment",b[c]).each(function(){var b=(g(this).data("reflow")||"").split(",");5===b.length&&a.fragments.push({fragment:g(this),originalRegion:g("#"+b[0]+" .layout-region-inner").first(),singleColumnRegion:g("#"+b[1]),responsiveOrder:parseInt(b[2],10),regionOrder:parseInt(b[3],10),originalOrder:parseInt(b[4],10)})})}}function c(a,
b,c,h){d(a);if(!a.reflowing){e.publish("reflow.reflowstart",{target:"originalRegion"==b?a.singleColumnContainers:a.containers});a.reflowing=!0;a.fragments.sort(c);for(c=0;c<a.fragments.length;c++)a.fragments[c].fragment.appendTo(a.fragments[c][b]);h();a.reflowing=!1;e.publish("reflow.reflowend",{target:"originalRegion"==b?a.containers:a.singleColumnContainers})}}function b(){f.set(".te.w",g(k).width())}return{monitor:function(a){var c=[];a=g(".header-fragments.evolution-reflow-container:not(.single-column)");
0<a.length&&c.push({containers:a,singleColumnContainers:g(".header-fragments.evolution-reflow-container.single-column"),minWidth:parseInt(a.data("reflow-width"),10)});var d=g(".content-fragment-page.evolution-reflow-container:not(.single-column)");0<a.length&&c.push({containers:d,singleColumnContainers:g(".content-fragment-page.evolution-reflow-container.single-column"),minWidth:parseInt(d.data("reflow-width"),10)});d=g(".footer-fragments.evolution-reflow-container:not(.single-column)");0<a.length&&
c.push({containers:d,singleColumnContainers:g(".footer-fragments.evolution-reflow-container.single-column"),minWidth:parseInt(d.data("reflow-width"),10)});b();0<c.length&&(g.each(c,function(a,b){h(b)}),g(k).on("resized",function(){b();g.each(c,function(a,b){h(b)})}))}}},jQuery,window);q("lib.scrollFix",function(e,f,g){function k(e){var h,d=e.get(0);e.on("pointerstart",function(c){h=d.scrollTop;0>=h&&(d.scrollTop=1);h+d.offsetHeight>=d.scrollHeight&&(d.scrollTop=d.scrollHeight-d.offsetHeight-1);originalScrollLeft=
d.scrollLeft;0>=originalScrollLeft&&(d.scrollLeft=1);originalScrollLeft+d.offsetWidth>=d.scrollWidth&&(d.scrollLeft=d.scrollWidth-d.offsetWidth-1)})}return{preventBounce:function(f){f=f||e("body").children().first();k(f)},fix:function(e){e.on("touchmove.scrollfix mousemove.scrollfix mspointermove.scrollfix",function(e){e.originalEvent.preventDefault()})},unfix:function(e){e.off(".scrollfix")}}},jQuery,window);q("lib.sharedObjectProxy",["lib.crossWindowBus","lib.sharedObjectProxyState","lib.crossTabRequest",
"lib.backgroundTimer"],function(e,f,g,k,l,h,d){function c(c){k.setInterval(function(){switch(c.mode){case m.initial:case m.worker:c.beatsWithoutCoordinator++;c.beatsWithoutCoordinator>c.maxBeatsWithoutCoordinator&&(a(c),c.coordinatorId=null,b(c));break;case m.coordinator:c.crossWindowBus.broadcast(s.coordinating,{});break;case m.volunteer:c.beatsAsVolunteer++,c.beatsAsVolunteer>c.maxBeatsAsVolunteer&&n(c)}},h.__shared_object_proxy_interval?h.__shared_object_proxy_interval:c.heartbeat)}function b(a){null!==
a.objectInstance&&(a.destroy(a.objectInstance),a.objectInstance=null)}function a(a){a.mode=m.volunteer;a.beatsAsVolunteer=0;a.coordinatorId=null;b(a);a.crossWindowBus.broadcast(s.volunteer,{})}function n(a){a.mode=m.coordinator;a.beatsAsVolunteer=0;a.coordinatorId=a.id;a.objectInstance=a.construct();a.crossWindowBus.broadcast(s.coordinating,{});u(a)}function p(a){a.mode=m.worker;b(a);a.beatsAsVolunteer=0;u(a)}function u(a){if(a.delayedMessageQueue)for(var b=0;b<a.delayedMessageQueue.length;b++)t(a,
a.delayedMessageQueue[b].message,a.delayedMessageQueue[b].data)}function t(a,b,c){a.mode===m.coordinator&&null!==a.objectInstance?a.receive(a.objectInstance,b,c):a.mode!==m.initial&&null!==a.coordinatorId?a.crossWindowBus.send(a.coordinatorId,s.call,{name:b,data:c}):(a.delayedMessageQueue.push({message:b,data:c}),a.delayedMessageQueue.length>a.delayedMessageQueueMaxLength&&a.delayedMessageQueue.shift())}var m={initial:0,coordinator:1,volunteer:2,worker:3},s={coordinating:"sop:coordinating",working:"sop:working",
volunteer:"sop:volunteer",ok:"sop:ok",call:"sop:call",resign:"sop:resign",newarrival:"sop:newarrival"},v={heartbeat:1E3,key:"",preexisting:function(a){},construct:function(){},destroy:function(a){},receive:function(a,b,c){}},y={mode:m.initial,id:0,beatsWithoutCoordinator:0,beatsAsVolunteer:0,coordinatorId:0,objectInstance:null,delayedMessageQueue:[],delayedMessageQueueMaxLength:25,maxBeatsAsVolunteer:2,maxBeatsWithoutCoordinator:2};return function(d){var r=l.extend({},v,d||{},y);r.crossTabRequest=
new g;r.crossWindowBus=new e({key:"__sop:"+r.key,includeLocal:!1,receive:function(c,d,e){e=e.source;switch(c){case s.coordinating:r.beatsWithoutCoordinator=0;r.mode===m.worker||r.mode===m.initial?(r.coordinatorId=e,r.mode===m.initial&&p(r)):(r.mode===m.coordinator&&r.crossWindowBus.broadcast(s.resign,{}),p(r));f.hasMultipleWindows(!0);d&&d.preExisting&&r.preexisting();r.crossWindowBus.send(e,s.working,{});break;case s.working:f.hasMultipleWindows(!0);break;case s.volunteer:r.mode!==m.coordinator&&
r.mode!==m.volunteer||r.crossWindowBus.send(e,s.ok,{});break;case s.ok:r.mode===m.volunteer&&p(r);break;case s.call:r.mode===m.coordinator&&null!==r.objectInstance&&r.receive(r.objectInstance,d.name,d.data);break;case s.resign:if(r.mode===m.worker||r.mode===m.initial)a(r),r.coordinatorId=null,b(r);break;case s.newarrival:r.mode===m.coordinator&&r.crossWindowBus.send(e,s.coordinating,{preExisting:!0})}}});r.id=r.crossWindowBus.id();c(r);l(h).on("unload",function(){r.mode!==m.worker&&r.crossWindowBus.broadcast(s.resign,
{})});r.crossWindowBus.broadcast(s.newarrival,{});r.crossTabRequest.handle("CurrentMode",function(){return r.mode});r.crossTabRequest.request("CurrentMode",{},{timeout:100}).then(function(a){for(var b=!1,c=0;c<a.responses.length;c++)a.responses[c]===m.coordinator&&(b=!0);!b&&(0<a.responses.length&&r.mode===m.initial)&&n(r)});k.setTimeout(function(){r.mode===m.initial&&n(r)},2*r.heartbeat);return{call:function(a,b){t(r,a,b)}}}},jQuery,window);q("lib.sharedObjectProxyState",["lib.backgroundTimer"],
function(e,f,g,k){var l=!1,h=null;f={hasMultipleWindows:function(d){d!==k&&(e.clearTimeout(h),l=d,h=e.setTimeout(function(){l=!1},2500));return l}};return g._sharedObjectProxyState=f},jQuery,window);q("lib.sheet",["lib.scrollFix","module.messaging"],function(e,f,g,k,l){function h(a){a.inited||(a.inited=!0,a.backDrop=g(document.createElement("div")).css({backgroundColor:a.backgroundColor,opacity:0.01,zIndex:25E3,position:"fixed",top:0,left:0,display:"none","-webkit-transform":"translate3d(0,0,0)",
"-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent),a.sheet=g(document.createElement("div")).css({zIndex:25001,position:"fixed",left:0,top:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent).addClass(a.cssClass),a.sheet.on("click","a",function(){var a=g(this);(a=a.attr("href")||a.closest("[href]").attr("href"))&&(1<a.length&&g.telligent&&g.telligent.evolution&&g.telligent.evolution.mobile)&&
g.telligent.evolution.mobile.load(a)}),n(a))}function d(a){a.windowWidth=0<window.innerWidth?window.innerWidth:screen.width;a.windowHeight=0<window.innerHeight?window.innerHeight:screen.height;a.visible?(a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight})):(a.backDrop&&a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet&&a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight}))}
function c(a,b,c){c=c||a.animationDuration;a.backDrop.evolutionTransform({opacity:a.backDrop.css("opacity")}).evolutionTransform({opacity:0.01+b*a.backgroundOpacity},{duration:c,easing:a.animationEasing});a.sheet.evolutionTransform({y:a.windowHeight-b*a.sheet.outerHeight(),x:0},{duration:c,easing:a.animationEasing});1<=b?a.onOpened&&(k.clearTimeout(a.openedTimeout),a.openedTimeout=k.setTimeout(function(){a.onOpened.apply(this);k.clearTimeout(a.openedTimeout)},c)):0>=b&&a.onClosed&&(k.clearTimeout(a.closedTimeout),
a.closedTimeout=k.setTimeout(function(){a.onClosed.apply(this);k.clearTimeout(a.closedTimeout)},c))}function b(a,b){a.visible||(g("body").css({height:"100%",overflow:"scroll"}),a.visible=!0,a.onOpening&&a.onOpening.apply(this),h(a),d(a),a.sheet.empty().append(b),a.sheet.evolutionTransform({y:a.windowHeight,x:0}),a.backDrop.get(0).style.display="block",a.sheet.get(0).style.display="block",c(a,1))}function a(a,b){a.visible&&(g("body").css({height:"100%",overflow:"visible"}),a.visible=!1,b=b||a.animationDuration,
a.onClosing&&a.onClosing.apply(this),c(a,0),k.setTimeout(function(){a.visible||(a.visible=!1,a.backDrop.get(0).style.display="none",a.sheet.get(0).style.display="none")},b))}function n(b){b.backDrop.on("tap",function(){a(b)})}return function(c){c=c||{};c.maxHeightPerent=c.maxHeightPerent||0.85;c.parent=g(c.parent);c.cssClass=c.cssClass||"sheet";c.backgroundColor=c.backgroundColor||"#333";c.backgroundOpacity=c.backgroundOpacity||0.5;c.animationDuration=c.animationDuration||250;c.animationEasing=c.animationEasing||
"cubic-bezier(0.160, 0.060, 0.450, 0.940)";c.visible=!1;g.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){k.setTimeout(function(){d(c)},300)});return{show:function(a){b(c,a)},hide:function(){a(c)}}}},jQuery,window);q("lib.sheetProvider",function(e,f,g){return{}},jQuery,window);q("lib.shortcutRegistry",function(e,f,g){function k(a){return a&&a.scope&&document.activeElement?a.scope==document.activeElement||a.scope.contains(document.activeElement):!0}function l(b,c,d){a=
"number"==typeof c.which?c.which:c.keyCode;matchingRoute=null;for(var h=0;h<b.routes.length;h++)if(b.routes[h].handler.direction===d&&b.routes[h].keyCode===a&&c.altKey===b.routes[h].altKey&&c.ctrlKey===b.routes[h].ctrlKey&&c.metaKey===b.routes[h].metaKey&&c.shiftKey===b.routes[h].shiftKey&&k(b.routes[h].handler)){matchingRoute=b.routes[h];break}return matchingRoute?(b=matchingRoute.handler.callback.apply(this,[{target:c.target,isInput:e(c.target).is("input,textarea")||c.target&&c.target.activeElement&&
e(c.target.activeElement).is("iframe"),event:c,combination:matchingRoute.combination}]),b===g?!0:b):!0}function h(a){a.inited||(a.inited=!0,a.previous=null,e(document).on("keydown.keyboardRegistrar",function(b){return l(a,b,c.down)}),e(document).on("keyup.keyboardRegistrar",function(b){return l(a,b,c.up)}))}function d(a){e(document).off("keyboardRegistrar");a.routes=[];a.handlers=[]}var c={up:1,down:2},b={LEFT:37,UP:38,RIGHT:39,DOWN:40,TAB:9,RET:13,ESC:27,COMMA:188,SLASH:191,PERIOD:190,SHIFT:16,ALT:18,
OPT:18,CTRL:17,META:91,CMD:91},a;return function(a){var f=a||{};f.routes=[];f.handlers=[];f.inited=!1;return{register:function(a,d,m){m=m||{};h(f);if(a&&d){d={description:m.description||null,callback:d,direction:c[m.direction]||c.down,namespace:m.namespace||null,scope:e(m.scope||null).get(0),routes:[]};a=Array.isArray(a)?a:[a];for(m=0;m<a.length;m++){for(var n={combination:a[m],keyCode:null,keyCharacter:null,altKey:!1,metaKey:!1,shiftKey:!1,ctrlKey:!1,handler:d},g=a[m].toUpperCase().split("+"),l=
0;l<g.length;l++){var k=e.trim(g[l]);n.keyCharacter=k;"ALT"!==k&&"OPT"!==k||1==g.length&&n.handler.direction==c.up?"META"!==k&&"CMD"!==k||1==g.length&&n.handler.direction==c.up?"CTRL"!==k||1==g.length&&n.handler.direction==c.up?"SHIFT"!==k||1==g.length&&n.handler.direction==c.up?n.keyCode=b[k]?b[k]:k.charCodeAt(0):(n.shiftKey=!0,n.keyCode=16):(n.ctrlKey=!0,n.keyCode=17):(n.metaKey=!0,n.keyCode=91):(n.altKey=!0,n.keyCode=18)}d.routes.push(n);f.routes.push(n);n.id=f.routes.length}f.handlers.push(d);
d.id=f.handlers.length;return n.id}},unregister:function(a){if(a===g)f.routes=[],f.handlers=[];else if("string"===typeof a)f.routes=f.routes.filter(function(b){if(b.handler.namespace){if("string"==typeof b.handler.namespace)return b.handler.namespace!==a;if(Array.isArray(b.handler.namespace))return!b.handler.namespace.includes(a)}else return!0}),f.handlers=f.handlers.filter(function(b){if(b.namespace){if("string"==typeof b.namespace)return b.namespace!==a;if(Array.isArray(b.namespace))return!b.namespace.includes(a)}else return!0});
else{var b=f.routes[a];b&&(f.handlers.splice(b.handler.id-1,1),f.routes.splice(a-1,1))}f.routes&&0!==f.routes.length&&a||d(f)},list:function(a){return a&&a.scoped?(f.handlers||[]).filter(function(a){return k(a)}):f.handlers},captureFocus:function(){f.focusedElement=document.activeElement},refocus:function(){if(f.focusedElement)try{e(f.focusedElement).is("iframe")?setTimeout(function(){f.focusedElement&&(e(f.focusedElement.contentWindow.document).find("body[contenteditable]").get(0).focus(),f.focusedElement=
null)},1):(f.focusedElement.focus(),f.focusedElement=null)}catch(a){}}}}},jQuery,window);q("lib.storageProxy",["lib.storageShim"],function(e,f,g){function k(e){this._contextualStore=e.isSystemAccount?g.sessionStorage:g.localStorage;this._user=e}e.shim();k.prototype.set=function(e,f){this._contextualStore&&this._contextualStore.setItem("tc:"+((this._user.isSystemAccount?"":this._user.id+":")+e),JSON.stringify(f))};k.prototype.get=function(e){if(this._contextualStore)return JSON.parse(this._contextualStore.getItem("tc:"+
((this._user.isSystemAccount?"":this._user.id+":")+e)))};k.prototype.del=function(e){this._contextualStore&&this._contextualStore.removeItem("tc:"+((this._user.isSystemAccount?"":this._user.id+":")+e))};k.prototype.empty=function(){this._contextualStore&&this._contextualStore.clear()};return k},jQuery,window);q("lib.storageShim",function(e,f,g){function k(){Storage.prototype.setItem=function(d,c){l[d]=c};Storage.prototype.getItem=function(d){d=l[d];return d===g?null:d};Storage.prototype.removeItem=
function(d){delete l[d]};Storage.prototype.clear=function(){l={}}}var l={},h=!1;return{shim:function(){if(!h){h=!0;var d;try{localStorage.setItem("_te","_te"),localStorage.removeItem("_te"),d=!0}catch(c){d=!1}d||k()}}}},jQuery,window);q("lib.touchEventAdapter",["lib.util","events.gestures","events.pointers"],function(e,f,g,k,l,h){function d(){k.fn.on=k.fn.bind=c(k.fn.on,b,!0);k.fn.trigger=c(k.fn.trigger,b,!1);k.fn.off=k.fn.unbind=c(k.fn.off,b,!1)}function c(a,b,c){return function(){var d=Array.prototype.slice.call(arguments,
0);if(c&&1===d.length&&k.isPlainObject(d[0])){var e=d[0];k.each(b,function(a,b){e[a]!=h&&(e[b]=e[a],delete e[a])});return a.call(this,e)}if("string"!=typeof d[0])return a.apply(this,d);for(var n=[],l=d[0].split(" "),x=0;x<l.length;x++)if(l[x]&&0<l[x].length){var r=l[x].split(".",2);if(2==r.length&&(r[1]==f.eventNamespace||r[1]==g.eventNamespace))return a.apply(this,d);r[0]=b[r[0]]||r[0];n.push(r.join("."))}d[0]=n.join(" ");return a.apply(this,d)}}var b={mouseenter:"taphold",mouseover:"taphold",mouseleave:"pointerend",
mouseup:"pointerend"},a="ontouchstart"in l||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints;e=/windows nt/.test(navigator.userAgent.toLowerCase());var n="MouseEvent"in l&&(!("ontouchstart"in l)||e);return{adapt:function(){return l._evolution_adapt_mouse_touch_events!==h?l._evolution_adapt_mouse_touch_events?(d(),!0):!1:a&&!n?(d(),!0):!1}}},jQuery,window);q("lib.util",function(e,f){function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var k=function(){var e=/[.*+?^${}()|[\]\\]/g;
return function(f){return f.replace(e,"\\$&")}}();return{requestAnimationFrameThrottle:function(e){if(!window.requestAnimationFrame)return e;var f;return function(){var d=arguments;f&&window.cancelAnimationFrame(f);f=window.requestAnimationFrame(function(){e.apply(void 0,d)})}},throttle:function(f,h){var d,c;return function(){var b=this,a=(new Date).getTime(),n=arguments;d&&d+(h||50)>a?(e.clearTimeout(c),c=e.setTimeout(function(){d=a;f.apply(b,n)},h||50)):(d=a,f.apply(b,n))}},debounce:function(e,
f){var d;return function(){var c=this,b=arguments;clearTimeout(d);d=setTimeout(function(){e.apply(c,b)},f||10)}},wrap:function(e,f){return function(){var d=arguments;try{f.filterArguments&&(d=f.filterArguments.apply(this,d))}catch(c){}try{f.before&&f.before.apply(this,d)}catch(b){}var a=e.apply(this,d);try{f.after&&f.after.apply(this,d)}catch(n){}try{f.filterResponse&&(a=f.filterResponse.apply(this,a))}catch(g){}return a}},guid:function(){return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()},isArray:function(e){return Array.isArray?
Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},indexOf:function(e,f,d){if(Array.prototype.indexOf)return e.indexOf(f,d);if(null==e)throw new TypeError('"this" is null or not defined');e=Object(e);var c=e.length>>>0;if(0===c)return-1;d=+d||0;Infinity===Math.abs(d)&&(d=0);if(d>=c)return-1;for(d=Math.max(0<=d?d:c-Math.abs(d),0);d<c;){if(d in e&&e[d]===f)return d;d++}return-1},isPartiallyVisible:function(f,h,d){d=d||0;if(f==document||f instanceof jQuery&&(f.get(0)==document||f.is("body"))){var c=
h instanceof jQuery?h.get(0).getBoundingClientRect():h.getBoundingClientRect();return 0<c.top-d&&c.top+d<=(e.innerHeight||document.documentElement.clientHeight)||0<c.bottom-d&&c.bottom+d<=(e.innerHeight||document.documentElement.clientHeight)}f=$(f);c=h.offset().top;h=c+h.height();var b=f.offset().top;f=b+f.height();return c+d>=b&&c-d<=f||h-d<=f&&h+d>=b},isFullyVisible:function(f,h,d){d=d||0;if(f==document||f instanceof jQuery&&(f.get(0)==document||f.is("body"))){var c=h instanceof jQuery?h.get(0).getBoundingClientRect():
h.getBoundingClientRect();return 0<c.top-d&&c.top+d<=(e.innerHeight||document.documentElement.clientHeight)&&0<c.bottom-d&&c.bottom+d<=(e.innerHeight||document.documentElement.clientHeight)}f=$(f);c=h.offset().top;h=c+h.height();var b=f.offset().top;f=b+f.height();return c+d>=b&&h-d<=f},scrollParent:function(e,f){e=$(e);var d=e.css("position"),c="absolute"===d,b=f?/(auto|scroll|hidden)/:/(auto|scroll)/,a=e.parents().filter(function(){var a=$(this);return c&&"static"===a.css("position")?!1:b.test(a.css("overflow")+
a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==d&&a.length?a:$(e[0].ownerDocument||document)},isInDom:function(e){return e?e instanceof jQuery?document.contains?document.contains(e[0]):document.body.contains(e[0]):document.contains?document.contains(e):document.body.contains(e):!1},compileReplacer:function(e){var f=[];$.each(e,function(a,b){f.push(k(a))});var d="("+f.join("|")+")",c=RegExp(d),b=RegExp(d,"g"),a=function(a){return e[a]};return function(d){return d&&c.test(d)?d.replace(b,
a):d}},escapeRegEx:k,isOverElement:function(e){if(!e)return!1;e instanceof jQuery&&0<e.length&&(e=e.get(0));var f=document.querySelectorAll(":hover");if(!f||0==f.length)return!1;f=f[f.length-1];return e==f||e.contains(f)}}},window);q("modules","module.emailDigest module.administrationToolbar module.configuration module.editableGroup module.html module.language module.media module.messaging module.navigationConfirmation module.notifications module.preview module.regex module.sockets module.template module.ui module.url module.tourtips module.rest module.administration module.administrationContextManager module.themePreview module.presence module.systemNotifications module.javaScript module.scriptRendering module.scheduledFile module.contentPeek module.authentication".split(" "),
function(){return{}});q("module.administration","module.messaging module.url lib.util lib.globalConfiguration module.administrationNavigationConfirmationRegistrar events.badgeablePanelChange".split(" "),function(e,f,g,k,l,h,d,c,b){function a(a){u(a,!0);z(a,!0);a.customPanelHashKey=S+Math.floor(1E9*Math.random());a.currentPanelOffset=0;a.rootPanelNode=a.panelNode;a.rootPanelId=a.panelId;var b=f.hashData();delete b[a.customPanelHashKey];a.rootUrl="#"+f.serializeQuery(b);b={panelId:a.panelId,name:a.panelName,
content:d.Deferred(function(b){b.resolve(a.panelNode)}).promise(),cssClass:"",header:"",root:!0,offset:0,url:a.rootUrl,renderedNode:a.panelNode};a.stack.push(b);a.rootPanelNode.data("namespace",s(a,a.currentPanelOffset));q(a,a.panelNode);if(a.onTitle&&a.panelName)a.onTitle(a.panelName);l.init()}function n(a,b){E(a);if(a.stack&&1<a.stack.length){var c=a.stack[a.currentPanelOffset].renderedNode;a.onRendering&&(a.onRendering(c),d.fn.uilinks.hide());c.evolutionTransform({left:1*c.outerWidth(!0)},{duration:a.transitionDuration,
easing:a.transitionEasing,complete:function(){c.remove()}});m(a,D.panelHidden,c,{direction:"none"});m(a,D.panelUnloaded,c);for(var e=a.currentPanelOffset-1;0<=e;e--){var f=a.stack[e].renderedNode;m(a,D.panelUnloaded,f);f.remove()}}else 1==a.stack.length&&(e=a.stack[0].renderedNode,m(a,D.panelHidden,e,{direction:"none"}),m(a,D.panelUnloaded,e),e.remove());d.fn.evolutionTip.hide();I(a);v(a);z(a);if(a.onDispose)a.onDispose()}function p(a){var d=f.hashData(),e=a.onParsePanelId(c.location.href);if(d&&
d[a.customPanelHashKey]!==b){d=parseInt(d[a.customPanelHashKey],10);if(d>a.stack.length-1)return!1;if(d<a.currentPanelOffset){for(var e=[N],m=0;m<=d;m++)e.push(s(a,m));l.suppress(e);if(!a.confirmNavigation())return l.unsuppress(),!1;l.unsuppress()}d=a.stack[d];d.url=c.location.href;x(a,d);return!0}if(a.rootPanelId==e){e=[N,s(a,0)];l.suppress(e);if(!a.confirmNavigation())return l.unsuppress(),!1;l.unsuppress();x(a,a.stack[0]);return!0}return!1}function u(a,b){a.stack=[];a.currentPanelOffset=0;a.rootPanelNode=
null;a.rootPanelId=null;a.rootUrl=null}function t(a,b){for(var c=b?[]:[N],d=a.currentPanelOffset;0<=d;d--)c.push(s(a,d));return c}function m(a,b,c,m){if(!a.sleeping&&(m=m||{},c)){switch(b){case D.panelLoaded:if(!0===d(c).data("_ap_loaded"))return;d(c).data("_ap_loaded",!0);break;case D.panelUnloaded:if(!1===d(c).data("_ap_loaded"))return;d(c).data("_ap_loaded",!1);break;case D.panelShown:if(!0===d(c).data("_ap_shown"))return;d(c).data("_ap_shown",!0);break;case D.panelHidden:if(!1===d(c).data("_ap_shown"))return;
d(c).data("_ap_shown",!1)}a=c.data("namespace")||"";e.publish(b,d.extend({},m,{panelId:a}))}}function s(a,b){var c=N;a.rootPanelId&&(c=c+":"+a.rootPanelId,b&&(c=c+":"+b));return c}function v(a){a.suppressedNameSpaces=t(a,!0);for(var b=0;b<a.suppressedNameSpaces.length;b++)e.unsubscribe(a.suppressedNameSpaces[b]),d.telligent.evolution.shortcuts.unregister(a.suppressedNameSpaces[b]),l.unRegisterByTag(a.suppressedNameSpaces[b])}function y(a){a&&(e.unsubscribe(a),d.telligent.evolution.shortcuts.unregister(a),
l.unRegisterByTag(a))}function x(a,b){for(var c=a.stack[a.currentPanelOffset].renderedNode,e=a.stack.length;e>=(b.offset||0)+2;e--)a.stack.pop();var m={direction:b.offset>a.currentPanelOffset?"forward":"backward",panel:b};if(b.renderedNode)m.renderedNode=b.renderedNode,m.scrollTop=b.scrollTop,r(a,m,c);else{if(a.onOpening)a.onOpening();var h=a.stack[a.currentPanelOffset];a.onRendering&&(c=h.renderedNode,a.onRendering(c),d.fn.uilinks.hide());e=f.hashData();h.root?delete e[a.customPanelHashKey]:e[a.customPanelHashKey]=
h.offset;var n="#"+f.serializeQuery(e);b.content.then(function(d){if(a.onOpened)a.onOpened();m.templatableContent={name:b.name,content:d,panelId:b.panelId,cssClass:b.cssClass||"",backUrl:n,backLabel:h.name};r(a,m,c)})["catch"](function(){if(a.onOpened)a.onOpened();if(a.onRendered)a.onRendered();window.location=n})}}function r(a,b,c){var e,f;a.currentPanelOffset=b.panel.offset;var h=I(a,b.panel.size);b.renderedNode?(e=b.renderedNode,f=!1):(d.telligent.evolution.ui.suppress(function(){var c=d.extend({contentClass:"",
panelId:"",rootPanelId:a.rootPanelId,namespace:s(a,b.panel.offset),description:"",name:""},b.templatableContent);e=d(a.template(c));b.templatableContent.content&&"string"!==typeof b.templatableContent.content&&e.find(a.panelContentSelector).first().append(b.templatableContent.content)}),f=!0,b.panel.renderedNode=e,a.onRendering&&(a.onRendering(e),d.fn.uilinks.hide()));if(a.onTitle&&b.panel&&b.panel.name)a.onTitle(b.panel.name);q(a,e);if(b.direction&&"forward"==b.direction){if(c!==e){d.fn.evolutionTip.hide();
a.loadingPanel=!0;m(a,D.panelHidden,c,{direction:"forward"});a.onRendering&&(a.onRendering(c),d.fn.uilinks.hide());c.evolutionTransform({left:-1*c.outerWidth(!0)},{duration:a.transitionDuration,easing:a.transitionEasing});a.container.one("rendered",function(){f&&m(a,D.panelLoaded,e)});e.css({position:"absolute",top:0,width:h||a.container.width(),height:a.container.height()}).appendTo(a.container);e.evolutionTransform({left:1*a.container.width()},{duration:0}).evolutionTransform({left:0},{duration:a.transitionDuration,
easing:a.transitionEasing,complete:function(){m(a,D.panelShown,e);w(a)}});if(a.onRendered)a.onRendered(e);d.fn.evolutionTip.hide()}}else if(c!==e){d.fn.evolutionTip.hide();a.loadingPanel=!0;m(a,D.panelHidden,c,{direction:"backward"});m(a,D.panelUnloaded,c);a.onRendering&&(a.onRendering(c),d.fn.uilinks.hide());c.evolutionTransform({left:1*(h||c.outerWidth(!0))},{duration:a.transitionDuration,easing:a.transitionEasing});e.css({position:"absolute",top:0,width:h||a.container.width(),height:a.container.height()});
f&&m(a,D.panelLoaded,e);if(a.onRendered)a.onRendered(e);e.evolutionTransform({left:-1*a.container.width()},{duration:0}).evolutionTransform({left:0},{duration:a.transitionDuration,easing:a.transitionEasing,complete:function(){m(a,D.panelShown,e);w(a)}});d.fn.evolutionTip.hide()}b.scrollTop&&(e.find(a.panelContentSelector).first().get(0).scrollTop=b.scrollTop);z(a)}function w(a){a.loadingPanel=!1;if(a.onAnimated)a.onAnimated();if(a.delayedOpen){var b=a.delayedOpen;delete a.delayedOpen;setTimeout(function(){b()},
10)}}function z(a,c){var e=a.transitionDuration;clearTimeout(a.panelCleanupTimeout);a.panelCleanupTimeout=setTimeout(function(){var e=null;a.ignoreOnDispose&&(e=a.ignoreOnDispose());(c?a.container.children('[data-rootpanelid!="'+a.rootPanelId+'"][data-panelid="'+a.rootPanelId+'"]'):a.container.children('[data-rootpanelid="'+a.rootPanelId+'"]')).each(function(){var c=d(this);if(!(c.data("rootpanelid")===b||c&&e&&1==c.length&&1==e.length&&c.get(0)===e.get(0))){var m=c.data("panelid");if(m&&0<m.length){var f=
d.grep(a.stack,function(a){return a.panelId&&a.panelId==m});f&&0!=f.length||(y(c.data("namespace")),c.remove())}}})},e)}function A(a){var b=a.stack[a.currentPanelOffset];b.scrollTop=b.renderedNode.find(a.panelContentSelector).first().get(0).scrollTop}function B(a,b){var c=function(){var c=d.extend({panelId:g.guid(),offset:a.stack.length,name:"",content:"",cssClass:"",header:""},b);A(a);if(!c.content.done){var m=c.content;c.content=d.Deferred(function(a){a.resolve(m)}).promise()}if(!c.header.done){var h=
c.header;c.header=d.Deferred(function(a){a.resolve(h)}).promise()}a.stack.push(c);var n=s(a,a.stack.length-1),p=[N,n];c.loaded&&e.subscribe(D.panelLoaded,p,function(b){a.sleeping||b.panelId==n&&c.loaded()},{excludeAutoNameSpaces:!0});c.unloaded&&e.subscribe(D.panelUnloaded,p,function(b){a.sleeping||b.panelId==n&&c.unloaded()},{excludeAutoNameSpaces:!0});c.shown&&e.subscribe(D.panelShown,p,function(b){a.sleeping||b.panelId==n&&c.shown()},{excludeAutoNameSpaces:!0});c.hidden&&e.subscribe(D.panelHidden,
p,function(b){a.sleeping||b.panelId==n&&c.hidden(b)},{excludeAutoNameSpaces:!0});c.size&&e.subscribe(D.panelLoaded,p,function(b){a.sleeping||b.panelId==n&&G(a,c.size)},{excludeAutoNameSpaces:!0});if(c.header)var r=e.subscribe(D.panelLoaded,p,function(b){a.sleeping||b.panelId!=n||(setTimeout(function(){e.unsubscribe(r)},a.transitionDuration/2),c.header.then(function(b){if(b){var c=a.stack[a.currentPanelOffset].renderedNode;c&&(c.find(a.panelHeaderContentSelector).empty().append(b),F(a,c))}})["catch"](function(){if(a.onOpened)a.onOpened();
if(a.onRendered)a.onRendered();C(a)}))},{excludeAutoNameSpaces:!0});p={};p[a.customPanelHashKey]=a.stack.length-1;f.hashData(p)};a.loadingPanel?a.delayedOpen=c:c()}function C(a,b){if(b&&b.all&&a.onCloseAll)a.onCloseAll();else if(0<a.currentPanelOffset){var c=a.stack[a.currentPanelOffset-1];c&&c.url&&(window.location=c.url)}else if(a.onCloseAll)a.onCloseAll()}function G(a,b,c){if(a){var d=a.stack[a.currentPanelOffset];if(d)return d.size=b,I(a,d.size,c)}}function I(a,b,c){if(a.onResize){b=a.onResize(b||
"normal");a=a.stack[a.currentPanelOffset];if(!a)return b;a=a.renderedNode;if(!a)return b;a.width(b);return b}return null}function J(a,c,d){var m={"shell.closed":D.shellClosed,"shell.navigation.refreshing":D.shellNavigationRefreshing,"shell.navigation.refreshed":D.shellNavigationRefreshed,"panel.unloaded":D.panelUnloaded,"panel.loaded":D.panelLoaded,"panel.shown":D.panelShown,"panel.hidden":D.panelHidden};if(m[c]!==b&&d!==b){var f=s(a,a.currentPanelOffset);e.subscribe(m[c],t(a),function(b){a.sleeping||
(b.panelId?b.panelId===f&&d.call(R(a).get(0),b):d.call(R(a).get(0),b))},{excludeAutoNameSpaces:!0})}}function F(a,b){var c=b.find(a.panelHeaderSelector).outerHeight(!0);b.find(a.panelContentSelector).first().css({top:c})}function O(a,b){if(a){var c=a.stack[a.currentPanelOffset].renderedNode;if(c&&b&&b.load){var e=b.load;b.load=function(b){a.stack[a.currentPanelOffset].scrollablePageIndex=b;return e(b).then(function(){return!0})};var m=c.find(a.panelContentSelector).first();b.target||(c=m.find("ul.content-list:visible").filter(function(){return"hidden"!=
d(this).css("visibility")}))&&1==c.length&&(b.target=c);b.initialPageIndex=a.stack[a.currentPanelOffset].scrollablePageIndex||b.initialPageIndex||0;0>b.initialPageIndex&&(b.initialPageIndex=0);b.prefill=b.preFillAttempts||10;d(m).evolutionScrollable(b);return{reset:function(){return d(m).evolutionScrollable("reset")}}}}}function P(a,b){var c=function(b){b=d(b);b.removeClass("expanded");b.find(".expandable-close").remove();b.find(".expandable").each(function(){var b=d(this),c=b.css("display");b.css({display:"none",
height:"auto"});var e=b.height();b.css({display:c,height:e}).evolutionTransform({height:0},{duration:a.transitionDuration/2.5,easing:a.transitionEasing})});b.trigger("collapse")};b.on("click",".content-list.expandable .content-item",function(){var b=d(this);if(!b.hasClass("expanded")){b.closest(".content-list.expandable").find(".content-item.expanded").each(function(){c(this)});b.addClass("expanded");var e=d('<a href="#" class="expandable-close ui-tip" data-tip="'+k.collapseExpandedItem+'"><svg alt="'+
k.collapseExpandedItem+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="24" height="24"><path d="M10,1.6c-4.639,0-8.4,3.761-8.4,8.4c0,4.639,3.761,8.4,8.4,8.4s8.4-3.761,8.4-8.4C18.4,5.361,14.639,1.6,10,1.6z M14.789,13.061l-1.729,1.729L10,11.729l-3.061,3.06l-1.729-1.729L8.272,10L5.211,6.939L6.94,5.211L10,8.271l3.061-3.061 l1.729,1.729L11.728,10L14.789,13.061z"/></svg></a>');b.prepend(e);b.find(".expandable").each(function(){var b=d(this),c=b.css("display");b.css({display:"none",height:"auto"});
var e=b.height();b.css({display:c,height:0}).evolutionTransform({height:e},{duration:a.transitionDuration/2.5,easing:a.transitionEasing,complete:function(){b.css({height:"auto"})}})});b.trigger("expand")}});b.on("click",".content-list.expandable .content-item.expanded .expandable-close",function(){d(this).closest(".content-item.expanded").each(function(){c(this)});return!1})}function q(a,b){b=d(b);b.data("_handlers_activated")||(b.data("_handlers_activated",!0),P(a,b))}function E(a,b){a.suppressedNameSpaces&&
e.unsuppress(a.suppressedNameSpaces);a.sleeping=!1;a.suppressedNameSpaces=[];var c=a.stack[a.currentPanelOffset].renderedNode;c&&(b&&b.show)&&m(a,D.panelShown,c)}function R(a){var b=a.stack[a.currentPanelOffset].renderedNode,c=b.data("_wrapper");c&&0!=c.length||(c=b.find(a.panelContentSelector).first(),b.data("_wrapper",c));return c}var S="__cpo",N="ADMINISTRATION_SHELL",D={shellClosed:"context.shell.closed",shellNavigationRefreshing:"context.shell.navigation.refreshing",shellNavigationRefreshed:"context.shell.navigation.refreshed",
panelLoaded:"administration.panel.loaded",panelUnloaded:"administration.panel.unloaded",panelShown:"administration.panel.shown",panelHidden:"administration.panel.hidden"},T={container:null,panelNode:null,panelId:null,panelName:null,onRefresh:function(){},onOpening:function(a){},onOpened:function(){},onRendering:function(){},onRendered:function(){},onCloseAll:function(){},onShow:function(){},onHide:function(){},onResize:function(a){},onAnimated:function(){},confirmNavigation:function(){return!0},onParsePanelId:function(a){},
transitionEasing:"cubic-bezier(0.645, 0.045, 0.355, 1)",transitionDuration:300,template:"",panelContentSelector:".contextual-panel-content",panelHeaderSelector:".contextual-panel-heading",panelHeaderContentSelector:".custom-panel-heading-content",excludeWhenResizingSelector:".contextual-administration-panel-loading"},U={__init:function(h){var g=d.extend({},T,h||{});currentContext=g;a(g);return{postInit:function(){m(g,D.panelLoaded,g.rootPanelNode);m(g,D.panelShown,g.rootPanelNode)},dispose:function(a){n(g,
a)},processHashChange:function(){return p(g)},canProcessHashChange:function(a){if(g.onParsePanelId(c.location.href)==g.rootPanelId){var d=f.hashData();d&&d[g.customPanelHashKey]!==b?(d=parseInt(d[g.customPanelHashKey],10),a=d===g.currentPanelOffset?!a:d>g.stack.length-1?!1:!0):a=0<g.currentPanelOffset?!0:!a}else a=!1;return a},sleep:function(){A(g);var a=g.stack[g.currentPanelOffset].renderedNode;a&&m(g,D.panelHidden,a,{direction:"none"});g.suppressedNameSpaces=t(g,!0);e.suppress(g.suppressedNameSpaces);
g.sleeping=!0},wake:function(){return E(g,{show:!0})},sleeping:function(){return g.sleeping},currentPanelNode:function(){if(!g||!g.stack||0==g.stack.length)return null;var a=g.stack[g.currentPanelOffset];return a?a.renderedNode:null},currentPanelDetails:function(){if(!g||!g.stack||0==g.stack.length)return null;var a=g.stack[g.currentPanelOffset];return a?a:null},context:function(a){a&&(currentContext=a);return currentContext},refreshingNavigation:function(a){if(!g||!g.stack||0==g.stack.length)return!1;
var b=g.stack[g.currentPanelOffset];if(!b)return!1;b=b.renderedNode;"undefined"!==typeof a&&(!g.refreshingNavigation&&a?m(g,D.shellNavigationRefreshing,b):g.refreshingNavigation&&!a&&m(g,D.shellNavigationRefreshed,b),g.refreshingNavigation=a);return g.refreshingNavigation||!1}}},open:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return B(currentContext,a)},close:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return C(currentContext,a)},refresh:function(){if("undefined"!==
typeof currentContext&&null!==currentContext){history.replaceState(null,null,document.location.pathname+currentContext.rootUrl);if(currentContext.onRefresh)currentContext.onRefresh();currentContext.customPanelHashKey=S+Math.floor(1E9*Math.random())}},scrollable:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return O(currentContext,a)},panelId:function(){if("undefined"!==typeof currentContext&&null!==currentContext)return s(currentContext,currentContext.currentPanelOffset)},
panelWrapper:function(){return"undefined"===typeof currentContext||null===currentContext?d([]):R(currentContext)},panelNameSpace:function(a){var b=[];a&&(g.isArray(a)?Array.prototype.push.apply(b,a):b.push(a));if("undefined"===typeof currentContext||null===currentContext)return b;(a=t(currentContext))&&0<a.length&&Array.prototype.push.apply(b,a);return b},header:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext){var c=currentContext,d=b||{},e=c.stack[c.currentPanelOffset].renderedNode;
d&&!1===d.inherit&&e.find(c.panelHeaderTitleSelector).hide();a?e&&(e.find(c.panelHeaderContentSelector).empty().append(a),F(c,e)):F(c,e);return e.find(c.panelHeaderContentSelector)}},sidebar:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return d.Deferred(function(b){if(currentContext.onSideBar&&a&&a.content){currentContext.onSideBar(a.content).then(function(){b.resolve()});var c;J(currentContext,"shell.navigation.refreshing",function(){currentContext.sleeping||(c=currentContext.onSideBar(null).detach())});
J(currentContext,"shell.navigation.refreshed",function(){!currentContext.sleeping&&c&&(currentContext.onSideBar(c),c=null)});J(currentContext,"panel.unloaded",function(a){if(!currentContext.sleeping)currentContext.onSideBar("")})}}).promise()},on:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext)return J(currentContext,a,b)},show:function(){if("undefined"!==typeof currentContext&&null!==currentContext&&currentContext.onShow)currentContext.onShow()},hide:function(){if("undefined"!==
typeof currentContext&&null!==currentContext&&currentContext.onHide)currentContext.onHide()},size:function(a){"undefined"!==typeof currentContext&&null!==currentContext&&G(currentContext,a,!0)},refreshBadges:function(){h.update({crossWindow:!0})},loading:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext)if(a){if(currentContext.onOpening)currentContext.onOpening(b)}else if(currentContext.onOpened)currentContext.onOpened()},navigationConfirmation:{enable:function(a,b){"undefined"!==
typeof currentContext&&null!==currentContext&&(void 0===a?l.register(l.defaultId,function(){return!0},t(currentContext)):l.register(a,b||function(){return!0},t(currentContext)))},disable:function(a){"undefined"!==typeof currentContext&&null!==currentContext&&(void 0===a?l.unRegisterById(l.defaultId):l.unRegisterById(a))},isEnabled:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return l.isChanged(a)}}};d.telligent=d.telligent||{};d.telligent.evolution=d.telligent.evolution||
{};return d.telligent.evolution.administration=U},jQuery,window);q("module.administrationContextManager",["module.administration","module.messaging","module.url","lib.util"],function(e,f,g,k,l,h,d){function c(a){return a.contexts[a.contexts.length-1]}var b={onTitle:function(){},onRefresh:function(){},onOpening:function(a){},onOpened:function(){},onRendering:function(){},onRendered:function(){},onCloseAll:function(){},onResize:function(a){},onShow:function(){},onHide:function(){},onAnimated:function(){},
confirmNavigation:function(){return!0},onParsePanelId:function(a){},onDispose:function(){},onSideBar:function(a){},transitionEasing:"cubic-bezier(0.645, 0.045, 0.355, 1)",transitionDuration:300,template:"",panelContentSelector:".contextual-panel-content",panelHeaderSelector:".contextual-panel-heading",panelHeaderTitleSelector:".administration-panel-heading-meta",panelHeaderContentSelector:".custom-panel-heading-content",excludeWhenResizingSelector:".contextual-administration-panel-loading"},a={container:null,
panelNode:null,panelId:null,panelName:null};f=function(d){var f=l.extend({},b,d||{},{contexts:[]});return{addContext:function(b){var d=c(f);null!=d&&d.sleep();b=l.extend({},a,b||{});var m=b.onCloseAll||f.onCloseAll||function(){};b.onCloseAll=function(){if(1<f.contexts.length){var a=f.contexts[f.contexts.length-2].currentPanelDetails();a&&a.url?h.location.href=a.url:m()}else m()};d=e.__init(l.extend({},f,b));d.panelNode=b.panelNode;d.panelRequest=b.panelRequest;d.innerContext=d.context();f.contexts.push(d)},
canProcessHash:function(a){for(var b=f.contexts.length-1;0<=b;b--)if(f.contexts[b].canProcessHashChange(a,b==f.contexts.length-1))return!0;return!1},processHash:function(a){for(var b=f.contexts.length-1;0<=b;b--){if(f.contexts[b].canProcessHashChange(a))return f.contexts[b].sleeping()&&(f.onNavigateBackToPreviousContext(f.contexts[b].currentPanelNode(),{onRendering:f.onRendering,onRendered:f.onRendered}),f.contexts[b].context(f.contexts[b].innerContext),f.contexts[b].wake()),f.contexts[b].processHashChange(a);
f.contexts[b].sleeping()&&f.contexts[b].wake();f.contexts[b].dispose({refreshing:!0});f.contexts[b].sleep();f.contexts.pop()}return!1},postInit:function(){var a=c(f);null!=a&&a.postInit()},dispose:function(a){if(a&&a.all)for(var b=f.contexts.length-1;0<=b;b--)f.contexts[b].dispose(a),f.contexts.pop();else b=c(f),null!=b&&(b.dispose(a),f.contexts.pop())},count:function(){return f.contexts.length},currentPanelNode:function(){var a=c(f);return a?a.currentPanelNode():null},currentPanelRequest:function(){var a=
c(f);return a?a.panelRequest:null},currentPanelDetails:function(){var a=c(f);return a?a.currentPanelDetails():null},previousPanelDetails:function(){if(1>=f.contexts.length)return null;var a=f.contexts[f.contexts.length-2];return a?a.currentPanelDetails():null},refreshingNavigation:function(a){var b=c(f);return b?b.refreshingNavigation(a):null}}};return e.__contextManager=f},jQuery,window);q("module.administrationNavigationConfirmationRegistrar",function(e,f,g){function k(c,d,e){e=e||[];b[c]&&l(c);
b[c]={id:c,isChangedFunc:d,tags:e||[]};e.forEach(function(b){a[b]||(a[b]=[]);0>a[b].indexOf(c)&&a[b].push(c)})}function l(c,d){var e=b[c];e&&(e.tags.forEach(function(b){if(d!=b){var e=a[b],f=e.indexOf(c);0<=f&&e.splice(f,1);0===e.length&&delete a[b]}}),delete b[c])}function h(b){b&&a[b]&&(a[b].forEach(function(a){l(a,b)}),a[b].length=0,delete a[b])}function d(a){if(!a||!a.tags||0==a.tags.length)return!1;for(var b=0;b<a.tags.length;b++)if(!n[a.tags[b]])return!1;return!0}function c(a){var c=[];if(a!==
g)b[a]&&!d(b[a])&&c.push(b[a]);else for(var e in b)b.hasOwnProperty(e)&&(a=b[e],d(a)||c.push(a));for(e=0;e<c.length;e++)if(c[e].isChangedFunc())return!0;return!1}var b={},a={},n={};return{init:function(){e.telligent.evolution.navigationConfirmation.enable("_administration_shell",c)},register:function(a,b,c){k(a,b,c||[])},unRegisterById:function(a){l(a)},unRegisterByTag:function(a){h(a)},isChanged:function(a){return c(a)},suppress:function(a){(a||[]).forEach(function(a){n[a]=!0})},unsuppress:function(){n=
{}},defaultId:"_default_nav_conf_id"}},jQuery,window);q("module.authentication","module.url lib.util lib.globalConfiguration module.authentication.slidingExpirationManager lib.sharedObjectProxy module.messaging".split(" "),function(e,f,g,k,l,h,d,c,b){function a(){m=new l({heartbeat:200,key:"_sharedExpirationManager",preexisting:function(){null!==m&&m.call("configure",{expireAt:(new Date(g.authenticationExpiration)).getTime(),issuedAt:(new Date(g.authenticationIssue)).getTime()})},construct:function(){var a=
new k({warningThreshold:45E3,expireAt:(new Date(g.authenticationExpiration)).getTime(),issuedAt:(new Date(g.authenticationIssue)).getTime(),renewable:g.slidingAuthentication});a.start();return a},destroy:function(a){null!==a&&a.stop()},receive:function(a,b,c){null!==a&&("configure"===b?a.configure(c):"registerActivity"===b?a.registerActivity():"renew"===b&&a.renew())}})}function n(a){if(y){var b={};b[s]=a;a=e.modify({url:y,query:b});a=/(?:[a-z]+:)?\/\//i.test(a)?new URL(a):new URL(a,c.location.origin);
c.location.href!=a.href&&(c.location.href=a.href)}c.sessionStorage.removeItem(v)}function p(){h.subscribe(r.expirationManagerLogout,function(){g.slidingAuthentication?n("auto"):n("force")},{excludeAutoNameSpaces:!0});h.subscribe(r.userLoggedOut,function(){n("manual")},{excludeAutoNameSpaces:!0});h.subscribe(r.userDeauthenticated,function(){n("admin")},{excludeAutoNameSpaces:!0})}function u(){if(d.telligent.evolution.user.accessing.isAuthenticated&&!g.isLogout){var a=d.telligent.evolution.user.accessing.id,
b=c.sessionStorage.getItem(v);b&&b==a||(c.sessionStorage.setItem(v,a),h.publish(r.userLogin,null,{crossWindow:!0}))}else h.subscribe(r.userLogin,function(){if(g.loginReturnUrl&&0<g.loginReturnUrl.length)g.loginReturnUrl!=c.location.href&&(c.location.href=g.loginReturnUrl);else{var a=(new Date).getTime(),b=c.localStorage.getItem(x);if(!b||1E4<a-Number(b))c.localStorage.setItem(x,a),c.location.reload()}},{excludeAutoNameSpaces:!0})}function t(){d(c).on("click scroll keydown input",f.debounce(function(){null!==
m&&m.call("registerActivity")},200))}var m=null,s="deauth",v="_accessing_user_id",y,x="_last_auth_reload",r={userLoggedOut:"user.loggedout",userLogin:"user.login",expirationManagerLogout:"_authentication.logout",warn:"user.logout.warning",userDeauthenticated:"user.deauthenticated"};b={renew:function(){null!==m&&m.call("renew")},configure:function(a){var b={};a.warningThresholdSeconds&&(b.warningThreshold=1E3*a.warningThresholdSeconds);null!==m&&m.call("configure",b);a.returnUrl&&(y=e.modify({url:y,
query:{ReturnUrl:a.returnUrl}}))}};d.telligent=d.telligent||{};d.telligent.evolution=d.telligent.evolution||{};d.telligent.evolution.authentication=d.telligent.evolution.authentication||b;return{init:function(){y=g.redirectedLogoutUrl;d.telligent.evolution.user.accessing.isAuthenticated&&(a(),t(),p());u()}}},jQuery,window);q("module.authentication.slidingExpirationManager",["lib.backgroundTimer","module.messaging"],function(e,f,g,k,l){var h={expireAt:null,issuedAt:null,warningThreshold:45E3,renewable:!0,
lastSeenAt:null,warning:!1,renewalThreshold:0.25},d={get:function(){return g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"authentication",suppressLogout:!0})},renew:function(){return g.telligent.evolution.post({url:g.telligent.evolution.site.getBaseUrl()+"authentication",data:{Renew:!0}}).then(function(c){return c&&c.AuthenticationCookie&&c.AuthenticationCookie.ExpirationDate&&c.AuthenticationCookie.IssueDate?{issuedAt:new Date(c.AuthenticationCookie.IssueDate),expireAt:new Date(c.AuthenticationCookie.ExpirationDate)}:
null})}};return function(c){function b(){d.renew().then(function(b){b&&(a.expireAt=b.expireAt.getTime(),a.issuedAt=b.issuedAt.getTime(),a.lastSeenAt=null)})}var a=g.extend({},h,c||{}),n,p;f.publish("user.logout.warning.canceled",null,{crossWindow:!0});return{configure:function(b){b.expireAt&&b.expireAt<a.expireAt&&delete b.expireAt;g.extend(a,b)},registerActivity:function(){a.lastSeenAt=(new Date).getTime()},renew:b,start:function(){e.clearInterval(n);n=e.setInterval(function(){var c=(new Date).getTime(),
d=a.expireAt-a.issuedAt,e=a.warningThreshold;e>=d*(1-a.renewalThreshold)&&(e=0.5*d);c>=a.expireAt?a.logoutTimeout||(a.logoutTimeout=setTimeout(function(){f.publish("_authentication.logout",null,{crossWindow:!0})},2E3)):c>=a.expireAt-e?(a.warning=!0,f.publish("user.logout.warning",{remainingSeconds:Math.round((a.expireAt-c)/1E3),renewable:a.renewable},{crossWindow:!0})):(a.lastSeenAt&&c>=a.issuedAt+d*a.renewalThreshold&&b(),a.warning&&(f.publish("user.logout.warning.canceled",null,{crossWindow:!0}),
a.warning=!1))},1E3);p=f.subscribe("_authentication.rest.unauthenticated",function(){d.get().fail(function(){f.publish("_authentication.logout",null,{crossWindow:!0})})},{excludeAutoNameSpaces:!0})},stop:function(){e.clearInterval(n);f.unsubscribe(p)}}}},jQuery,window);q("module.contentPeek",["lib.globalConfiguration","module.messaging","lib.util"],function(e,f,g,k,l,h){function d(b){t||(l._preventPeekClose?console.log("PEEK PREVENT CLOSE"):(b&&k(b).off("._contentpeek"),a&&(a.off("._contentpeek"),
a.glowPopUpPanel("hide"),p=n=null)))}function c(){var a=k.telligent.evolution.theme.getReflowBreakpoint();return null!==a&&k(l).width()<a}function b(){u||(u=!0,f.subscribe("ui.links.show",function(){t=!0}),{excludeAutoNameSpaces:!0},f.subscribe("ui.links.hide",function(a,b,c){t=!1;g.isOverElement(n)||d()},{excludeAutoNameSpaces:!0}))}var a,n,p,u=!1,t=!1;k.telligent=k.telligent||{};k.telligent.evolution=k.telligent.evolution||{};k.telligent.evolution.contentPeek=k.extend(k.telligent.evolution.contentPeek||
{},{show:function(f,h){b();c()||(n&&g.isOverElement(n)||p===f)||(p=f,k.telligent.evolution.get({url:e.contentPeekUrl,data:{contentTypeId:h.contentTypeId,contentId:h.contentId}}).then(function(b){g.isOverElement(f)&&p==f?(a||(a=k("<div></div>").glowPopUpPanel({cssClass:"content-peek-popup",zIndex:20001,position:"updown",hideOnDocumentClick:!1})),n=k('<div class="content-peek-popup-inner content-peek-fragment '+b.cssClass+'"></div>').append(b.peek).on("glowDelayedMouseLeave",250,function(a){g.isOverElement(n)||
g.isOverElement(f)||d(f)}),a.off("._contentpeek").on("glowPopUpPanelShowing._contentpeek",k.fn.uilinks.forceRender).glowPopUpPanel("html",n).glowPopUpPanel("show",f)):d(f)})["catch"](function(){p=null}))},hide:function(a){a===h?d():a!=p||(g.isOverElement(a)||g.isOverElement(n))||d(a)}});return{}},jQuery,window);q("module.emailDigest",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});var k=function(f,h){0>h||(0<h&&""!=f.subscriptionId&&(""==f.context||
"undefined"===f.contextId)?_showMessage(f,f.errorMessage):e.telligent.evolution.post({url:f.emailDigestUrl,data:{subscriptionId:f.subscriptionId,frequency:h,context:f.context,contextId:f.contextId},success:function(d){d=eval("("+d+")");var c=null;"create"==d.action?(f.subscriptionId=d.subscriptionId,f.frequency=h,1==h?c=f.dailyMessage:7==h&&(c=f.weeklyMessage)):"update"==d.action?(f.frequency=h,1==h?c=f.dailyMessage:7==h&&(c=f.weeklyMessage)):"delete"==d.action&&(f.subscriptionId="",f.frequency=0,
"group"==f.context&&(c=f.unsubscribeGroupMessage));d.warnings&&0<d.warnings.length?_showMessage(f,d.warnings[0],"warning"):c&&_showMessage(f,c,"success");d={subscriptionId:f.subscriptionId,frequency:f.frequency,context:f.context,contextId:f.contextId,action:d.action};e(document).trigger("emailDigestSubscriptionChange",[d])},error:function(d,c,b){_showMessage(f,f.errorMessage,"error")}}))};_showMessage=function(f,h,d){e.telligent.evolution.notifications.show(h,{type:d,duration:5E3})};e.telligent.evolution.emailDigest=
{register:function(f){e("#"+f.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:!0});e("#"+f.rollupWrapperId).on("click",function(){var h=e(this),d="",c="",b="";1==f.frequency?d="email-digest-selected":7==f.frequency?c="email-digest-selected":b="email-digest-selected";var a=h.outerWidth(),g=h.outerHeight(),h=h.offset(),d="<div class='email-digest-selectWrapper' style=\"min-width: "+(a-2)+'px;"><div frequency="1" class="email-digest-selectable '+f.selectableTag+
" "+d+'"><span style="display: block; white-space: nowrap;">'+f.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+f.selectableTag+" "+c+'"><span style="display: block; white-space: nowrap;">'+f.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+f.selectableTag+" "+b+'"><span style="display: block; white-space: nowrap;">'+f.popupUnsubscribe+"</span></div></div>";e("#"+f.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",d).glowPopUpPanel("show",
h.left+4,h.top+5,a,g-10,!1)});e(document).on("click","."+f.selectableTag,function(){var h=e(this);h.hasClass("email-digest-selected")||(h=h.attr("frequency"),k(f,h))});e(document).on("emailDigestSubscriptionChange",function(h,d){if(d.context==f.context&&d.contextId==f.contextId){var c="";"create"==d.action||"update"==d.action?("1"==d.frequency?c=f.rollupDaily:"7"==d.frequency&&(c=f.rollupWeekly),f.subscriptionId=d.subscriptionId):(c=f.rollupUnsubscribed,f.subscriptionId="");f.frequency=d.frequency;
e("#"+f.rollupTextId).html(c)}})}};return{}},jQuery,window);q("module.administrationToolbar",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.administrationToolbar={get:function(){var f;f=e(".admin-bar");0<f.length||(e("body").prepend(e('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>')),f=e(".admin-bar"));return f}};return{}},jQuery,window);q("module.configuration",["lib.globalConfiguration",
"plugin.evolutionHtmlEditor"],function(e,f,g,k,l){function h(c,b){return'<time datetime="'+c.toISOString()+'">'+b+"</time>"}var d=g.fn.filter;g.fn.filter=function(){arguments&&(0<arguments.length&&"string"==typeof arguments[0])&&(arguments[0]=arguments[0].replace(/:\[/g,"["));return d.apply(this,arguments)};l={formatDate:function(c){try{return c.toISOString()}catch(b){}return""},parseDate:function(){var c=function(b,a){var c;c=b.getTimezoneOffset();var d;isNaN(a)?c=new Date(b.getTime()-6E4*c):(d=
a/100,d=-(60*(d-d%1)+a%100),c=new Date(b.getTime()+6E4*(d-c)));return c};return function(b){var a,d=new Date;if(null===b||""===b)return d;if(null!=(a=/\/Date\((\d+)(?:([\-\+]\d+))?\)\//.exec(b)))return b=new Date(parseInt(a[1],10)),c(b,parseInt(a[2],10));if(null!=(a=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d+))?))([zZ]|([+\-])(((\d\d):(\d\d))|(\d\d\d\d)))?/.exec(b))){b=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()];
for(d=1;d<a.length&&8>d;d++)""!=a[d]&&void 0!=a[d]&&(b[d-1]=parseInt(a[d],10));b=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5],1E3*parseFloat("."+b[6]));if(a[8]){if("z"==a[8]||"Z"==a[8])return c(b,0);if(a[9]&&a[12]&&a[13])return a=(100*parseInt(a[12],10)+parseInt(a[13],10))*("+"==a[9]?1:-1),c(b,a);if(a[9]&&a[10])return a=(100*parseInt(a[10].substring(0,2),10)+parseInt(a[10].substring(2),10))*("+"==a[9]?1:-1),c(b,a)}else return b}throw"Invalid date format";}}(),formatAgoDate:function(c){try{var b=(new Date).getTime(),
a=Math.abs(b-c.getTime())/1E3,d=a/60,f=d/60,g=f/24,k=g/30.42,m=g/365;return b<c.getTime()?2>Math.round(d)?h(c,e.dateMinuteInFutureFormat.replace("{0}",Math.round(d))):60>Math.round(d)?h(c,e.dateMinutesInFutureFormat.replace("{0}",Math.round(d))):2>Math.round(f)?h(c,e.dateHourInFutureFormat.replace("{0}",Math.round(f))):24>Math.round(f)?h(c,e.dateHoursInFutureFormat.replace("{0}",Math.round(f))):2>Math.round(g)?h(c,e.dateDayInFutureFormat.replace("{0}",Math.round(g))):30.42>g?h(c,e.dateDaysInFutureFormat.replace("{0}",
Math.round(g))):2>Math.round(k)?h(c,e.dateMonthInFutureFormat.replace("{0}",Math.round(k))):12>k?h(e.dateMonthsInFutureFormat.replace("{0}",Math.round(k))):2>Math.round(m)?h(c,e.dateYearInFutureFormat.replace("{0}",Math.round(m))):h(c,e.dateYearsInFutureFormat.replace("{0}",Math.round(m))):10>a?h(c,e.dateNowAgoFormat):2>Math.round(d)?h(c,e.dateMinuteAgoFormat.replace("{0}",Math.round(d))):60>Math.round(d)?h(c,e.dateMinutesAgoFormat.replace("{0}",Math.round(d))):2>Math.round(f)?h(c,e.dateHourAgoFormat.replace("{0}",
Math.round(f))):24>Math.round(f)?h(c,e.dateHoursAgoFormat.replace("{0}",Math.round(f))):2>Math.round(g)?h(c,e.dateDayAgoFormat.replace("{0}",Math.round(g))):30.42>g?h(c,e.dateDaysAgoFormat.replace("{0}",Math.round(g))):2>Math.round(k)?h(c,e.dateMonthAgoFormat.replace("{0}",Math.round(k))):12>k?h(c,e.dateMonthsAgoFormat.replace("{0}",Math.round(k))):2>Math.round(m)?h(c,e.dateYearAgoFormat.replace("{0}",Math.round(m))):h(c,e.dateYearsAgoFormat.replace("{0}",Math.round(m)))}catch(s){}return""},site:{configure:function(c){g.extend(e,
c);e.fullBaseUrl=e.baseUrl;c=e.baseUrl.indexOf("/",9);0<c&&(e.baseUrl=e.baseUrl.substr(c));g.telligent.evolution.user={accessing:{id:e.accessingUserId,isSystemAccount:e.accessingUserIsSystemAccount,isTemporary:e.accessingUserTemporary,isAuthenticated:e.accessingUserIsAuthenticated}};f.configure({scriptBaseUrl:g.telligent.evolution.site.getBaseUrl()+"tinymce/",versionKey:e.versionKey,contextQueryString:e.contextQueryString,mediaMaxWidth:e.maxMediaWidth,mediaMaxHeight:e.mediaMaxHeight,defaultMediaWidth:e.defaultMediaWidth,
defaultMediaHeight:e.defaultMediaHeight,directionality:e.directionality,language:e.editorLanguage,contentCssUrl:g.telligent.evolution.site.getBaseUrl()+"tinymce/telligent/telligent.tinymce.content.css",directUploadContext:e.directUploadContext,directUploadUrl:e.directUploadUrl,autoLinkPattern:e.autoLinkPattern,editorConfigVersionKey:e.editorConfigVersionKey});g.extend(g.event.special.quote.defaults,{quoteText:e.quoteText});g.fn.glowTree&&g.extend(g.fn.glowTree.defaults,{expandedImageUrl:e.expandedUrl,
collapsedImageUrl:e.collapsedUrl,blankImageUrl:e.blankUrl});g.fn.glowDateTimeSelector&&(g.extend(g.fn.glowDateTimeSelector.defaults,{monthNames:e.monthNames,dayNames:e.dayNames,clearText:e.clearText,selectText:e.okText}),g.extend(g.fn.glowDateTimeSelector.dateDefaults,{monthNames:e.monthNames,dayNames:e.dayNames,clearText:e.clearText,selectText:e.okText},e.datePattern||{}),g.extend(g.fn.glowDateTimeSelector.timeDefaults,{monthNames:e.monthNames,dayNames:e.dayNames,clearText:e.clearText,selectText:e.okText},
e.timePattern||{}),g.extend(g.fn.glowDateTimeSelector.dateTimeDefaults,{monthNames:e.monthNames,dayNames:e.dayNames,clearText:e.clearText,selectText:e.okText},e.dateTimePattern||{}),g.extend(g.fn.glowDateTimeSelector.monthDefaults,{monthNames:e.monthNames,dayNames:e.dayNames,clearText:e.clearText,selectText:e.okText}));g.glowModal&&(g.extend(g.glowModal.defaults,{loadingHtmlUrl:"about:blank",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],
windowCloseCssClasses:["modal-close"],windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:950}),k.Telligent_Modal={GetWindowOpener:function(b,a){return g.glowModal.opener(b,a)},IsShown:function(b){return g.glowModal.visible(b)},Resize:function(b,a,c,d){g.glowModal.resize(b,a,c,d)},MoveTo:function(b,a,c){g.glowModal.moveTo(b,a,c)},Open:function(b,
a,c,d,e,f,m,h,k){g.glowModal(b,{width:a,height:c,onClose:d,x:e,y:f,ignoreCloseAndAnimation:m,isManuallyresized:h,openerWindow:k})},Close:function(b,a){g.glowModal.close(b,a)},Refresh:function(b){g.glowModal.refresh(b)}});g.fn.glowDropDownList&&g.extend(g.fn.glowDropDownList.defaults,{buttonImageUrl:e.ddlButtonUrl});g.fn.glowColorSelector&&g.extend(g.fn.glowColorSelector.defaults,{blendImageUrl:e.blendUrl,hueBlendImageUrl:e.hueBlendUrl,alphaBlendImageUrl:e.alphaBlendUrl,transparentImageUrl:e.transparentUrl});
g.fn.glowUpload&&g.extend(g.fn.glowUpload.defaults,{maxFileSize:"0"});g.fn.glowMultiUpload&&g.extend(g.fn.glowMultiUpload.defaults,{maxFileSize:"0"})},getBaseUrl:function(c){return!0!==c?e.baseUrl:e.fullBaseUrl}},theme:{getReflowBreakpoint:function(){var c=null;g(".evolution-reflow-container:not(.single-column)").each(function(){var b=parseInt(g(this).data("reflow-width"));!isNaN(b)&&(null==c||b<c)&&(c=b)});return c}}};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.extend(g.telligent.evolution,
l);return{}},jQuery,window);q("module.editableGroup",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});var k={},l=function(b,a,c){if(b.isSaving)if(a+1<b.widgets.length){var d=b.widgets[a+1];d.save?(d=d.save(function(){l(b,a+1,c)},function(){h(b,a+1,c)}),!1===d?h(b,a+1,c):!0===d&&l(b,a+1,c)):l(b,a+1,c)}else c.success&&(b.isSaving=!1,c.success())},h=function(b,a,c){b.isSaving&&(b.isSaving=!1,c.error&&c.error())},d=function(b,a,c){if(b.isValidating){b.widgets[a].valid=
!0;var d=0;e.each(b.widgets,function(a,b){!0!==b.valid&&d++});0==d&&(b.isValidating=!1,c.success&&c.success())}},c=function(b,a,c){b.isValidating&&(b.widgets[a].valid=!1,b.isValidating=!1,c.error&&c.error())};e.telligent.evolution.editableGroup={register:function(b,a){var c=k[b];c||(c={widgets:[],isSaving:!1,isValidating:!1},k[b]=c);c.widgets[c.widgets.length]=e.extend({},a||{},{valid:!1,saved:!1})},save:function(b,a){e.telligent.evolution.editableGroup.validate(b,{success:function(){var c=k[b];c&&
0<c.widgets.length?(c.isSaving=!0,l(c,-1,a)):a&&a.success&&a.success()},error:function(){a.error&&a.error()}})},validate:function(b,a){var f=k[b];f&&0<f.widgets.length?(e.each(f.widgets,function(a,b){b.valid=g}),f.isValidating=!0,e.each(f.widgets,function(b,e){if(e.validate){var h=e.validate(function(){d(f,b,a)},function(){c(f,b,a)});!1===h?c(f,b,a):!0===h&&d(f,b,a)}else d(f,b,a)})):a&&a.success&&a.success()}};return{}},jQuery,window);q("module.html",["lib.util"],function(e,f,g,k){var l={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};g={encode:function(f){var d=e.compileReplacer(l);return function(c){return d.call(this,c)}}(),decode:function(e){var d=/<[^>]*>/g;return function(c){if(!c)return c;c=(c+"").replace(d," ");return f("<div/>").html(c).text()}}()};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});return f.telligent.evolution.html=g},jQuery,window);q("module.javaScript",["lib.util"],function(e,f,g,k){var l={"\\":"\\\\","\n":"\\n",
"\r":"\\r","'":"\\'",'"':'\\"',"/":"\\/"};g={encode:function(f){var d=e.compileReplacer(l);return function(c){return d.call(this,c)}}()};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});return f.telligent.evolution.javaScript=g},jQuery,window);q("module.language",function(e,f,g){var k={},l={};agoLastRefresh=(new Date).getTime();buildCacheKey=function(d,c){return d.toString()+"-"+c};loadFormattedDate=function(d,c,b){var a=k;"agodate"==c&&(6E4<(new Date).getTime()-agoLastRefresh&&
(l={},agoLastRefresh=(new Date).getTime()),a=l);var f=a[buildCacheKey(d,c)];"undefined"===typeof f?e.telligent.evolution.get({url:h.defaults.dateEndpoint,data:{date:e.telligent.evolution.formatDate(d),format:c},success:function(e){e&&(b&&"undefined"!==typeof e&&null!==e&&e.formattedDate)&&(a[buildCacheKey(d,c)]=e.formattedDate,b(e.formattedDate))}}):b(f)};var h={formatDate:function(d,c){loadFormattedDate(d,"date",c)},formatDateAndTime:function(d,c){loadFormattedDate(d,"datetime",c)},formatAgoDate:function(d,
c){loadFormattedDate(d,"agodate",c)},defaults:{dateEndpoint:""}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.language=h;return{}},jQuery,window);q("module.media",function(e,f,g){var k=function(f,d,c){var b=e.extend({},l.defaults,c||{});f={url:f,view:d};b.width&&(f.width=b.width);b.height&&(f.height=b.height);e.telligent.evolution.get({url:b.endpoint,data:f,success:function(a){a&&b.success&&b.success(a)},error:function(a,c,d){b.error&&b.error(a,
c,d)}})},l={previewHtml:function(e,d){k(e,"preview",d)},viewHtml:function(e,d){k(e,"view",d)},defaults:{endpoint:""}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.media=l;return{}},jQuery,window);q("module.messaging",["lib.util","lib.crossWindowBus"],function(e,f,g,k,l){function h(a,b){b.retroactive&&(retroactiveMessages[a]=b.data);var c=s[a];if(c)for(var c=c.slice(),d=0;d<c.length;d++)!c[d]||(!c[d].handler||c[d].suppressed!==l&&c[d].suppressed)||
c[d].handler.call(this,b.data)}function d(a,b,c,d){if(!a)throw"messageName is required when publishing a message";null!==a&&0!==a.length&&(b={data:b||{},retroactive:d},c&&!0===c.crossWindow?(x.broadcast(a,b),!0!==c.excludeOrigin&&h(a,b)):h(a,b))}function c(a,b,c,d){if(!a)throw"messageName is required when subscribing to a message";if(null===a||0===a.length)return 0;"undefined"===typeof s[a]&&(s[a]=[]);var f=b;if(c==l||"function"!==typeof c)d=c,c=b,f="content";e.isArray(f)||(f=[f]);d&&d.excludeAutoNameSpaces||
g&&(g.telligent&&g.telligent.evolution&&g.telligent.evolution.administration&&g.telligent.evolution.administration.panelNameSpace)&&Array.prototype.push.apply(f,g.telligent.evolution.administration.panelNameSpace());b={message:a,handler:c,namespaces:f,id:++m};s[a][s[a].length]=b;v[String(b.id)]=b;for(d=0;d<f.length;d++)y[f[d]]||(y[f[d]]=[]),y[f[d]][y[f[d]].length]=b.id;retroactiveMessages[a]&&c.call(this,retroactiveMessages[a]);return b.id}function b(b){if(!b)throw"subscriptionId is required when suppressing a message";
if(isNaN(b)){if(b)for(messageNamespaces=b,e.isArray(messageNamespaces)||(messageNamespaces=[messageNamespaces]),b=0;b<messageNamespaces.length;b++)if(y[messageNamespaces[b]])for(var c=0;c<y[messageNamespaces[b]].length;c++)a(y[messageNamespaces[b]][c],messageNamespaces[b])}else a(b)}function a(a){"undefined"!==typeof v[String(a)]&&(v[String(a)].suppressed=!0)}function n(a){if(!a)throw"subscriptionId is required when unsuppressing a message";if(isNaN(a)){if(a)for(messageNamespaces=a,e.isArray(messageNamespaces)||
(messageNamespaces=[messageNamespaces]),a=0;a<messageNamespaces.length;a++)if(y[messageNamespaces[a]])for(var b=0;b<y[messageNamespaces[a]].length;b++)p(y[messageNamespaces[a]][b],messageNamespaces[a])}else p(a)}function p(a){"undefined"!==typeof v[String(a)]&&(v[String(a)].suppressed=!1)}function u(a){if(!a)throw"subscriptionId is required when unsubscribing a message";if(isNaN(a)){if(a&&y[a]){for(var b=0;b<y[a].length;b++)t(y[a][b],a);y[a].length=0;delete y[a]}}else t(a)}function t(a,b){if("undefined"!==
typeof v[String(a)]){var c=v[String(a)],d=s[c.message];subscriptionByNameIndex=e.indexOf(d,c);0<=subscriptionByNameIndex&&d.splice(subscriptionByNameIndex,1);0===d.length&&(delete s[c.message],delete retroactiveMessages[c.message]);for(d=0;d<c.namespaces.length;d++)if(b!==c.namespaces[d]){var f=y[c.namespaces[d]],m=e.indexOf(f,a);0<=m&&f.splice(m,1);0===f.length&&delete y[c.namespaces[d]]}delete v[String(a)]}}var m=0,s={},v={},y={},x=new f({key:"__m",includeLocal:!1,receive:h});retroactiveMessages=
{};f={publish:d,subscribe:c,unsubscribe:u,suppress:b,unsuppress:n};k={publish:function(a,b,c){return d(a,b,c,!1)},subscribe:c,unsubscribe:u,suppress:b,unsuppress:n};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});g.telligent.evolution.messaging=k;return f},jQuery,window);q("module.navigationConfirmation",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});var k={},l=!1,h=function(){if(l)return!1;var d=!1;e.each(k,function(c,
b){"function"===typeof b?b()&&(d=!0):d=!0});return d};e.telligent.evolution.navigationConfirmation={configure:function(){},enable:function(d,c){void 0===d?k.__evolution_default_navigationconfirmation=function(){return!0}:k[d]=c||function(){return!0}},disable:function(d){void 0===d?delete k.__evolution_default_navigationconfirmation:delete k[d]},isEnabled:function(d){return void 0===d?h():(d=k[d])?"function"===typeof d?d():!0:!1},register:function(d){e(d).on("click",function(){l=!0})},ignoreClick:function(){l=
!0}};return{init:function(){e(window).on("beforeunload",function(d){if(h())return d.preventDefault(),d.returnValue="",!1});e(document).on("customizepage",function(){l=!0})}}},jQuery,window);q("module.notifications","module.notifications.ui module.notifications.alert module.notifications.banner module.notifications.unread module.notifications.unread.title module.notifications.unread.icon events.notifications".split(" "),function(e,f,g,k,l,h,d,c,b,a){var n,p,u={error:[]},t=function(a,b){u[a]&&(u[a]=
u[a].filter(function(a,c,d){return a!=b}))},m=function(a){(a=u[a])&&c.each(a,function(a,b){try{b()}catch(c){}})},s={show:function(a,b){b&&b.type&&m(b.type);return p.show(a,b)},hide:function(a){return p.hide(a)},unread:function(a,b){return n.unread(a,b)},defaults:{template:'<div class="push-notification <%: cssClass %> <% if(active) { %>active<% } %>">  <a href="#" class="close">x</a>   <%= message %> </div> ',parent:"body",margin:5,errorDuration:5E3,verticalOffset:0,horizontalOffset:0,animationDuration:250,
placement:"bottomleft",opacity:0.95,limit:10,bannerContainerTemplate:'<div class="banner-notifications-container">\t<div class="banner-notifications-controls close">\t\t<a href="#" class="banner-notifications-controls-close">&times;</a>\t</div>\t<ul class="banner-notifications"></ul>\t<div class="banner-notifications-controls navigator">\t\t<a href="#" class="banner-notifications-controls-backward">&#x25c0;</a>\t\t<span class="banner-notifications-controls-count"></span>\t\t<a href="#" class="banner-notifications-controls-forward">&#9654;</a>\t</div></div>',
bannerTemplate:'<li data-tip="<%: message %>" class="ui-tip banner-notification <%: cssClass %> <% if(active) { %>active<% } %>"><span><%: message %></span></li>',bannerContainer:"body"}};c.telligent=c.telligent||{};c.telligent.evolution=c.telligent.evolution||{};c.telligent.evolution.notifications=c.extend(c.telligent.evolution.notifications||{},s);return c.extend({initiate:function(){n=new k(s.defaults);n.registerRenderer(new l);n.registerRenderer(new h);n.init();p=new e(s.defaults);p.registerRenderer("alert",
new f);p.registerRenderer("banner",new g);p.init();d.initiate()},on:function(a,b){t(a,b);u[a]&&u[a].push(b)},off:function(a,b){t(a,b)}},s)},jQuery,window);q("module.notifications.alert",function(e,f,g){return function(g){function l(a,f){var g=e.grep(a.notifications,function(a){return a.id===f.id});if(null!==g&&1===g.length)return g=g[0],d(a,g,!0).then(function(){g.view.remove();g.message=f.message;g.cssClass=f.cssClass;g.duration=f.duration;n(a,g);g.suppressPositionAnimation=!0;h(a);c(a,g,!0);p(a,
g)}),g;a.notifications.length===a.limit&&b(a,a.notifications[a.notifications.length-1]);a.notifications.unshift(f);n(a,f);h(a);c(a,f);p(a,f);return f}function h(a){var b=a.margin,c=0<e.grep(a.notifications,function(a){!0===a.suppressPositionAnimation}).length;e.each(a.notifications,function(d,e){if(c){var f={opacity:0};f[a.verticalAlignment]=b+"px";e.view.css(f);e.suppressPositionAnimation=!1}else f={},f[a.verticalAlignment]=b,e.view.evolutionTransform(f,{duration:a.animationDuration});0<e.measuredHeight&&
(b+=e.measuredHeight+a.margin)})}function d(a,b,c){b.onHide&&b.onHide.apply(b);return e.Deferred(function(d){!0!==c?b.view.evolutionTransform({opacity:0},{duration:a.animationDuration,complete:function(){b.view.css({display:"none"});d.resolve()}}):d.resolve()}).promise()}function c(a,b,c){e("body").addClass("with-notifications");b.onShow&&b.onShow.apply(b);return e.Deferred(function(d){!0!==c?(b.view.is(":visible")||b.view.css({display:"block",opacity:0}),b.view.evolutionTransform({opacity:a.opacity},
{duration:a.animationDuration,complete:function(){d.resolve()}})):(b.view.css({display:"block",opacity:a.opacity}),d.resolve())}).promise()}function b(a,b){b.removing=!0;d(a,b).then(function(){b.view.remove();b.measuredHeight=0;a.notifications=e.grep(a.notifications,function(a){return a!==b});h(a);a.notifications&&0!==a.notifications.length||e("body").removeClass("with-notifications")})}function a(a,c){f.clearTimeout(c.removeTimeout);f.clearInterval(c.hideSupressedWaitInterval);c.hideSupressedWaitInterval=
f.setTimeout(function(){a.removalSuppressed?c.hideSupressedWaitInterval=f.setInterval(function(){a.removalSuppressed||(f.clearInterval(c.hideSupressedWaitInterval),b(a,c))},1E3):b(a,c)},c.duration);c.shownTime=(new Date).getTime()}function n(a,b){var c={position:"fixed",zIndex:20001,width:b.width};c[a.horizontalAlignment]=a.margin+a.horizontalOffset+"px";c[a.verticalAlignment]=a.margin+a.verticalOffset+"px";b.active=!!b.onClick;b.view=e(a.template(b)).css(c).hide().appendTo(a.parent);b.measuredHeight=
b.view.outerHeight()}function p(d,e){e.view.find("a.close").on("click",function(a){a.preventDefault();a.stopPropagation();e.onClose?(a=e.onClose.apply(e))?a.then(function(){b(d,e)}):b(d,e):b(d,e)});e.view.on("click",function(){e.onClick&&e.onClick.apply(e)});e.view.on("mouseenter",function(){d.entered=!0;d.removalSuppressed=!0;e.removing&&(e.view.stop(),e.removing=!1,c(d,e),h(d),a(d,e));e.onOver&&e.onOver.apply(e)});e.view.on("mouseleave",function(){d.entered=!1;f.setTimeout(function(){d.entered||
(d.removalSuppressed=!1)},500);e.onOut&&e.onOut.apply(e)})}var u;return{show:function(b){a(u,l(u,b))},hide:function(a){if(u)if("function"===typeof a)e.each(u.notifications,function(a,c){b(u,c)}),a();else{var c=e.grep(u.notifications,function(b){return b.id===a});c&&0!=c.length&&b(u,c[0])}},init:function(a){u=e.extend({},a||{},{removalSuppressed:!1,notifications:[]});u.verticalAlignment="bottom";0<=u.placement.indexOf("top")&&(u.verticalAlignment="top");u.horizontalAlignment="left";0<=u.placement.indexOf("right")&&
(u.horizontalAlignment="right");u.template=e.telligent.evolution.template.compile(u.template)},list:function(){return u.notifications}}}},jQuery,window);q("module.notifications.banner",["module.template"],function(e,f,g,k){return function(g){function h(){n=f(e.compile(p.bannerContainerTemplate)({})).hide();n.appendTo(a);t=n.find(".banner-notifications");m=n.find(".banner-notifications-controls-forward");s=n.find(".banner-notifications-controls-backward");v=n.find(".banner-notifications-controls-close");
y=n.find(".banner-notifications-controls-count");x=n.find(".banner-notifications-controls.navigator");v.on("click",function(a){c();return!1});m.on("click",function(a){a=w;w++;w>=r.length&&(w=0);0>w&&(w=r.length-1);d(a);return!1});s.on("click",function(a){a=w;w--;0>w&&(w=r.length-1);d(a);return!1});u=e.compile(p.bannerTemplate)}function d(a){a!==k&&1<Math.abs(w-a)?t.scrollLeft(t.width()*w):t.stop(!0,!0).animate({scrollLeft:t.width()*w},200);0<=w&&((a=r[w])&&a.type?(z&&n.removeClass(z),z=a.type,n.addClass(a.type)):
z&&(n.removeClass(z),z=null))}function c(a){r.forEach(function(b){a&&a!=b.id||(b.view.remove(),b.onClose&&b.onClose.apply(b),r=r.filter(function(a){return a.id!==b.id}))});b();w>=r.length&&(w=r.length-1,0>w&&(w=0),d());0==r.length&&n.stop().fadeOut(200)}function b(){y.html(r.length);1<r.length?x.show():x.hide()}var a,n,p,u,t,m,s,v,y,x,r=[],w=0,z=null;return{show:function(a){for(var e=!1,m=0;m<r.length;m++)r[m].id==a.id&&(f.extend(r[m],a),r[m].onClick&&(r[m].view.off("click").on("click",function(){a.onClick.apply(a);
return!1}),r[m].active=!0),e=!0);if(!e){n||h();a.active=!!a.onClick;a.view=f(u(a));n.stop().fadeIn(200);t.append(a.view);r.push(a);if(a.onClick)a.view.on("click",function(){a.onClick.apply(a);return!1});b();w=r.length-1;d();setTimeout(function(){c(a.id)},a.duration)}},hide:function(a){n||h();c(a)},init:function(b){p=b;a=f(b.bannerContainer)},list:function(){return r}}}},jQuery,window);q("module.notifications.ui",["lib.util","lib.storageProxy"],function(e,f,g,k,l){var h={duration:5E3,width:200,type:"",
id:null,onClick:null,onClose:null,onShow:null,onHide:null,onOver:null,onOut:null,mode:"alert"},d="notifications",c={__disconnect_notification:!0,__systemnotification:!0},b;return function(a){function n(a){return a&&(a.type&&"error"==a.type||a.cssClass&&"error"==a.cssClass)}function p(){g(k).on("unload",function(){t()})}function l(a){x=new f({id:g.telligent.evolution.user.accessing.id,isSystemAccount:g.telligent.evolution.user.accessing.isSystemAccount});b=g.telligent.evolution.theme.getReflowBreakpoint();
g.each(v,function(b,c){c.init(a)});if(k.top==k){var c=x.get(d);c&&9E4>(new Date).getTime()-c.updated&&g.each(c.notifications,function(a,b){var c=m(b.message,b);s(c)});x.del(d)}}function t(){var a=[];g.each(v,function(b,c){a=a.concat(c.list())});var b=g.extend({},{updated:(new Date).getTime(),notifications:[]},x.get(d)||{});g.each(a,function(a,d){var e=d.duration,f=n(d);d.shownTime&&(e-=b.updated-d.shownTime);1<e&&!(f&&d.shownTime&&!(2>b.updated-d.shownTime)||d&&(d["transient"]||"system-notification"==
d.type||c&&!0===c[d.id]))&&b.notifications.unshift({duration:f?Math.min(e,h.duration):e,width:d.width,mode:d.mode,type:d.type,cssClass:d.cssClass,id:d.id,message:d.message})});0==b.notifications.length?x.del(d):x.set(d,b)}function m(a,c){c&&(!c.duration&&n(c))&&(c.duration=y.errorDuration);var d=g.extend({},h,c||{});d.message=a;d.cssClass=d.type||"";d.id||(d.id=e.guid());null!==b&&g(k).width()<b&&(d.mode="banner");return d}function s(a){var b=a.mode;g.telligent.evolution.administration&&g.telligent.evolution.administration.isAdminShell&&
(b="alert");(b=v[b])&&b.show(a)}var v={},y=a,x;window._persist=t;return{registerRenderer:function(a,b){v[a]=b},init:function(){p();l(y)},show:function(a,b){var c=m(a,b);s(c);return c.id},hide:function(a){a&&g.each(v,function(b,c){c.hide(a)})}}}},jQuery,window);q("module.notifications.unread.icon",function(e,f,g){return function(g){function l(g,m,s){var k="",y="undefined"!=typeof InstallTrigger||!!f.opera||0<=navigator.userAgent.indexOf("Opera");if(h&&!c)if(d=e('head link[rel~="icon"][href]').first(),
0<d.length){c=d.attr("href");b=d.attr("type");try{n=document.createElement("canvas"),a=document.createElement("img"),a.onload=function(){n.height=0<a.height?a.height:32;n.width=0<a.width?a.width:32;p=n.getContext("2d")},e(a).attr({crossOrigin:"anonymous",src:c})}catch(x){h=!1}}else h=!1;if(h)if(p)try{p.clearRect(0,0,n.width,n.height);p.drawImage(a,0,0,n.width,n.height);if(s){if(0<m||0<g)k=Math.max(m,g),99<k&&(k="99+")}else 0<g?(k=g,99<k&&(k="99+")):0<m&&(k="+");if(0===k||""===k)if(y){var r=e('<link type="'+
b+'" rel="icon"></link>');e("head").append(r);r.attr("href",c);d.remove();d=r}else d.attr({href:c,type:b});else{var k=k+"",w=!1,z=0.4*n.width,A=0.4*n.height,B=0.6*n.width,C=0.6*n.height;2===k.length?(z-=0.4*B,B*=1.4,w=!0):3<=k.length&&(z-=0.65*B,B*=1.65,w=!0);p.beginPath();p.font="bold "+Math.floor(C*(2<k.length?0.85:1))+"px sans-serif";p.textAlign="center";w?(p.moveTo(z+B/2,A),p.lineTo(z+B-C/2,A),p.quadraticCurveTo(z+B,A,z+B,A+C/2),p.lineTo(z+B,A+C-C/2),p.quadraticCurveTo(z+B,A+C,z+B-C/2,A+C),p.lineTo(z+
C/2,A+C),p.quadraticCurveTo(z,A+C,z,A+C-C/2),p.lineTo(z,A+C/2),p.quadraticCurveTo(z,A,z+C/2,A)):p.arc(z+B/2,A+C/2,C/2,0,2*Math.PI);p.fillStyle="rgba(221,0,0,1)";p.fill();p.closePath();p.beginPath();p.stroke();p.fillStyle="rgba(255,255,255,1)";p.fillText(k,Math.floor(z+B/2),Math.floor(A+C-0.15*C));p.closePath();y?(r=e('<link type="image/png" rel="icon"></link>'),e("head").append(r),r.attr("href",n.toDataURL("image/png")),d.remove(),d=r):d.attr({href:n.toDataURL("image/png"),type:"image/png"})}}catch(G){h=
!1}else f.clearTimeout(u),u=f.setTimeout(function(){l(g,m,s)},250)}var h=!0,d=null,c=null,b=null,a=null,n=null,p=null,u=null;return{render:function(a){l(a.localUnread,a.globalUnread,a.combineCounts)}}}},jQuery,window);q("module.notifications.unread",["lib.util","module.messaging","lib.sharedObjectProxyState","lib.globalConfiguration","module.rest"],function(e,f,g,k,l,h,d,c){return function(b){function a(){d.clearTimeout(x);var b=!g.hasMultipleWindows();r!=b&&(r=b,u());x=d.setTimeout(function(){a()},
1E3)}function e(){h.telligent.evolution.user&&(h.telligent.evolution.user.accessing&&!h.telligent.evolution.user.accessing.isSystemAccount&&!h.telligent.evolution.user.accessing.isTemporary)&&(d.clearTimeout(w),w=d.setTimeout(function(){l.get({url:k.baseUrl+"api.ashx/v2/notifications.json",cache:!1,data:{IsRead:!1,PageSize:1,PageIndex:0}}).then(function(a){p(a.TotalCount,!1,"notifications")})},1E3))}function p(a,b,c){var d=0;a+="";if("+"==a.substr(0,1)){d=parseInt(a.substr(1),10);if(isNaN(d))return;
b?s[c]=(s[c]||0)+d:y[c]=(y[c]||0)+d}else if("-"==a.substr(0,1)){d=parseInt(a.substr(1),10);if(isNaN(d))return;b?s[c]=(s[c]||0)-d:y[c]=(y[c]||0)-d}else{d=parseInt(a,10);if(isNaN(d))return;b?s[c]=d:y[c]=d}m=0;h.each(s,function(a,b){0>b&&(s[a]=b=0);m+=b});v=0;h.each(y,function(a,b){0>b&&(y[a]=b=0);v+=b});f.publish("notification.unreadchange",{local:m,global:v});u()}function u(){A&&z.forEach(function(a){a.render({localUnread:m,globalUnread:v,combineCounts:r})})}function t(){f.subscribe("notification.read",
function(a){var b=parseInt(a.unreadCount,10);isNaN(b)||p(a.unreadCount,!1,"notifications")},{excludeAutoNameSpaces:!0});f.subscribe("notification.raised",function(a){p("+1",!1,"notifications");e()},{excludeAutoNameSpaces:!0})}var m=0,s={},v=0,y={},x=null,r=!0,w=null,z=[],A=!d.parent||d.parent==d;return{registerRenderer:function(a){z.push(a)},init:function(){t();A=A&&!h("body").hasClass("administration");e();a()},unread:function(a,b){if(a===c)return{local:m,global:v};b=b||{};p(a,!0===b.isLocal,b.namespace||
"unknown")}}}},jQuery,window);q("module.notifications.unread.title",function(e,f,g){return function(e){var f=/^(\([0-9\+]+\)\s+)+/;return{render:function(e){var d=document.title.replace(f,"")+"",c=0;if(e.combineCounts){if(0<e.globalUnread||0<e.localUnread)c=Math.max(e.globalUnread,e.localUnread),99<c&&(c="99+"),d="("+c+") "+d}else 0<e.localUnread?(c=e.localUnread,99<c&&(c="99+"),d="("+c+") "+d):0<e.globalUnread&&(d="(+) "+d);document.title=d}}}},jQuery,window);q("lib.crossWindowPresentContentRegistrar",
["lib.storageProxy"],function(e,f,g,k){function l(c){var b={};c=c.split(":");2<=c.length&&(b.ContentId=c[0],b.ContentTypeId=c[1],2<c.length&&(b.TypeId=c[2]));return b}function h(c){g.setInterval(function(){var b=c.storage.get(c.key)||[],a={},d=(new Date).getTime();f.each(b,function(b,e){d-e<c.expiration&&(a[b]=e)});c.storage.set(c.key,a)},c.garbageCollectInterval)}var d={key:"__cwpcr",expiration:4E3,garbageCollectInterval:3E4,user:{}};return function(c){var b=f.extend({},d,c||{});b.storage=new e(b.user);
h(b);return{setVisibleContents:function(a){if(a){for(var c=b.storage.get(b.key)||[],d=(new Date).getTime(),e=0;e<a.length;e++)c[a[e].ContentId+":"+a[e].ContentTypeId+":"+(a[e].TypeId||"")]=d;b.storage.set(b.key,c)}},getUniqueVisibleContent:function(){var a=b.storage.get(b.key)||[],c=[],d=(new Date).getTime();f.each(a,function(a,e){d-e<b.expiration&&c.push(l(a))});return c}}}},jQuery,window);q("lib.crossWindowPresentContentRegistrarSingleton",["lib.crossWindowPresentContentRegistrar"],function(e,f,
g,k){var l=null;return{get:function(g){return l?l:l=new e(f.extend({user:f.telligent.evolution.user.accessing,expiration:4E3},g||{}))}}},jQuery,window);q("module.presence",["lib.crossWindowPresentContentRegistrarSingleton","lib.crossWindowBus","lib.util"],function(e,f,g,k,l,h){function d(c){c=[];for(var d=a.length;d--;)if(0<a[d].node.closest("body").length){var e;(e=a[d].isRoot)||(e=a[d].node.get(0).getBoundingClientRect(),e=(0<e.height||0<e.width)&&0<=e.bottom&&0<=e.right&&e.top<=(l.innerHeight||
document.documentElement.clientHeight)&&e.left<=(l.innerWidth||document.documentElement.clientWidth));if(e)for(e=0;e<a[d].contents.length;e++)c.push({ContentId:a[d].contents[e].ContentId,ContentTypeId:a[d].contents[e].ContentTypeId,TypeId:a[d].contents[e].TypeId})}else a.splice(d,1);0<c.length&&b&&b.setVisibleContents(c)}function c(){b=e.get();l.setInterval(function(){d(!1)},2E3);p=g.debounce(function(){d(!0)},250);u=g.debounce(function(){try{k.telligent.evolution.sockets.present()}catch(a){}},500);
k(l).on("scroll resized",g.requestAnimationFrameThrottle(function(){p();u()}))}var b=null,a=[],n=!0,p,u,n=!0;k(function(){c();setTimeout(function(){n=!1},4E3)});f={register:function(b){b.node=k(b.node);b.isRoot=b.node.is("body");b.services&&(b.contents=b.contents||[],b.services.forEach(function(a){b.contents.push({ContentId:a.ServiceId,ContentTypeId:"00000000000000000000000000000000",TypeId:a.TypeId||""})}),delete b.services);a.push(b);n||(p(),u())}};k.telligent=k.telligent||{};k.telligent.evolution=
k.telligent.evolution||{};k.telligent.evolution.presence=k.telligent.evolution.presence||f;return f},jQuery,window);q("module.preview",function(e,f,g){var k=function(f,d){var c=e.extend({},l.defaults,d||{});e.telligent.evolution.get({url:c.endpoint,data:{url:f,maxImageWidth:"undefined"!==typeof d.maxImageWidth?d.maxImageWidth:c.maxImageWidth,maxImageHeight:"undefined"!==typeof d.maxImageHeight?d.maxImageHeight:c.maxImageHeight},success:function(b){b&&c.success&&"undefined"!==typeof b&&null!==b?c.success(b):
c.error&&c.error(b)},error:function(b,a,d){c.error&&c.error(b,a,d)}})},l={load:function(e,d){k(e,d)},render:function(f,d){if(null!==f&&"undefined"!==typeof f&&"undefined"!==typeof f.url&&0!==f.url.length&&"undefined"!==typeof f.title&&0!==f.title.length){var c=e.extend({},l.defaults,d);return e.telligent.evolution.template.compile(c.template)(f)}},defaults:{endpoint:"",maxImageWidth:375,maxImageHeight:196,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'}};
e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.preview=l;return{}},jQuery,window);q("module.regex",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.regex={encode:function(e){return e?e.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&"):e}};return{}},jQuery,window);q("module.rest",["lib.globalConfiguration","module.messaging"],function(e,f,g,k,l){function h(a){var b;a:{b=
e.authorizationCookieName+"=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(b)){b=f.substring(b.length,f.length);break a}}b=null}null!=b&&(a.setRequestHeader("Authorization-Code",b),a.setRequestHeader("Rest-Authorization-Code",b));a.setRequestHeader("Rest-UI-Context",e.restUiContext)}function d(a){a&&"~/"==a.substr(0,2)&&(a=e.baseUrl+a.substr(2));return a}function c(a,b,c){var d=a,e=b;d&&(b&&"string"!==typeof b&&
!1!==c.processData)&&(e={},g.each(b,function(a,b){var c=RegExp("{"+a+"}","gim");d.match(c)?d=d.replace(c,k.encodeURIComponent(b)):e[a]=b}));return{url:d,data:e}}function b(a){var b=null,c=[];try{var d=g.isPlainObject(a)?a:JSON.parse(a);d&&(d.Warnings&&g.isArray(d.Warnings)&&0<d.Warnings.length)&&(0<d.Warnings.length&&(b=d.Warnings[0]),c=d.Warnings)}catch(e){}return{single:b,all:c}}function a(a,b){var c=b,d=[];d.push(c);try{var e=g.isPlainObject(a)?a:JSON.parse(a);e&&(e.Errors&&g.isArray(e.Errors)&&
0<e.Errors.length)&&(d=[],g.each(e.Errors,function(a,b){b&&0<b.length&&d.push(b.replace(y,""))}),0<d.length&&(c=d[0]))}catch(f){}return{single:c,all:d}}function n(n,p){var k=c(n.url,n.data,n);n.url=d(k.url);n.data=k.data;var s=n.beforeSend,r=n.error,w=n.warning,v=n.success,z=g.extend({},{defaultErrorMessage:e.defaultErrorMessage},n);g.extend(n,{type:"GET"===p?p:"POST",beforeSend:function(a){s!==l&&s(a);h(a);"PUT"!==p&&"DELETE"!==p||a.setRequestHeader("Rest-Method",p)},success:function(a,c,d){var e=
b(a);v&&m(v,this,[a,c,d]);if(e&&null!=e.single)if(w!==l)m(w,this,[d,e.single]);else try{g.each(e.all,function(a,b){g.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(f){}},error:function(c,d,e){if(0!==c.readyState&&0!==c.status){401!=c.status||n.suppressLogout||f.publish(B,null,{crossWindow:!0});d=a(c.responseText,z.defaultErrorMessage);if(r!==l)m(r,this,[c,d.single,e]);else try{g.each(d.all,function(a,b){g.telligent.evolution.notifications.show(b,{type:"error"})})}catch(h){alert(d.single)}if((e=
b(c.responseText))&&null!=e.single)if(w!==l)m(w,this,[c,e.single]);else try{g.each(e.all,function(a,b){g.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(p){}}}});return g.ajax(n)}function p(){var a=++r;x[a]={dfd:g.Deferred(),reqs:[]};setTimeout(function(){delete x[a]},w);return a}function u(a,b){var e=x[a];if(e===l)return g.Deferred(function(b){b.reject('Batch "'+a+'" not found')}).promise();if(0===e.reqs.length)return e.dfd.resolve(),e.dfd.promise();var n=g.extend({},A,b),p={Sequential:n.sequential};
g.each(e.reqs,function(a,b){var e=b.options.url.replace(/\.xml/i,".json"),e=c(e,b.options.data,b.options);"GET"==b.verb?e.url=g.telligent.evolution.url.modify({url:e.url,query:e.data||{}}).split("#")[0]:p["_REQUEST_"+a+"_DATA"]=g.param(e.data||{});p["_REQUEST_"+a+"_URL"]=d(e.url);p["_REQUEST_"+a+"_METHOD"]=b.verb});g.ajax({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/batch.json",type:"POST",data:p,beforeSend:function(a){n.beforeSend&&n.beforeSend(a);h(a)}}).done(function(b,c){t(e,b.BatchResponses,
this,c);e.dfd.resolveWith(this,[b]);delete x[a]}).fail(function(c,d,h){0!==c.readyState&&0!==c.status&&(401!=c.status||b.suppressLogout||f.publish(B,null,{crossWindow:!0}),c.responseJSON&&c.responseJSON.BatchResponses?t(e,c.responseJSON.BatchResponses,c,d):g.each(e.reqs,function(a,b){b.options.error&&m(b.options.error,b.options,[c,d,h]);b.dfd.rejectWith(b.options,[c,d,h])}),e.dfd.rejectWith(this,[c,d,h]),delete x[a])});return e.dfd.promise()}function t(c,d,e,f){g.each(d,function(d,h){var n=c.reqs[d];
if(200===h.StatusCode){var p=b(h.BatchResponse);n.options.success&&m(n.options.success,n.options,[h.BatchResponse,f,e]);n.dfd.resolveWith(n.options,[h.BatchResponse,f,e]);n.options.complete&&m(n.options.complete,n.options,[e,f]);if(p&&null!=p.single)if(n.options.warning!==l)m(n.options.warning,this,[e,p.single]);else try{g.each(p.all,function(a,b){g.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(k){}}else{p=a(h.BatchResponse,n.options.defaultErrorMessage);if(n.options.error)m(n.options.error,
e,[h,p.single,f]);else try{p.all.forEach(function(a){g.telligent.evolution.notifications.show(a,{type:"error"})})}catch(s){alert(p.single)}n.dfd.rejectWith(e,[h,p.single,f]);n.options.complete&&m(n.options.complete,n.options,[e,f]);if((p=b(h.BatchResponse))&&null!=p.single)if(n.options.warning!==l)m(n.options.warning,this,[e,p.single]);else try{g.each(p.all,function(a,b){g.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(r){}}})}function m(a,b,c){if(a)if(g.isArray(a))for(var d=0;d<
a.length;d++)a[d].apply&&a[d].apply(b,c);else a.apply&&a.apply(b,c)}function s(a,b){null!==z&&(a.batch=z);a&&(a.url&&0<=a.url.indexOf("/api.ashx/")&&"GET"==b)&&(a=g.extend({},{cache:!1},a));if(a&&a.batch){var c=a,d;d=c.batch;x[d]===l&&(d=p());d=x[d];c={options:g.extend({},{defaultErrorMessage:e.defaultErrorMessage},c),verb:b,dfd:g.Deferred()};d.reqs.push(c);return c.dfd.promise()}return n(a,b)}function v(a,b){if(a){if(null!==z)throw"Batched REST requests cannot be nested.";var c=p();z=c;try{a.apply(this)}finally{z=
null}return u(c,b)}}var y=/(?:<|>)/g,x={},r=0,w=6E4,z=null,A={sequential:!1,beforeSend:null},B="_authentication.rest.unauthenticated";v.create=p;v.process=u;var C={get:function(a){return s(a,"GET")},post:function(a){return s(a,"POST")},put:function(a){return s(a,"PUT")},del:function(a){return s(a,"DELETE")},writeAuthorizationHeader:h,ensureRemoteUrlEncoding:d,batch:v};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.extend(g.telligent.evolution,C);k.TelligentUtility||
(k.TelligentUtility={WriteAuthorizationHeader:function(a){g.telligent.evolution.writeAuthorizationHeader(a)}});return C},jQuery,window);q("module.scheduledFile",["lib.globalConfiguration","module.messaging"],function(e,f,g,k,l){function h(){f.subscribe("socket.connected",function(){g.telligent.evolution.sockets.scheduledFile.on("complete",function(b){b.resultKey?(d(b.resultKey,c(b.progressKey,b)).then(function(a){n(c(b.progressKey,b),a.largeResult)}),a(c(b.progressKey))):n(c(b.progressKey,b),b.result)});
g.telligent.evolution.sockets.scheduledFile.on("error",function(a){p(c(a.progressKey,a),a.message)});g.telligent.evolution.sockets.scheduledFile.on("progress",function(a){u(c(a.progressKey,a),a.percentComplete||null,a.message||null)})},{excludeAutoNameSpaces:!0})}function d(a,b){return g.telligent.evolution.post({url:e.scheduledFileStatusUrl,data:{resultKey:a,runAsUserId:b?b.runAsUserId||null:null,presenceId:b?b.presenceId||null:null}})}function c(a,b){var c=s[a];c||(c={key:a,messagesReceived:{}},
b&&(b.runAsUserId&&(c.runAsUserId=b.runAsUserId),b.presenceId&&(c.presenceId=b.presenceId)),s[a]=c);return c}function b(c){clearTimeout(c.fallbackTimeout);c.fallbackTimeout=setTimeout(function(){g.telligent.evolution.post({url:e.scheduledFileStatusUrl,data:{key:c.key,runAsUserId:c?c.runAsUserId||null:null,presenceId:c?c.presenceId||null:null}}).then(function(a){b(c);if(!a)return null;if(a.Log)for(var d=0;d<a.Log.length;d++){var e=a.Log[d];e&&!c.messagesReceived[e]&&u(c,null,e)}"Completed"==a.State?
(a.PercentComplete&&u(c,a.PercentComplete),n(c,a.Result)):"Cancelled"==a.State||"Errored"==a.State?(a.PercentComplete&&u(c,a.PercentComplete),p(c,a.Result)):a.PercentComplete&&u(c,a.PercentComplete)},function(){a(c)})},m)}function a(a){a&&setTimeout(function(){clearTimeout(a.fallbackTimeout);delete s[a.key]},m/2)}function n(b,c){a(b);f.publish("scheduledFile.complete",{progressKey:b.key,percentComplete:1,result:t(c||"")})}function p(b,c){a(b);f.publish("scheduledFile.error",{progressKey:b.key,message:t(c||
"")})}function u(a,c,d){b(a);f.publish("scheduledFile.progress",{progressKey:a.key,percentComplete:c||null,message:d||null});d&&(a.messagesReceived[d]=!0)}function t(a){try{return JSON.parse(a)}catch(b){return a}}var m=5E3,s={};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.scheduledFile={monitor:function(a,d){b(c(a,d))}};return{init:function(){h()}}},jQuery,window);q("module.scriptRendering",["lib.util","events.rendered"],function(e,f,g,k,l){function h(b){return(b.attr("src")||
a.test(b.attr("type")||""))&&!g.contains(k.document.documentElement,b.get(0))}function d(a,b,c){try{var d=g(b);c.scripts=[];d.filter("script").each(function(){var a=g(this);h(a)&&(c.scripts.push(a),a.remove())});d.find("script").each(function(){var a=g(this);h(a)&&(c.scripts.push(a),a.remove())});return 0<c.scripts.length?d=d.filter(function(){var a=g(this);return!(a.is("script")&&h(a))}):b}catch(e){return b}}function c(a,b){if(b.scripts&&0!==b.scripts.length){var c=[],d=[],e=[];g.each(b.scripts,
function(a,b){b.attr("src")?p[b.attr("src")]?d[a]="":c.push(g.telligent.evolution.get({url:b.attr("src"),type:"GET",dataType:"text",success:function(c){d[a]=c+"";e.push(b.attr("src"))},error:function(a,b,c){}})):d[a]=b.get(0).textContent.replace(n,"")});g.when.apply(g,c).then(function(){g.globalEval(d.join("\n;;;\n"));g.each(e,function(a,b){p[b]=!0});f.decrementLoading(a)})["catch"](function(b){f.decrementLoading(a)})}else f.decrementLoading(a)}function b(a){return a?(a=g(a).get(0))?g.contains(document,
a):!1:!1}var a=/^$|\/(?:java|ecma)script/i,n=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,p={};return{initiate:function(){g("script[src]").each(function(){p[g(this).attr("src")]=!0});g.each(["html","append","prepend"],function(a,e){var m=g.fn[e];g.fn[e]=function(){var a=arguments;if(b(this)||b(a)){var e={scripts:[]};f.incrementLoading(this);a[0]=d(this,a[0],e);a=m.apply(this,a);c(this,e);return a}return m.apply(this,a)}})}}},jQuery,window);q("module.shortcuts",["lib.shortcutRegistry"],function(e,f,
g,k){f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});return{init:function(){f.telligent.evolution.shortcuts=f.telligent.evolution.shortcuts||new e}}},jQuery,window);q("module.sockets.connection",function(e,f,g){var k=function(f){k.connectionState=e.signalR.connectionState;var g=e.connection(f.endpoint);return{start:function(d){return g.start(d)},stop:function(){return g.stop()},send:function(d){return g.send(d)},received:function(d){return g.received(d)},error:function(d){return g.error(d)},
stateChanged:function(d){return g.stateChanged(d)},disconnected:function(d){return g.disconnected(d)},reconnected:function(d){return g.reconnected(d)}}};return k},jQuery,window);q("module.sockets.managedConnection",["module.sockets.connection","lib.crossWindowPresentContentRegistrarSingleton","lib.backgroundTimer","module.messaging"],function(e,f,g,k,l,h,d){function c(a){a.reconnectAttempts++;var b=1E3*(Math.pow(2,a.reconnectAttempts)-1);b>a.maxReconnectDelay&&(b=a.maxReconnectDelay,a.reconnectAttempts--);
return Math.floor(Math.random()*(b-1)+1)}function b(a,b){var d=c(a);g.clearTimeout(a.reconnectTimeout);a.reconnectTimeout=g.setTimeout(function(){a.authenticated&&(g.clearTimeout(a.reconnectTimeout),n(a))},d)}function a(a,b,c){if(a.authenticated){var d=a.crossWindowPresentContentRegistrar.getUniqueVisibleContent(),f;f=[];for(var g=0;g<(d||[]).length;g++)f.push(d[g].ContentId+"|"+d[g].ContentTypeId+"|"+d[g].TypeId),f.sort();f="_present:"+f.join(",");a.connectionState!=e.connectionState.connected||
c&&(null==d||0==d.length||a.lastSentPresenceMessage&&f===a.lastSentPresenceMessage)||(b.send(f),a.lastSentPresenceMessage=f)}}function n(a){a.connection.start({callback:function(){a.authenticated=!0}})}function p(c,d){var f=c.connectionState;c.connectionState=d;switch(c.connectionState){case e.connectionState.connected:g.clearTimeout(c.raiseDisconnectTimeout);if(!c.raisedInitialConnect){if(c.raisedInitialConnect=!0,c.onConnected)c.onConnected()}else if(c.raisedInitialConnect&&c.onReconnected)c.onReconnected();
c.reconnectAttempts=0;g.clearInterval(c.presenceInterval);c.presenceInterval=g.setInterval(function(){a(c,c.connection)},c.sendPresenceIntervalTime);l(h).off(t).on("beforeunload"+t,function(){c.unloaded=!0;c.connection.stop()}).on("online"+t,function(){n(c)}).on("wake"+t,function(){n(c)});break;case e.connectionState.connecting:case e.connectionState.reconnecting:case e.connectionState.disconnected:f==e.connectionState.connected&&!c.unloaded&&c.onDisconnected&&(g.clearTimeout(c.raiseDisconnectTimeout),
c.raiseDisconnectTimeout=g.setTimeout(function(){if(c.authenticated)c.onDisconnected(!0)},c.disconnectGracePeriod)),c.connectionState!=e.connectionState.disconnected||c.unloaded||b(c,c.connection)}}var u={endpoint:"",sendPresenceIntervalTime:2E4,reconnectAttempts:0,disconnectGracePeriod:2E3,maxReconnectDelay:3E5,connectionState:0,raisedInitialConnect:!1,reconnectTimeout:0,presenceInterval:null,onReceived:null,onConnected:null,onDisconnected:null,onReconnected:null},t="._sockets_managedConnection";
return function(b){var c=l.extend({},u,b||{});l.ajaxPrefilter(function(a,b,d){0===a.url.indexOf(c.endpoint)&&l.telligent.evolution.writeAuthorizationHeader(d)});c.connection=new e({endpoint:c.endpoint});c.connection.stateChanged(function(a){p(c,a.newState)});c.connection.received(function(a){if(c.onReceived)c.onReceived(a)});c.connection.error(function(a){c.connection.stop()});k.subscribe("user.logout",function(){c.authenticated=!1;c.onDisconnected&&g.setTimeout(function(){c.onDisconnected(!1)},3E3)},
{excludeAutoNameSpaces:!0});return{start:function(a){a.onConnected&&(c.onConnected=a.onConnected);a.onReceived&&(c.onReceived=a.onReceived);a.onDisconnected&&(c.onDisconnected=a.onDisconnected);a.onReconnected&&(c.onReconnected=a.onReconnected);c.crossWindowPresentContentRegistrar||(c.crossWindowPresentContentRegistrar=f.get());n(c)},stop:function(){c.connectionState!=e.connectionState.disconnected&&c.connection.stop()},send:function(a){c.connectionState!=e.connectionState.connected&&c.authenticated||
c.connection.send(a)},sendPresence:function(){a(c,c.connection,!0)}}}},jQuery,window);q("module.sockets","module.messaging module.sockets.managedConnection lib.sharedObjectProxy lib.crossWindowBus lib.backgroundTimer module.presence".split(" "),function(e,f,g,k,l,h,d,c,b){var a={},n,p,u=!1,t=function(){d(document).ready(function(){u?e.publish("socket.reconnected",null,{crossWindow:!0}):(u=!0,n.call("sendPresence"),e.publish("socket.connected",null,null,!0))})},m=function(a){var b=d("body");h.register({node:b.get(0),
contents:a})},s=function(b,c,e){(b=a[b+"|"+c])&&d.each(b,function(a,b){try{b(e||null)}catch(c){}})},v=function(b){d.each(b.sockets,function(b,c){v[c.name]={on:function(b,d){var e=c.fullName+"|"+b;a[e]=a[e]||[];a[e].push(d)},off:function(b){delete a[c.fullName+"|"+b]},send:function(a,b){if(n){var d=JSON.stringify({_s:c.fullName,_m:a,_d:b||null});n.call("send",d)}}}});v.present=function(){null!==p&&p.broadcast("_shared_socket.sendPresence")};0<b.sockets.length&&(p=new k({key:"__rsm",includeLocal:!0,
receive:function(a,c){if("_shared_socket.receive"===a){if(c&&0!=c.length){var d=JSON.parse(c);s(d._s,d._m,d._d)}}else"_shared_socket.socketsReady"===a?(m(b.presentPageContexts),t()):"_shared_socket.socketsDisconnected"===a?e.publish("socket.disconnected",{reconnecting:c.reconnecting},{crossWindow:!0}):"_shared_socket.socketsReconnected"===a?(n.call("sendPresence"),e.publish("socket.reconnected",null,{crossWindow:!0})):"_shared_socket.sendPresence"===a&&n.call("sendPresence")}}),n=new g({heartbeat:200,
key:"_sharedManagedConnection",preexisting:function(a){l.setTimeout(function(){m(b.presentPageContexts);t()},250)},construct:function(){var a=new f({endpoint:b.endpoint});a.start({onConnected:function(){p.broadcast("_shared_socket.socketsReady")},onReceived:function(a){p.broadcast("_shared_socket.receive",a)},onDisconnected:function(a){p.broadcast("_shared_socket.socketsDisconnected",{reconnecting:a})},onReconnected:function(){p.broadcast("_shared_socket.socketsReconnected")}});return a},destroy:function(a){null!==
a&&a.stop()},receive:function(a,b,c){null!==a&&("send"===b?a.send(c):"sendPresence"===b&&a.sendPresence())}}))};v.defaults={};d.telligent=d.telligent||{};d.telligent.evolution=d.telligent.evolution||{};d.telligent.evolution.sockets=d.telligent.evolution.sockets||v;return{}},jQuery,window);q("module.systemNotifications",["lib.storageProxy","module.messaging","events.systemnotifications","module.notifications"],function(e,f,g,k,l,h,d){function c(a){postponedNotifications=s.get(u)||{};postponedNotifications[a]=
(new Date).getTime();s.set(u,postponedNotifications);clearTimeout(y);y=setTimeout(function(){p()},1E3*x.postponeDelay)}function b(a){var b=s.get(u);return b&&b[a]&&(new Date).getTime()-b[a]<1E3*x.postponeDelay?!0:!1}function a(a,d,e){!b(a)&&t&&d&&0<d.length&&0<e?(1<e&&(d+=" "+x.andMoreText.replace(/\{0\}/g,e-1)),d='<div class="system-notification-title">'+x.notificationText+'</div><div class="system-notification-content">'+d+'</div><div class="system-notification-review">'+x.reviewText+"</div>",k.show(d,
{type:"system-notification",duration:6048E5,id:m,onClick:r.openPanel,onClose:function(){c(a)}})):k.hide(m)}function n(){f.subscribe("systemnotification.raised",function(b){v||a(b.id,b.message,b.count)},{excludeAutoNameSpaces:!0});f.subscribe("systemnotification.resolved",function(b){v||a(b.nextid,b.message,b.count)},{excludeAutoNameSpaces:!0})}function p(){return l.telligent.evolution.get({url:l.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/systemnotifications.json",data:{IsResolved:!1,PageSize:v?
100:1,PageIndex:0,SortOrder:"Ascending",SortBy:"LastOccurredDate "}}).then(function(c){var d=c.TotalCount;if(0<d){var e=0<c.SystemNotifications.length?c.SystemNotifications[0]:{};v?c.SystemNotifications.forEach(function(a){b(a.Id)||f.publish("systemnotification.raised",{id:a.Id,message:a.Subject,totaloccurences:a.TotalOccurrences,lastoccurred:a.LastOccurredDate,preexisting:!0})}):a(e.Id,e.Subject,d)}})}var u="systemnotifications",t=!1,m="__systemnotification",s=null,v=!1,y=null,x={explicitPanelUrl:"",
notificationText:"System Notification",reviewText:"Review",andMoreText:" (plus {0} more)",postponeDelay:600},r={configure:function(a){x=l.extend(x,a)},openPanel:function(){h.location.href=x.explicitPanelUrl},suppressRendering:function(a){a!==d&&(v=a);return v},postpone:function(a){c(a)},reset:function(a){postponedNotifications=s.get(u)||{};delete postponedNotifications[a];s.set(u,postponedNotifications)}};l.telligent||(l.telligent={});l.telligent.evolution||(l.telligent.evolution={});l.telligent.evolution.systemNotifications=
r;return l.extend({initiate:function(){n();s=new e({id:l.telligent.evolution.user.accessing.id,isSystemAccount:l.telligent.evolution.user.accessing.isSystemAccount});(t=(t=(t=!h.parent||h==h.parent)&&!l("body").hasClass("administration"))&&!(l.telligent.evolution.user.accessing.isSystemAccount||l.telligent.evolution.user.accessing.isTemporary))&&p();g.initiate()}},r)},jQuery,window);q("module.template",["lib.lruCache","lib.storageProxy","module.javaScript","module.html","lib.util"],function(e,f,g,
k,l,h,d,c){var b={},a={open:"<%",close:"%>"},n=null,p=function(){var a=new f(h.telligent&&h.telligent.evolution&&h.telligent.evolution.user&&h.telligent.evolution.user.accessing?h.telligent.evolution.user.accessing:{isSystemAccount:!0,id:0});return new e({load:function(){return a.get("__templates")},persist:function(b){a.set("__templates",b)}})},u=function(a,b){var c={};return function(a,b){var d=b.open+b.close,e=c[d];e||(e=RegExp("("+l.escapeRegEx(b.open)+"|"+l.escapeRegEx(b.close)+")","g"),c[d]=
e);for(var d=a.split(e),e=!1,f=0;f<d.length;f++)d[f]==b.open?e=!0:d[f]==b.close?e=!1:e||(d[f]=g.encode(d[f]));return d.join("")}}(),t=function(b,c,d){var e=d.get(b);if(!e){e=h.extend({},a,c||{});c=RegExp(l.escapeRegEx(e.open)+"=([\\s\\S]+?)"+l.escapeRegEx(e.close),"g");var f=RegExp(l.escapeRegEx(e.open)+":([\\s\\S]+?)"+l.escapeRegEx(e.close),"g"),g=RegExp(l.escapeRegEx(e.open)+"(.*?)"+l.escapeRegEx(e.close),"g"),e="var s=[];with(data){with(e){with(d){s.push('"+u(b,e).replace(c,"');s.push(String($1));s.push('").replace(f,
"');s.push(escape(String($1)));s.push('").replace(g,"');$1s.push('")+"');}}}return s.join('');";d.set(b,e)}b=new Function("d","e","data",e);b.compiledSource="function(d, e, data) { "+e+" } ";return b},m=function(a){return b[a]};h.extend(m,{compile:function(a,c,d,e){e||(n||(n=p()),e=n);var f=b[a];if("undefined"===typeof f){var g=null!==document.getElementById(a)?document.getElementById(a).innerHTML:a,h=t(g,d,e);b[a]=f=function(a){return h.call(this,m.helpers||{},c||{},a||{})};f.source={raw:g,compiled:h.compiledSource}}return f},
helpers:{foreach:function(a,b){if(a&&0<a.length&&b)for(var c=0;c<a.length;c++)b(a[c],c)},escape:function(a){return k.encode(a)},template:function(a,d){var e=b[a];if(e===c||null===e)throw"Subtemplate "+a+" is undefined.";return e(d)},call:function(a,b){return a(b)}},register:function(a,c){b[a]=function(a){return c.call(this,m.helpers||{},a||{})}}});h.telligent=h.telligent||{};h.telligent.evolution=h.telligent.evolution||{};return h.telligent.evolution.template=m},jQuery,window);q("module.themePreview",
["module.messaging","module.rest"],function(e,f,g,k,l){function h(b){return g.Deferred(function(c){!0===b!=a.isPreviewing?g.telligent.evolution.post({url:a.callbackUrl,data:{Enabled:!0===b}}).then(function(){m=!0;d(!0===b);c.resolve(!0===b)})["catch"](function(){c.reject(a.isPreviewing)}):c.resolve(!0===b)}).promise()}function d(b){if(b!=a.isPreviewing){if(b)k.document.cookie=a.cookieName+"=True; path=/";else{var c=new Date;c.setTime(c.getTime()+-864E5);k.document.cookie=a.cookieName+"=; expires="+
c.toGMTString()}a.isPreviewing=b;p?u=!0:t||k.location.reload(!0)}}function c(){e.subscribe("administration.panel.loaded",function(){p=!0},{excludeAutoNameSpaces:!0});e.subscribe("context.shell.closed",function(){p=!1;m&&(a.isPreviewing&&k.confirm(a.stopPreviewingConfirmation))&&h(!1);u&&!t&&(u=!1,k.location.reload(!0))},{excludeAutoNameSpaces:!0});e.subscribe(n.enabled,function(){d(!0)},{excludeAutoNameSpaces:!0});e.subscribe(n.disabled,function(){d(!1)},{excludeAutoNameSpaces:!0});g(document).on("customizepage",
function(){t=!0})}function b(){k.parent!=k&&(t=!0);g.telligent.evolution.sockets.themepreview&&(g.telligent.evolution.sockets.themepreview.on("preview-updated",function(b){k.clearTimeout(s);s=k.setTimeout(function(){e.publish(n.updated,{});a.isPreviewing&&(p?u=!0:t||k.location.reload(!0))},1E3)}),g.telligent.evolution.sockets.themepreview.on("preview-enabled",function(a){e.publish(n.enabled,{})}),g.telligent.evolution.sockets.themepreview.on("preview-disabled",function(a){e.publish(n.disabled,{})}))}
var a={callbackUrl:null,isPreviewing:!1,previewUrl:"",stopPreviewingConfirmation:"",cookieName:"enable_theme_staging"},n={enabled:"themepreview.enabled",disabled:"themepreview.disabled",updated:"themepreview.updated"},p=!1,u=!1,t=!1,m=!1,s=null;f={enabled:function(b){return b===l?a.isPreviewing:h(b)},configure:function(b){a=g.extend({},a,b)},hasPendingRefresh:function(){return u}};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});g.telligent.evolution.themePreview=f;
return g.extend({initiate:function(){c();b()}},f)},jQuery,window);q("module.tourtips",["module.configuration"],function(e,f,g,k){function l(){function a(b){return f.telligent.evolution.user.accessing.id+":"+b}function b(a){return"tourtip_:"+a}var c=f.telligent.evolution.user.accessing.isSystemAccount?g.sessionStorage:g.localStorage;return{get:function(d){if(c)return JSON.parse(c.getItem(b(a(d))))},set:function(d,e){c&&c.setItem(b(a(d)),JSON.stringify(e))},remove:function(d){c&&c.removeItem(b(a(d)))}}}
function h(){u&&(g.clearTimeout(a),a=g.setTimeout(h,p));var e=[],m=[];f.each(b,function(a,b){var c=t.get(b.key);c&&!c.read?e.push(b):c||m.push(b)});b.length=0;if(0<m.length)if(f.telligent.evolution.user.accessing.isSystemAccount)f.each(m,function(a,b){e.push(b)}),d(e);else{var n={},k=[];f.each(m,function(a,b){k.push(b.key);n[b.key]=b});u=!0;c.list(k).then(function(a){u=!1;f.each(a.TourTips,function(a,b){t.set(b.Key,{read:b.Read});if(!b.Read){var c=n[b.Key];c&&e.push(c)}});d(e)})}else d(e)}function d(a){t=
t||l();var b=t.get(m);b&&0<b&&b>(new Date).getTime()||(a=a.sort(function(a,b){return a.index-b.index}),f.telligent.evolution.messaging.publish("ui.tourtips",{tips:a}))}var c={mark:function(a,b){return(b?f.telligent.evolution.post:f.telligent.evolution.del)({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips/{key}.json?IncludeFields=Key,Read",data:{key:a}})},list:function(a){return f.telligent.evolution.post({url:f.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips.json?IncludeFields=Key,Read",
data:{Keys:a.join(",")}})}},b=[],a,n=0,p=1E3,u=!1,t,m="suppressUntil";f.telligent=f.telligent||{};f.telligent.evolution=f.telligent.evolution||{};f.telligent.evolution.tourTips={register:function(c){f.telligent.evolution.user&&f.telligent.evolution.user.accessing&&(t=t||l(),c&&(c.index==k&&(c.index=n++),b.push(c),g.clearTimeout(a),a=g.setTimeout(h,p)))},mark:function(a,b){t.set(a,{read:b});return f.telligent.evolution.user.accessing.isSystemAccount?f.Deferred(function(a){a.resolve()}).promise():c.mark(a,
b)},suppress:function(a){t=t||l();a&&0<a?t.set(m,(new Date).getTime()+a):t.remove(m)}};return{}},jQuery,window);q("module.ui",["lib.util"],function(e,f,g,k){function l(b){b=f(b||document);for(var e in a.components){var h=a.components[e],k=f(".ui-"+e,b);b.hasClass(".ui-"+e)&&k.add(b);k&&(0<k.length&&"undefined"!==typeof h.setup&&!c[e])&&(h.setup.call(this),c[e]=!0);k&&(0<k.length&&"undefined"!==typeof h.add)&&k.each(function(){try{var b=f(this);b.data(d+"."+e)||(h.add.call(b,b,a.data(b)),b.data(d+
"."+e,!0))}catch(c){g.console&&g.console.log&&g.console.log(c)}})}}function h(a){var c;b++;try{c=a()}catch(d){}b--;return c}var d="_telligent_evolution_ui_render_add",c={},b=0,a={components:{},render:l,suppress:h,defer:function(a,b){var c=h(b);l(a);return c},data:function(a){if(!a)return{};a=f(a);var b=a.data("_telligent_evolution_ui_data");if(null===b||"undefined"===typeof b){var b=a.get(0),c={};if(b.dataset)c=b.dataset;else for(var d=0;d<b.attributes.length;d++){var e=b.attributes[d];if(0===e.name.indexOf("data-")){var g=
e.name.substring(5);c[g]=e.value}}c.configuration&&(c=f.extend({},c,{configuration:f.telligent.evolution.url.parseQuery(c.configuration)}));b=c;a.data("_telligent_evolution_ui_data",b)}return b}};f.telligent||(f.telligent={});f.telligent.evolution||(f.telligent.evolution={});f.telligent.evolution.ui=a;return f.extend({initiate:function(){f.each(["html","append","prepend"],function(a,c){f.fn[c]=e.wrap(f.fn[c],{after:function(){0==b&&f.telligent.evolution.ui.render(this)}})});f.each(["after","before"],
function(a,c){f.fn[c]=e.wrap(f.fn[c],{after:function(){0==b&&f.telligent.evolution.ui.render(this.parent())}})});f.each(["replaceWith"],function(a,c){f.fn[c]=e.wrap(f.fn[c],{filterArguments:function(a){return f(a)[0]?[f(a)]:[a]},after:function(a){0==b&&f.telligent.evolution.ui.render(a)}})})}},a)},jQuery,window);q("module.url",function(e,f,g){var k=null,l=function(c,b,a,d,e){if(!c)return c;var f=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(c);return c.replace(b,function(b,g,h){if(" "==b)return a;
if("."!=b||f||h==c.length-1||"."==c.substr(h+1,1)){g=[];g[g.length]=e;for(h=0;h<b.length;h++){var k=b.charCodeAt(h).toString(16)+"",l=k.length;4==l?(g.push(k.substr(2,2).toUpperCase()),g.push(k.substr(0,2).toUpperCase())):3==l?(g.push(k.substr(1,2).toUpperCase()),g.push("0"),g.push(k.substr(0,1).toUpperCase())):2==l&&(g.push(k.toUpperCase()),g.push("00"))}g[g.length]=e;return g.join("")}return d})},h=function(c,b,a,d){return c?c.replace(b,function(b,c,e){if(1==b.length){if(b==a)return" ";if(b==d)return"."}else{b=
b.substr(1,b.length-2);if(0!=b.length%4)return"";c=[];for(e=0;e<b.length;e+=4)c[c.length]=String.fromCharCode(parseInt(b.substr(e+2,2)+b.substr(e,2),16));return c.join("")}}):c},d={parseQuery:function(c){var b=c.split("?"),a={};c=(1<b.length?b[1]:c).split("#")[0].split("&");e.each(c,function(b,c){c=c.split("=");2===c.length&&(a[decodeURIComponent(c[0].replace(/\+/gi," "))]=decodeURIComponent(c[1].replace(/\+/gi," ")))});return a},serializeQuery:function(c){c=c||{};var b=[];e.each(c,function(a,c){if(null!=
c&&"function"===typeof c.toISOString)c=c.toISOString();else if(null==c||c==g)c="";b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)});return b.join("&")},modify:function(c){c=e.extend({url:f.location.href,query:null,hash:f.location.hash,protocol:f.location.protocol},c);var b=[c.url.split("?")[0].split("#")[0]],a;"string"===typeof c.query&&(c.query=d.parseQuery(c.query));(a=d.serializeQuery(e.extend(d.parseQuery(c.url),c.query)))&&0<a.length&&(b[b.length]="?"+a);c.hash&&0<c.hash.length&&
(b[b.length]=(0!==c.hash.indexOf("#")?"#":"")+c.hash);return b.join("")},hashData:function(c,b){var a=!1,g="";e.isPlainObject(b)?(a=b.overrideCurrent,g=b.prefix||""):a=b;if(g){var h={},k;for(k in c)h[g+k]=c[k];c=h}if("undefined"===typeof c||"string"===typeof c){a="string"===typeof c?c:f.location.href;c={};var a=a.split("#"),l="";2<a.length&&(e.each(a,function(a,b){0<a&&(1<a&&(l+="#"),l+=b)}),a=[a[0],l]);2===a.length&&(c=d.parseQuery(a[1]));return c}a||(c=e.extend(d.hashData(),c));f.location.href=
f.location.href.split("#")[0]+"#"+d.serializeQuery(c)},encode:function(c){return encodeURIComponent(c)},decode:function(c){return decodeURIComponent(c)},encodePathComponent:function(c){return l(c,/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(c){return h(c,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(c){return l(c,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(c){return h(c,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,
"-",".")},navigateTo:function(c){var b=e("base");if(0<b.length){k||(k=e("<a></a>").css({position:"absolute",left:"-1000px"}),e("body").append(k));var a=k.attr({href:c})[0];try{f.document.createEvent?a.dispatchEvent(function(a){a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);return a}(document.createEvent("MouseEvents"))):a.dispatchEvent(new MouseEvent("click",{view:f,bubbles:!0,cancelable:!0}))}catch(d){(b=b.attr("target"))?f.open(c,b):f.document.location=c}}else f.document.location=
c}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});return e.telligent.evolution.url=d},jQuery,window);q("plugins","plugin.dynamicForm plugin.evolutionBookmark plugin.evolutionComposer plugin.evolutionFeature plugin.evolutionHighlight plugin.evolutionInlineTagEditor plugin.evolutionLike plugin.evolutionModerate plugin.evolutionPager plugin.evolutionResize plugin.evolutionStarRating plugin.evolutionTagTextBox plugin.evolutionTheater plugin.evolutionToggleLink plugin.evolutionTransform plugin.evolutionUserFileTextBox plugin.validation plugin.evolutionTextEditor plugin.evolutionScrollSlider plugin.evolutionMasonry plugin.evolutionTip plugin.evolutionTokenTextBox plugin.evolutionVote plugin.evolutionSqueezeText plugin.evolutionCodeEditor plugin.evolutionThreadReplies plugin.evolutionHtmlEditor plugin.evolutionProgressIndicator plugin.evolutionScrollable".split(" "),
function(){return{}});q("plugin.dynamicForm",function(e,f,g){var k=function(b){return e(b).data("dynamicForm")||{}},l=function(b,a){e(b).data("dynamicForm",a)},h=function(b){null!=b&&"function"===typeof b.toISOString&&(b.toString=b.toISOString);return b},d=function(b){return this.each(function(){l(this,e.extend(!0,{},{legacyStateRegistered:!1,fields:{}},k(this),b,{initialized:!0}))})},c={commitState:function(){var b=k(this);null!=b&&e.each(b.fields,function(a,b){b&&(b.v&&b.sid)&&e("#"+b.sid).val(h(b.v()))})},
registerState:function(b,a){var c=this,d=k(c);d.fields||(d.fields={});var f=d.fields[b];null==f&&(f=d.fields[b]={});f.sid=a;f.onchange||(f.onchange=[]);f.onchange.splice(0,0,function(a){e("#"+f.sid).val(a.val)});if(!d.legacyStateRegistered){var g=e(c).closest("form"),m=g[0].onsubmit;g[0].onsubmit=function(){var a=k(c);null!=a&&e.each(a.fields,function(a,b){b&&(b.v&&b.sid)&&e("#"+b.sid).val(h(b.v()))});return m?m():!0};d.legacyStateRegistered=!0}l(c,d)},register:function(b){var a=k(this);a.fields||
(a.fields={});var c=a.fields[b.id];null==c&&(c=a.fields[b.id]={});b.hasValue&&(c.hasValue=b.hasValue);b.val&&(c.v=b.val);l(this,a)},changed:function(b,a){var c=k(this),d=!1;c&&c.onchange&&(d||(a=h(a),d=!0),e.each(c.onchange,function(c,d){d({id:b,val:a})}));c&&(c.fields&&c.fields[b]&&c.fields[b].onchange)&&(d||(a=h(a),d=!0),e.each(c.fields[b].onchange,function(c,d){d({id:b,val:a})}))},onChange:function(b,a){var c=k(this);if("function"===typeof b)c.onchange||(c.onchange=[]),c.onchange.push(b);else{if(!Array.isArray(b)){var d=
[];null!=b&&d.push(b);b=d}c.fields||(c.fields={});e.each(b,function(b,d){var e=c.fields[d];e||(e=c.fields[d]={});e.onchange||(e.onchange=[]);e.onchange.push(a)})}l(this,c)},dataType:function(b){var a=k(this);return a&&a.fields&&a.fields[b]&&a.fields[b].t?a.fields[b].t:null},val:function(b,a){var c=k(this);return c&&c.fields&&c.fields[b]&&c.fields[b].v?h(c.fields[b].v(a)):null},hasValue:function(b){if(!Array.isArray(b)){var a=[];null!=b&&a.push(b);b=a}var c=0,d=k(this);if(!d.fields)return!1;e.each(b,
function(a,b){var e=d.fields[b];e&&(e.hasValue&&e.hasValue())&&c++});return c==b.length},hide:function(b,a){if(!Array.isArray(b)){var c=[];null!=b&&c.push(b);b=c}var d=k(this);if(!d.fields)return!1;e.each(b,function(b,c){var f=d.fields[c];f&&f.uid&&(f.hiddenBy||(f.hiddenBy=[]),0>f.hiddenBy.indexOf(a)&&f.hiddenBy.push(a),e("#"+f.uid).hide())});l(this,d)},show:function(b,a){if(!Array.isArray(b)){var c=[];null!=b&&c.push(b);b=c}var d=k(this);d.fields&&(e.each(b,function(b,c){var f=d.fields[c];if(f&&
f.uid){f.hiddenBy||(f.hiddenBy=[]);var g=f.hiddenBy.indexOf(a);0<=g&&f.hiddenBy.splice(g,1);0==f.hiddenBy.length&&e("#"+f.uid).show()}}),l(this,d))},getValues:function(){var b=k(this),a={};e.each(b.fields,function(b,c){c&&c.v&&(a[b]=h(c.v()))});return a},getValue:function(b){return c.val.apply(this,[b])},getType:function(b){return c.dataType.apply(this,[b])}};e.fn.dynamicForm=function(b){if(b in c)return c[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)e.error("Method "+
b+" does not exist on jQuery.fn.dynamicForm");else return d.apply(this,arguments)};return{}},jQuery,window);q("plugin.evolutionBookmark",function(e,f,g){var k=function(b){b.toggle=e("<a></a>").attr({href:"#"});b.element.append(b.toggle);b.toggle.evolutionToggleLink({onHtml:e.telligent.evolution.html.encode(l(b,b.settings.deleteBookmarkText)),offHtml:e.telligent.evolution.html.encode(l(b,b.settings.addBookmarkText)),processingHtml:e.telligent.evolution.html.encode(l(b,b.settings.processingText)),changeState:function(a){d(a,
b)},onTitle:"",offTitle:"",processingTitle:"",onCssClass:b.settings.deleteBookmarkCssClass,offCssClass:b.settings.addBookmarkCssClass,processingCssClass:b.settings.processingCssClass,val:b.settings.initialState})},l=function(b,a){return a.replace(/\{content_type_name\}/gi,b.settings.contentTypeName)},h=function(b,a){e.telligent.evolution.messaging.publish("ui.bookmark",{contentId:b.settings.contentId,contentTypeId:b.settings.contentTypeId,typeId:b.settings.typeId,bookmarked:a},{crossWindow:!0})},
d=function(b,a){if(b)a.settings.onBookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){h(a,!0)});else a.settings.onUnbookmark(a.settings.contentId,a.settings.contentTypeId,a.settings.typeId,function(){h(a,!1)})},c=function(b){e.telligent.evolution.messaging.subscribe("ui.bookmark",function(a){a.contentId===b.settings.contentId&&a.contentTypeId===b.settings.contentTypeId&&a.typeId===b.settings.typeId&&b.toggle&&b.toggle.evolutionToggleLink("val",a.bookmarked)})};e.fn.evolutionBookmark=
function(b){var a=e.extend({},e.fn.evolutionBookmark.defaults,b||{});return this.each(function(){var b={element:e(this),toggle:null,settings:a};k(b);c(b)})};e.fn.evolutionBookmark.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,contentTypeName:"",onBookmark:function(b,a,c,d){},onUnbookmark:function(b,a,c,d){},deleteBookmarkText:"Unbookmark {content_type_name}",addBookmarkText:"Bookmark this {content_type_name}",processingText:"...",addBookmarkCssClass:"internal-link favorite-off",
deleteBookmarkCssClass:"internal-link favorite-on",processingCssClass:"internal-link processing"};return{}},jQuery,window);q("plugin.evolutionCodeEditor",["lib.util"],function(e,f,g,k){function l(a){if(!a)return a;var b=a.split("/");return 2>=b.length?b:"ace.js"!=b.pop()?a:b.join("/")}function h(a){if(!a)return a;a=a.replace(/\/snippets\//gi,"-snippets/");var b=a.split("/");if(2>=b.length)return a;f.each(w,function(a,c){b[b.length-1]=b[b.length-1].replace(a,c)});return b.join("/")}function d(a){return f.ajax({url:a,
dataType:"script",cache:!0}).then(function(){ace.config.set("basePath",l(a));var b=ace.config.moduleUrl;ace.config.moduleUrl=function(a,c){return h(b.apply(this,arguments))}})}function c(a){a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),right:a.wrapper.css("right")};if(!a.expanded){a.wrapper.addClass("maximized");a.expanded=
!0;f("body").css({overflow:"hidden"});a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),right:a.wrapper.css("right")};var b={width:"100%",height:"100%",position:"fixed",zIndex:2E4,left:0,top:0,bottom:0,right:0};a.wrapper.css(b);var c=a.wrapper.get(0);c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():
c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);a.originalDimensions={maxLines:a.editor.renderer.$maxLines,minLines:a.editor.renderer.$minLines,desiredHeight:a.editor.renderer.$desiredHeight};delete a.editor.renderer.$maxLines;delete a.editor.renderer.$minLines;delete a.editor.renderer.desiredHeight;a.wrapper.find(".ace_editor, .ace_content").css({width:"100%",height:"100%"});a.editor.resize();a.diffing&&(a.originalDiffContainerStyling=
{left:a.diffContainer.css("left"),top:a.diffContainer.css("top"),width:a.diffContainer.css("width"),height:a.diffContainer.css("height"),position:a.diffContainer.css("position")},a.diffContainer.css(b),a=a.differ.getEditors(),delete a.left.renderer.$maxLines,delete a.left.renderer.$minLines,delete a.left.renderer.desiredHeight,delete a.right.renderer.$maxLines,delete a.right.renderer.$minLines,delete a.right.renderer.desiredHeight,a.left.resize(),a.right.resize())}}function c(a){if(!a.expanded){a.wrapper.addClass("maximized");
a.expanded=!0;f("body").css({overflow:"hidden"});a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),right:a.wrapper.css("right")};var b={width:"100%",height:"100%",position:"fixed",zIndex:2E4,left:0,top:0,bottom:0,right:0};a.wrapper.css(b);if(a.supportsTrueFullScreen){var c=a.wrapper.get(0);c.requestFullscreen?c.requestFullscreen():
c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}a.originalDimensions={maxLines:a.editor.renderer.$maxLines,minLines:a.editor.renderer.$minLines,desiredHeight:a.editor.renderer.$desiredHeight};delete a.editor.renderer.$maxLines;delete a.editor.renderer.$minLines;delete a.editor.renderer.desiredHeight;a.wrapper.find(".ace_editor, .ace_content").css({width:"100%",height:"100%"});
a.editor.resize();a.diffing&&(a.originalDiffContainerStyling={left:a.diffContainer.css("left"),top:a.diffContainer.css("top"),width:a.diffContainer.css("width"),height:a.diffContainer.css("height"),position:a.diffContainer.css("position")},a.diffContainer.css(b),a=a.differ.getEditors(),delete a.left.renderer.$maxLines,delete a.left.renderer.$minLines,delete a.left.renderer.desiredHeight,delete a.right.renderer.$maxLines,delete a.right.renderer.$minLines,delete a.right.renderer.desiredHeight,a.left.resize(),
a.right.resize())}}function b(a){if(a.expanded&&(a.originalStyling&&a.originalDimensions)&&(a.supportsTrueFullScreen&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),a.wrapper.removeClass("maximized"),a.expanded=!1,f("body").css({overflow:"auto"}),a.wrapper.css(a.originalStyling),a.editor.renderer.$maxLines=a.originalDimensions.maxLines,
a.editor.renderer.$minLines=a.originalDimensions.minlines,a.editor.renderer.desiredHeight=a.originalDimensions.desiredHeight,a.editor.resize(),a.diffing)){a.diffContainer.css(f.extend(a.originalDiffContainerStyling,{position:"absolute",top:0,left:0,zIndex:7}));var b=a.differ.getEditors();b.left.renderer.$maxLines=a.originalDimensions.maxLines;b.left.renderer.$minLines=a.originalDimensions.minlines;b.left.renderer.desiredHeight=a.originalDimensions.desiredHeight;b.right.renderer.$maxLines=a.originalDimensions.maxLines;
b.right.renderer.$minLines=a.originalDimensions.minlines;b.right.renderer.desiredHeight=a.originalDimensions.desiredHeight;b.left.resize();b.right.resize()}}function a(a){a.expanded=!1;a.fullScreenToggle.on("click",function(d){d.preventDefault();a.expanded?b(a):c(a);return!1})}function n(a,b){clearTimeout(a.setLineNumberTimeout);a.setLineNumberTimeout=setTimeout(function(){a.editor.resize(!0);a.editor.gotoLine(b,0,!0);a.editor.scrollToLine(b,!0,!0,function(){});a.diffing&&!diffSourced&&(a.differ.getEditors().right.resize(!0),
a.differ.getEditors().right.gotoLine(b,0,!0),a.differ.getEditors().right.scrollToLine(b,!0,!0,function(){}))},50)}function p(a){return a?a.replace(/\r\n/g,"\n").replace(/^((?:\s*\n)*)/,"").replace(/((?:\n\s*)*)$/,""):a}function u(a,b,c){c||(a.suppressChangeEvent=!0,g.clearTimeout(a.suppressChangeTimeout),a.suppressChangeTimeout=g.setTimeout(function(){a.suppressChangeEvent=!1},100));a.editor.setValue(p(b),-1);a.isTextArea&&a.sourceElement.val(b);a.diffing&&!c&&a.differ.getEditors().right.setValue(p(b),
-1)}function t(a){a.suppressChangeEvent||(a.sourceElement.trigger("evolutionCodeEditorChange"),a.isTextArea&&a.sourceElement.val(a.editor.getValue()).change())}function m(a){a.completerAdded&&(y=a,ace.config.loadModule("ace/ext/language_tools",function(b){y===a&&(b.setCompleters([b.snippetCompleter,b.textCompleter]),a.completerAdded=!1)}))}function s(a){a.autoComplete&&(y=a,ace.config.loadModule("ace/ext/language_tools",function(b){if(y===a){var c={enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};
if(a.differ){var d=a.differ.getEditors();d&&d.right&&d.right.setOptions(c)}a.editor&&a.editor.setOptions(c);a.autoComplete&&(b.setCompleters([b.snippetCompleter,b.textCompleter]),b.addCompleter({identifierRegexps:[/[a-zA-Z_0-9#\.\$\-\u00A2-\uFFFF]/],getCompletions:function(b,c,d,e,f){a.autoComplete({editor:b,session:c,pos:d,prefix:e}).then(function(a){f(null,a.results)})},getDocTooltip:function(a){a.doc&&!a.docHTML&&(a.docHTML=a.doc)}}),a.completerAdded=!0)}}))}function v(a){if(A[a])return A[a];var b=
a;a=(a||"").toLowerCase();a=a.replace(/[+-]/ig," ");a=a.replace(/ctrl/ig,"control");a=a.replace(/(opt|alt)/ig,"option");a=a.replace(/shft/ig,"shift");a=a.replace(/(cmd|meta)/ig,"command");a=f.trim(a.split(" ").sort().join(" "));return A[b]=a}var y=null,x=!1,r=!1,w={_:"_5F00_","-":"_2D00_"},z={light:"clouds",dark:"fusion"},A={},B={init:function(c){var e=f.extend({},f.fn.evolutionCodeEditor.defaults,c||{});!1===x&&(x=d(e.editorUrl));e.baseUrl=l(e.editorUrl);return this.each(function(){var c=f(this).data("_code_editor_context"),
d=!1;c||(d=!0,c={},f(this).data("_code_editor_context",c));f.extend(c,e);c.sourceElement=f(this).hide();c.supportsTrueFullScreen=(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)&&(this.requestFullscreen||this.msRequestFullscreen||this.mozRequestFullScreen||this.webkitRequestFullscreen);var h;if(h=!c.supportsTrueFullScreen)try{h=g.self!==g.top}catch(l){h=!0}h&&(c.enableFullScreen=!1);f(document).on("mozfullscreenchange webkitfullscreenchange fullscreenchange MSFullscreenChange",
function(){document.fullscreenElement||(document.webkitFullscreenElement||document.mozFullScreenElement)||b(c)});x.then(function(){var b=c.theme||"light";z[b]!==k&&(c.theme=z[b]);c.editorOptions={mode:0===(c.mode||"text").indexOf("ace/mode/")?c.mode||"text":"ace/mode/"+(c.mode||"text"),theme:0===(c.theme||"light").indexOf("ace/theme/")?c.theme||"light":"ace/theme/"+(c.theme||"light"),showGutter:c.gutter===k?!0:c.gutter,showPrintMargin:!1,wrap:c.wordWrap};b=0<(c.sourceElement.attr("style")||"").length;
c.isTextArea=c.sourceElement.is("textarea");c.readOnly===k&&(c.readOnly=!c.isTextArea);c.minLines===k||b||(c.editorOptions.minLines=c.minLines);c.maxLines&&!b?(c.editorOptions.maxLines=c.maxLines,c.editorOptions.autoScrollEditorIntoView=!0):(delete c.editorOptions.maxLines,delete c.editorOptions.autoScrollEditorIntoView);c.readOnly?f.extend(c.editorOptions,{readOnly:!0,highlightGutterLine:!1,highlightActiveLine:!1}):f.extend(c.editorOptions,{readOnly:!1,highlightGutterLine:!0,highlightActiveLine:!0});
d&&(b=f.grep((c.sourceElement.attr("class")||"").split(" "),function(a){return 0!==a.indexOf("ui-")}).join(" "),c.wrapper=f("<div></div>").hide().addClass("evolution-code-editor").addClass(b).attr("style",c.sourceElement.attr("style")).insertBefore(c.sourceElement),c.enableFullScreen&&(c.fullScreenToggle=f('<a href="#" class="fullscreen">Fullscreen</a>'),c.fullScreenToggle.appendTo(c.wrapper),a(c)),c.innerElement=f("<div></div>").appendTo(c.wrapper).css({width:"100%",height:"100%"}).show(),c.isTextArea?
c.innerElement.text(p(c.sourceElement.val())):c.innerElement.text(p(c.sourceElement.text())),c.editor=ace.edit(c.innerElement.get(0)),c.wrapper.show(),c.editor.on("change",function(a){t(c)}),c.editor.on("focus",function(a){s(c)}),c.editor.on("blur",function(a){m(c)}),f.each({right:"gotoright",left:"gotoleft",up:"golineup",down:"golinedown"},function(a,b){var d=c.editor.commands.commands[b];c.editor.commands.removeCommand(d);var e=d.exec;c[a]&&(d.exec=function(){c[a].apply(this,c.sourceElement)&&e.apply(this,
arguments)});c.editor.commands.addCommand(d)}),f.each(e.commandOverrides,function(a,b){c.editor.commands.on("exec",function(c){c.command&&(c.command.bindKey&&(v(c.command.bindKey.mac)==v(a)||v(c.command.bindKey.win)==v(a)))&&(b()||c.preventDefault())})}));b=f.grep(c.wrapper.attr("class").split(" "),function(a){return 0!==a.indexOf("theme-")}).join(" ");c.wrapper.attr("class",b);c.wrapper.addClass("theme-"+c.theme);c.editor.setOptions(c.editorOptions);if(d&&!c.editorOptions.maxLines){var g=!c.wrapper.is(":visible"),
h;g&&(h=c.wrapper.parentsUntil(":visible").last(),h.show());b=c.wrapper.height();g&&h.hide();32>b&&(c.editorOptions.minLines=c.minLines||1,c.editorOptions.maxLines=c.maxLines||20,c.editor.setOptions(c.editorOptions))}c.sourceComparison!==k&&null!==c.sourceComparison?(c.sourceComparison=p(c.sourceComparison),c.diffing=!0,!1===r&&(h=e.editorUrl.replace(/ace.js$/,"acediff.js"),b=e.editorUrl.replace(/ace.js$/,"diffmatchpatch.js"),r=f.when.apply(f,[f.ajax({url:h,dataType:"script",cache:!0}),f.ajax({url:b,
dataType:"script",cache:!0})])),r.then(function(){if(c.differ)e=c.differ.getEditors(),e.left.setValue(p(c.sourceComparison),-1),e.right.setOptions(c.editorOptions),e.left.setOptions(c.editorOptions),e.left.setReadOnly(!0),e.right.setReadOnly(c.readOnly);else{c.wrapper.css({position:"relative"});var a="left"+Math.floor(1E8*Math.random()),b="left"+Math.floor(1E8*Math.random()),d="left"+Math.floor(1E8*Math.random());c.diffContainer=f('<div class="acediff-container"><div><div id="'+a+'" class="acediff-left-editor"></div></div><div id="'+
b+'" class="acediff-gutter"></div><div><div id="'+d+'" class="acediff-right-editor"></div></div></div>');c.diffContainer.css({position:"absolute",top:0,left:0,width:c.wrapper.width(),height:c.wrapper.height(),zIndex:6});c.diffContainer.appendTo(c.wrapper);c.differ=new AceDiff({mode:c.editorOptions.mode,theme:c.editorOptions.theme||"light",left:{id:a,content:p(c.sourceComparison),editable:!1,copyLinkEnabled:c.readOnly?!1:!0},right:{id:d,content:p(c.editor.getValue()),copyLinkEnabled:!1,editable:c.readOnly?
!1:!0},classes:{gutterID:b}});var e=c.differ.getEditors();e.right.on("change",function(a){a=e.right.getValue();u(c,a,!0);t(c)})}})):c.diffing?(c.diffing=!1,h=c.differ.getEditors(),b=h.right.getValue(),h.left.destroy(),h.right.destroy(),c.differ.destroy(),c.diffContainer.remove(),c.suppressChangeEvent=!0,c.editor.setValue(p(b),-1),c.suppressChangeEvent=!1,delete c.differ,delete c.diffContainer):c.diffing=!1;c.line&&n(c,c.line);c.sourceElement.trigger("evolutionCodeEditorReady")})})},focus:function(a){var b=
f(this).data("_code_editor_context");return b?(a!==k&&(!0===a?b.editor.focus():b.editor.blur()),b.diffing?b.differ.getEditors().right.isFocused():b.editor.isFocused()):!1},val:function(a){var b=f(this).data("_code_editor_context");return b?a!==k?(u(b,a||""),a):b.editor.getValue():""},scrollTop:function(a){var b=f(this).data("_code_editor_context");return b?a!==k?(b.editor.session.setScrollTop(a),b.diffing&&!diffSourced&&b.differ.getEditors().right.session.setScrollTop(a),a):b&&b.editor&&b.editor.session?
b.editor.session.getScrollTop():0:0},wordWrap:function(a){var b=f(this).data("_code_editor_context");return b?a!==k?(b.editor.setOption("wrap",a),a):b.editor.getOption("wrap"):!1},line:function(a){var b=f(this).data("_code_editor_context");return b?a!==k?(n(b,a||""),a||1):(b.editor.getSelectionRange().start.row||0)+1:1},autoComplete:function(a){var b=f(this).data("_code_editor_context");b&&(b.autoComplete=a,s(b))},fullscreen:function(a){var d=f(this).data("_code_editor_context");if(d)return a!==k?
(a?c(d):b(d),a):d.expanded},selectedText:function(){var a=f(this).data("_code_editor_context");return a?a.editor.getSelectedText():""},__resize:function(){var a=this,b=f(a).data("_code_editor_context"),c=function(){b&&b.editor&&(b.diffing?(b.differ.getEditors().right.resize(),b.differ.getEditors().left.resize()):b.editor.resize())};if(b)c();else f(a).one("evolutionCodeEditorReady",function(){b=f(a).data("_code_editor_context");c()})}};f.fn.evolutionCodeEditor=function(a){if(B[a])return B[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)f.error("Method "+a+" does not exist on jQuery.evolutionCodeEditor");else return B.init.apply(this,arguments)};f.fn.evolutionCodeEditor.defaults={editorUrl:"",mode:k,theme:k,minLines:k,maxLines:k,readOnly:k,gutter:k,wordWrap:!1,enableFullScreen:!0,sourceComparison:k,autoComplete:k,commandOverrides:{}};return{}},jQuery,window);q("plugin.evolutionComposer",["events.textinput","module.html"],function(e,f,g,k,l){var h=function(a,b){a=
g(a);var c=a.data("__COMPOSER_CONTEXT");!c&&b&&(c=d(a,b),a.data("__COMPOSER_CONTEXT",c));return c},d=function(a,d){var e=g.extend({},g.fn.evolutionComposer.defaults,d||{}),e={input:a,settings:e,plugins:g.map(e.plugins,function(a){return"string"==typeof a?g.fn.evolutionComposer.plugins[a]:a}),ranges:[],activePlugin:!1};e.pluginContext=c(e);e.input.evolutionHighlight();b(e);return e},c=function(a){return{settings:a.settings,input:a.input,data:function(b,c){return"undefined"!==typeof c?a.input.data(b,
c):a.input.data(b)},val:function(b){return"undefined"!==typeof b?a.input.val(b):a.input.val()},release:function(){a.activePlugin.onDeactivate&&a.activePlugin.onDeactivate.call(a.input,a.pluginContext);a.activePlugin=!1},caretPosition:function(){return m(a.input)},currentWord:function(b){b=g.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},b||{});var c=b.caretPosition||m(a.input),d="",e=g(a.input).val(),f="",h=0,n=c,k=0;if(c<e.length&&"\n"!==e[c]&&"\t"!==e[c]){f=e.substring(c);
h=u(f);0>h&&(h=f.indexOf("\n"));0>h&&(h=f.indexOf("\t"));0>h&&(h=f.length);for(k=0;k<b.allowedWhiteSpaceAfterCaret;k++)if(0<h){var l=e.substring(c+h+1);nextWhiteSpaceIndex=u(l);nextWhiteSpaceIndex=-1===nextWhiteSpaceIndex?l.length:nextWhiteSpaceIndex;if(0<nextWhiteSpaceIndex)h+=nextWhiteSpaceIndex+1;else break}0<h&&(n=0,d+=f.substring(0,h))}if(0<c&&"\n"!==e[c-1]&&"\t"!==e[c-1]){f=e.substring(0,c);h=t(f);for(k=0;k<b.allowedWhiteSpaceBeforeCaret;k++)if(0<h)if(c=t(e.substring(0,h)),c!==h)h=c;else break;
h===f.length&&(h=f.lastIndexOf("\n"));h===f.length&&(h=f.lastIndexOf("\t"));h===f.length&&(h=f.length-1);h<f.length-1&&(n=h+1,d=f.substring(n)+d)}if(b.additionalWhiteSpaceSymbols)for(k=0;k<d.length;k++)if(-1==g.inArray(d[k],b.additionalWhiteSpaceSymbols)){d=d.substring(k);n+=k;break}return{value:d,start:n,stop:n+d.length}},replace:function(b,c,d){var e=a.input.val();a.input.val(e.substring(0,b)+d+e.substring(c))},clearHighlights:function(b){var c=[];g.each(a.ranges,function(a,d){b&&d.className===
b||c.push(d)});a.ranges=c;a.input.evolutionHighlight({ranges:a.ranges})},addHighlight:function(b){a.ranges.push(b)},renderHighlights:function(){a.input.evolutionHighlight({ranges:a.ranges})}}},b=function(b){b.input.on({keypress:function(c){a(b,"onkeypress",c)},keydown:function(c){a(b,"onkeydown",c)},textinput:function(c){n(b,c);a(b,"oninput",c);p(b,!1)}})},a=function(a,b,c){var d=!0;a.activePlugin&&a.activePlugin[b]&&(d=a.activePlugin[b].call(c.target,a.pluginContext,c));d?a[b]&&((d=a[b].call(c.target,
c))||c.preventDefault()):c.preventDefault()},n=function(a,b){a.activePlugin||g.each(a.plugins,function(b,c){if(c.shouldActivate&&!0===c.shouldActivate.call(a.input,a.pluginContext))return a.activePlugin=c,c.onActivate&&c.onActivate.call(a.input,a.pluginContext),!1})},p=function(a,b){g.each(a.plugins,function(c,d){d.onTransform&&d.onTransform.call(a.input,a.pluginContext,b)})},u=function(a){var b=[];g.each([" ","\t","\n"],function(c,d){var e=a.indexOf(d);0<=e&&b.push(e)});b.sort();return 0<b.length?
b[0]:-1},t=function(a){var b=[];g.each([" ","\t","\n"],function(c,d){var e=a.lastIndexOf(d);0<=e&&b.push(e)});b.sort();return 0<b.length?b[b.length-1]:-1},m=function(a){a=a.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){var b=document.selection.createRange();if(null===b)return 0;a=a.createTextRange();var c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0},s=function(a){if("undefined"!==typeof g.fn.evolutionResize)a.input.evolutionResize().on("evolutionResize",
function(){a.input.evolutionHighlight("resize",a.input.width(),a.input.height())})},v={init:function(a){return this.filter("textarea").each(function(){var b=g(this),c=h(b,a);s(c);c.input.evolutionHighlight("resize",c.input.width(),c.input.height());if(null!==c){g.each(c.plugins,function(a,d){d.init&&d.init.call(b,c.pluginContext)});c.settings.focus&&setTimeout(function(){b.trigger("focus")},10);var d=g.trim(c.input.val());0<d.length&&v.val.call(c.input,d)}})},val:function(a){if("undefined"!==typeof a){var b=
h(this);b&&(b.input.val(f.decode(a)),p(b,!0),b.input.trigger("input"))}else{var b=h(this),c="";b&&(c=b.input.val(),g.each(b.plugins,function(a,d){d.val&&(c=d.val.call(b.input,c,b.pluginContext))}));return c}return this},onkeydown:function(a){var b=h(this);b&&(b.onkeydown=a);return this},oninput:function(a){var b=h(this);b&&(b.oninput=a);return this},resize:function(a,b){var c=h(this);c&&c.input.evolutionHighlight("resize",a,b);return this},release:function(){var a=h(this);a&&a.activePlugin&&(a.activePlugin.onDeactivate&&
a.activePlugin.onDeactivate.call(a.input,a.pluginContext),a.activePlugin=!1);return this}};g.fn.evolutionComposer=function(a){if(v[a])return v[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)g.error("Method "+a+" does not exist on jQuery.evolutionComposer");else return v.init.apply(this,arguments)};g.fn.evolutionComposer.defaults={plugins:[],focus:!1};g.fn.evolutionComposer.plugins={};return{}},jQuery,window);q("plugin.evolutionFeature",function(e,f,g){var k=function(e,
d){return d.replace(/\{content_type_name\}/gi,e.settings.contentTypeName)},l=function(f){e.telligent.evolution.messaging.subscribe("ui-feature",function(d){d.value?f.toggle.empty().append(e.telligent.evolution.html.encode(k(f,f.settings.editFeatureText))):f.toggle.empty().append(e.telligent.evolution.html.encode(k(f,f.settings.addFeatureText)));f.toggle.trigger("content-resized")})};e.fn.evolutionFeature=function(f){var d=e.extend({},e.fn.evolutionFeature.defaults,f||{});return this.each(function(){var c=
{element:e(this),toggle:null,settings:d};c.toggle=e("<a></a>").attr({href:c.settings.panelUrl});c.element.append(c.toggle);c.settings.initialState?c.toggle.append(e.telligent.evolution.html.encode(k(c,c.settings.editFeatureText))):c.toggle.append(e.telligent.evolution.html.encode(k(c,c.settings.addFeatureText)));c.toggle.trigger("content-resized");l(c)})};e.fn.evolutionFeature.defaults={contentId:"",contentTypeId:"",typeId:"",panelUrl:"",initialState:!1,contentTypeName:"",editFeatureText:"Edit featured",
addFeatureText:"Feature"};return{}},jQuery,window);q("plugin.evolutionHighlight",function(e,f,g){var k=function(a,b){var c=a.data("_HIGHLIGHTER_CONTEXT");if("undefined"===typeof c||null===c)c={selection:a.filter("textarea"),settings:e.extend({},e.fn.evolutionHighlight.defaults,b||{})},l(c),a.data("_HIGHLIGHTER_CONTEXT",c);return c},l=function(a){a.wrapper=e("<div></div>");a.mirror=e("<div></div>");var b={position:"relative",width:a.selection.outerWidth(),height:a.selection.outerHeight()};e.each(["margin-left",
"margin-right","margin-top","margin-bottom"],function(c,d){b[d]=a.selection.css(d);a.selection.css(d,0)});var c={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:a.selection.css("backgroundColor"),color:"transparent",width:a.selection.width(),height:a.selection.height(),overflow:"hidden",whiteSpace:"normal"};e.each(a.settings.styles,function(b,d){c[d]=a.selection.css(d)});
var d={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",width:a.selection.width(),height:a.selection.height()};a.wrapper.css(b).addClass("highlighter");a.mirror.css(c);a.selection.css(d);a.mirror.css("color",a.mirror.css("background-color"));a.selection.before(a.wrapper);a.wrapper.append(a.selection);a.wrapper.append(a.mirror)},h=/\s\s/gi,d=/\n/gi,c=function(a){var b={};e.each(a.settings.ranges,function(a,c){b[c.start]=b[c.start]||[];b[c.start].push(e.extend({},c,
{index:a}));b[c.stop]=b[c.stop]||[];b[c.stop].push(c)});var c=e.telligent.evolution.html.encode(a.selection.val());newValue=[];for(var f=spanDepth=0;f<c.length;f++)"undefined"!==typeof b[f]&&e.each(b[f],function(a,b){b.start===f?(newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;" data-index="'+b.index+'">',spanDepth++):(newValue[newValue.length]="</span>",spanDepth--)}),newValue[newValue.length]=c.charAt(f);0<spanDepth&&(newValue[newValue.length]="</span>");var c=
newValue.join("").replace(d,"<br />").replace(h,"&nbsp; "),k=document.createElement("span");k.innerHTML=c;a.mirror.empty().get(0).appendChild(k);a.selection.off("click").on("click",function(b){e("span",a.mirror).each(function(){var c=e(this),d=c.data("index");if(d!==g){var f=c.offset();f.top<=b.pageY&&(f.top+c.height()>=b.pageY&&f.left<=b.pageX&&f.left+c.width()>=b.pageX)&&a.selection.trigger("evolutionRangeClick",a.settings.ranges[d])}})})},b={init:function(a){var b=k(this,a);b.settings=e.extend({},
e.fn.evolutionHighlight.defaults,a||{});c(b);return this},clear:function(){var a=k(this,null);if(null!==a)return a.mirror.html(""),this},resize:function(a,b){var c=k(this,null);if(null!==c){var d={width:a,height:b};c.mirror.css(d);c.selection.css(d);c.wrapper.css({width:c.selection.outerWidth(),height:c.selection.outerHeight()});return this}},css:function(a){var b=k(this,null);if(null!==b)return b.wrapper.css(a),this}};e.fn.evolutionHighlight=function(a){if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.evolutionHighlight");else return b.init.apply(this,arguments)};e.fn.evolutionHighlight.defaults={ranges:[],styles:"border-top-width border-top-style border-bottom-width border-bottom-style border-right-width border-right-width-value border-right-style border-right-style-value border-left-width border-left-width-value border-left-style border-left-style-value font-family font-size font-size-adjust font-stretch font-style font-variant font-weight padding-bottom padding-left padding-right padding-top letter-spacing line-height text-align text-indent word-spacing".split(" ")};
return{}},jQuery,window);q("plugin.evolutionHtmlEditor",["lib.util","lib.storageProxy","lib.lruCache","module.notifications"],function(e,f,g,k,l,h,d){function c(a){var b=[];b.push(a.contentTypeId||"");b.push(a.applicationTypeId||"");b.push(a.applicationId||"");b.push(a.submittable?"1":"0");b.push(a._tokens&&0<a._tokens.length?"1":"0");b.push(a._enableLegacyTokens?"1":"0");b.push(a.autoResize?"1":"0");b.push(!0===a.enableFileUpload?"1":!1===a.enableFileUpload?"0":"");return b.join("|")}function b(a){if(!a.contentTypeId)return null;
null==w&&((a=l.telligent.evolution.url.parseQuery(h.location.href+""))&&a._pcurl?w=a._pcurl:(w=h.location.href+"",a=w.indexOf("#"),0<=a&&(w=w.substr(0,a)),a=w.indexOf("?"),0<=a&&(w=w.substr(0,a)),a=l.telligent.evolution.site.getBaseUrl(!0),0==w.indexOf(a)&&(w="~/"+w.substr(a.length))));return w}function a(a){return l.Deferred(function(e){var f=c(a),g=r[f];if(g!==d)e.resolve(g);else{var h={ContentTypeId:a.contentTypeId||"",ApplicationTypeId:a.applicationTypeId||"",ApplicationId:a.applicationId||"",
Submittable:a.submittable?"1":"0",HasTokens:a._tokens&&0<a._tokens.length?"1":"0",EnableLegacyTokens:a._enableLegacyTokens?"1":"0",AutoResize:a.autoResize?"1":"0",EnableFileUpload:!0===a.enableFileUpload?"1":!1===a.enableFileUpload?"0":"",_u:l.telligent.evolution.user.accessing.id},m=b(a);null!=m&&(h._pcurl=m);l.telligent.evolution.get({url:B.scriptBaseUrl+"config.js?_="+B.editorConfigVersionKey,data:h,cache:!0}).then(function(a){a=a.editorConfiguration||{};if(a.protect)for(var b=0;b<a.protect.length;b++)a.protect[b]=
RegExp(a.protect[b],"g");g={editorConfiguration:a};r[f]=g;e.resolve(g)})["catch"](function(){e.reject()})}}).promise()}function n(a){var b=new f({id:l.telligent.evolution.user.accessing.id,isSystemAccount:l.telligent.evolution.user.accessing.isSystemAccount});z=new g({size:5,load:function(){return b.get(x)},persist:function(a){b.set(x,a)}});return l.Deferred(function(a){l.ajax({url:B.scriptBaseUrl+"tinymce.min.js?_="+B.versionKey,dataType:"script",cache:!0}).then(function(){l.ajax({url:B.scriptBaseUrl+
"telligent/telligent.tinymce.min.js?_="+B.versionKey,dataType:"script",cache:!0}).then(function(){l.ajax({url:B.scriptBaseUrl+"langs/"+B.language+".js?_="+B.versionKey,dataType:"script",cache:!0}).then(function(){try{tinymce.EditorManager.baseURL=B.scriptBaseUrl}catch(b){}a.resolve()})["catch"](function(){a.reject()})})["catch"](function(){a.reject()})})["catch"](function(){a.reject()})})}function p(a,b){b&&(h.clearTimeout(a.updateBookmarkHandle),a.updateBookmarkHandle=h.setTimeout(function(){b.selection&&
(b._currentBookmark=b.selection.getBookmark(2))},100))}function u(a,b){try{l(document).on("beforecustomizepage",function(){b&&b.remove()})}catch(c){}var d=l(a.elm);b.on("change SetContent NodeChange keyup",function(){p(a,b);h.clearTimeout(a.changedHandle);a.changedHandle=h.setTimeout(function(){try{var c=b.getContent();c!=a.lastSourceValue&&(a.lastSourceValue=c,d.val(c).trigger("change"),t(a,b,c))}catch(e){}},1E3)});a.onErrorHandler=function(){t(a,b)};k.on("error",a.onErrorHandler);a.lastSourceValue=
d.val();a.sourceChangeHandle=h.setInterval(function(){var c=d.val();c!=a.lastSourceValue&&(a.lastSourceValue=c,b.setContent(a.lastSourceValue))},1E3);b.on("Remove",function(){h.clearInterval(a.sourceChangeHandle);k.off("error",a.onErrorHandler)});b.on("blur",function(){b.save()});b.on("Init",function(c){if(!y){c=l("head link").filter(function(a,b){var c=l(b).prop("href");return c&&0<=c.indexOf("/tinymce/")});var d=l('head style[id="ace_editor.css"]');0<d.length&&c.insertBefore(d);c.filter(":last").after('<link rel="stylesheet" type="text/css" href="'+
B.scriptBaseUrl+"telligent/telligent.tinymce.ui.css?_="+B.versionKey+'" />');y=!0}m(a,b);a.initialized=!0;l(a.elm).trigger({type:"evolutionHtmlEditorReady"})});b.on("keydown",function(b){return a.elm.dispatchEvent(new KeyboardEvent(b.type,{altKey:b.altKey,"char":b["char"],charCode:b.charCode,code:b.code,ctrlKey:b.ctrlKey,isComposing:b.isComposing,key:b.key,keyCode:b.keyCode,keyIdentifier:b.keyIdentifier,keyLocation:b.keyLocation,locale:b.locale,location:b.location,metaKey:b.metaKey,repeat:b.repeat,
shiftKey:b.shiftKey,which:b.which}))},!0);b.on("LoadContent",function(){b._oldContentValue=b.getContent();"<p>&nbsp;</p>"==b._oldContentValue&&(b._oldContentValue="");try{b.getWin().document.addEventListener("keydown",function(){b.getWin().focus()})}catch(a){}})}function t(a,b,c,e){var f,g;a=a.contextid;if(A){try{for(g=localStorage.length-1;0<g;g--)f=localStorage.key(g),0==f.indexOf("TinyAutoSave")&&localStorage.removeItem(f)}catch(h){}A=!1}try{if(a){if(null===c||c===d)c=b.getContent()||"";if(e||
0<c.replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length)0<c.length&&131072>c.length?z.set(a,c):z.del(a)}}catch(m){}}function m(a,b){try{var c=a.contextid;if(c){var d=z.get(c);d&&0==b.getContent().replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length&&b.setContent(d)}}catch(e){}}function s(a){return a?(a.getContent()||"").replace(/(?:^\W*<p[^>]*>(?:&nbsp;)?<\/p>|<p[^>]*>(?:&nbsp;)?<\/p>\W*$)/gi,""):""}var v=!1,y=!1,x="evolutionHtmlEditor-UnsavedContent",r={},w=null,z=null,A=!0,B={scriptBaseUrl:"/tinymce/",
versionKey:"",contextQueryString:"",mediaMaxWidth:320,mediaMaxHeight:240,defaultMediaWidth:0,defaultMediaHeight:0,directionality:"ltr",language:"en",contentCssUrl:"/tinymce/telligent/telligent.tinymce.content.css",directUploadContext:"",directUploadUrl:"",autoLinkPattern:null,editorConfigVersionKey:""},q={init:function(b){var c=l.extend({},l.fn.evolutionHtmlEditor.defaults,b||{});!1===v&&(v=n(this.get(0)));var e=h.location+"";try{h.parent&&(h.parent.$&&h.parent.$.fn.glowModal)&&(e=h.parent.location+
"")}catch(f){}return this.each(function(){var b=l.extend({},c);b.elm=this;b.initialized=!1;b.elm.id!==d&&0!=b.elm.id.length&&(b.id=b.elm.id,b.contextid=h.location+"#"+b.id,l(b.elm).data("_html_editor_context",b),v.then(function(){a(b).then(function(a){var c=tinymce.EditorManager.get(b.id);if(c)try{tinymce.EditorManager.remove(c)}catch(d){}c={selector:"#"+b.id,relative_urls:!1,setup:function(a){u(b,a)},evolution_contenttypeid:b.contentTypeId,evolution_applicationtypeid:b.applicationTypeId,evolution_applicationid:b.applicationId,
theme:"modern",skin:"telligent",resize:"true",object_resizing:"table,img,.mceInsertMediaItem",language:B.language,document_base_url:e,images_dataimg_filter:function(){return!1},anchor_bottom:!1,anchor_top:!1,content_css:B.contentCssUrl,directionality:B.directionality,toc_class:"table-of-contents",evolution_mediaMaxWidth:B.mediaMaxWidth,evolution_mediaMaxHeight:B.mediaMaxHeight,evolution_defaultMediaWidth:B.defaultMediaWidth,evolution_defaultMediaHeight:B.defaultMediaHeight,evolution_customtokens:b._tokens||
[0],evolution_contextQueryString:B.contextQueryString,evolution_directUploadContext:B.directUploadContext,evolution_directUploadUrl:B.directUploadUrl,enhancements_placeholder:b.placeholder,submittable_prehtml:b.beforeSubmitHtml,submittable_posthtml:b.afterSubmitHtml,submit_enabletoggle:b.enableEnterToSubmitToggle,submit_entermessage:b.enterToSubmitPrompt,submit_buttontext:b.submitLabel,submit_onsubmit:function(a){a=s(a);if(b.onSubmit)b.onSubmit(a);l(b.elm).trigger({type:"evolutionHtmlEditorSubmit",
html:a})},submit_entertosubmit:b.submittable,autoLinkPattern:B.autoLinkPattern};a.editorConfiguration&&l.extend(c,a.editorConfiguration);a=-1<b.height.indexOf("px")?parseInt(b.height,10):NaN;b.autoResize?(c.autoresize_bottom_margin=1,c.autoresize_overflow_padding=0,isNaN(a)||(c.autoresize_min_height=a,c.height=a+25,c.min_height=a)):isNaN(a)||(c.height=a,c.min_height=a);tinymce.EditorManager.init(c)})}))})},focus:function(){var a=l(this).data("_html_editor_context");if(a)try{tinyMCE.get(a.id).plugins.enhancements.focusAndView()}catch(b){}return this},
val:function(a){if(a===d){var b=l(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id),e=s(c);t(b,c,"",!0);return e}catch(f){}return""}return this.each(function(){var b=l(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);c.execCommand("mceSetContent",!1,a);t(b,c,null,!0);c.selection.collapse()}catch(d){}})},saveCursorPosition:function(){return this.each(function(){var a=l(this).data("_html_editor_context");if(a)try{p(a,tinyMCE.get(a.id))}catch(b){}})},insert:function(a){return this.each(function(){var b=
l(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);if(c){if(c&&c._currentBookmark)try{c.selection.moveToBookmark(c._currentBookmark)}catch(d){}c.execCommand("mceInsertContent",!1,a);t(b,c,null,!0)}}catch(e){}})},moveTo:function(a){return this.each(function(){var b=l(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);c&&c.plugins.enhancements.moveTo(a)}catch(d){}})},ready:function(a){var b=l(this),c=b.data("_html_editor_context");return 0<b.length?(a&&(b.on("evolutionHtmlEditorReady",
a),c&&c.initialized&&a()),c&&c.initialized):!1},context:function(a){if(a===d){var b=l(this).data("_html_editor_context");if(b)try{return b.contextid}catch(c){}return""}return this.each(function(){var b=l(this).data("_html_editor_context");if(b)try{var c=a;c&&0!=c.length||(c=h.location+"#"+b.id);if(b.contextid!=c){var d=null;try{d=tinyMCE.get(b.id)}catch(e){d=null}if(d){b.contextid=null;try{d.execCommand("mceSetContent",!1,"")}catch(f){}b.contextid=c;m(b,d)}else b.contextid=c}}catch(g){}})},remove:function(){return this.each(function(){var a=
l(this).data("_html_editor_context");if(a){try{var b=tinyMCE.get(a.id);b&&(b.selection.collapse(),b.fire("blur",{focusedEditor:null}))}catch(c){}h.clearTimeout(a.changedHandle);h.clearTimeout(a.updateBookmarkHandle);h.clearTimeout(a.sourceChangeHandle);try{tinyMCE.remove(a.id),l(this).data("_html_editor_context",null)}catch(d){}}})}};l.fn.evolutionHtmlEditor=function(a){if(q[a])return q[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)l.error("Method "+a+" does not exist on jQuery.evolutionHtmlEditor");
else return q.init.apply(this,arguments)};l.fn.evolutionHtmlEditor.defaults={width:"100%",height:"300px",contentTypeId:null,applicationTypeId:null,applicationId:null,enterToSubmitPrompt:null,submitLabel:null,beforeSubmitHtml:null,afterSubmitHtml:null,autoResize:!1,enableEnterToSubmitToggle:!1,placeholder:null,submittable:!1,enableFileUpload:null,_tokens:{},_enableLegacyTokens:!1};return{configure:function(a){l.extend(B,a)}}},jQuery,window);q("plugin.evolutionInlineTagEditor",function(e,f,g){var k=
{},l=function(c,b){if(c.internal.isInitialized){for(var a=b.split(/[,;]/g),d=[],f=0;f<a.length;f++){var g=e.trim(a[f]);g&&(d[d.length]=g)}c.settings.onSave(d,function(){c.settings.currentTags=d})}},h=function(c){return this.each(function(){var b={settings:e.extend({},e.fn.evolutionInlineTagEditor.defaults,c||{}),internal:{state:e(this)}};e(this).data("evolutionTagInlineEditor_context",b);e(this).html()||e(this).text(b.settings.editButtonText);d(b)})},d=function(c){var b=e("<div></div>").addClass(c.settings.editorCssClass).attr("style",
"display: none;"),a=e('<label for="tag-area"></label>').hide(),d=e('<textarea id="tag-area"></textarea>').attr("cols","40").attr("rows","2");if(c.settings.allTags&&0<c.settings.allTags.length)var f=e('<input type="button" />').val(c.settings.selectTagsText);var g=e('<input type="button" />').val(c.settings.saveTagsText),h=e('<input type="button" />').val(c.settings.cancelText),m=e('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');
m.find("td").eq(1).append(g);m.find("td").eq(1).append(h);f&&m.find("td").first().append(f);b.append(a);b.append(d);b.append(m);d.evolutionTagTextBox({allTags:c.settings.allTags});b.glowPopUpPanel({cssClass:c.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:!1});e(c.internal.state).on("click.evolutionInlineTagEditor",function(a){b.glowPopUpPanel("hide").glowPopUpPanel("show",e(this));d.val(0<c.settings.currentTags.length?c.settings.currentTags.join(", "):"");return!1});g.on("click.evolutionInlineTagEditor",
function(a){l(c,d.attr("value"));b.glowPopUpPanel("hide");return!1});h.on("click.evolutionInlineTagEditor",function(a){b.glowPopUpPanel("hide");return!1});if(f)f.on("click.evolutionInlineTagEditor",function(a){d.evolutionTagTextBox("openTagSelector");return!1});c.internal.state.after(b);c.internal.isInitialized=!0};e.fn.evolutionInlineTagEditor=function(c){if(c in k)return k[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)e.error("Method "+c+" does not exist on jQuery.fn.evolutionInlineTagEditor");
else return h.apply(this,arguments)};e.extend(e.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(c,b){}}});return{}},jQuery,window);q("plugin.evolutionLike",function(e,f,g){var k=!1,l=!1,h=function(a){var c=a.settings.format;a.hasCount&&(c=c.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>'));a.hasToggle&&(c=c.replace(/\{toggle\}/gi,
'<span class="like-toggle"><a href="#" class="internal-link"></a></span>'));a.hasMessage&&(c=c.replace(/\{message\}/gi,'<span class="like-message"></span>'));a.element.html(c);a.hasCount&&(a.countWrapper=a.element.find("span.like-count"),a.countWrapper.html(a.settings.initialCount),a.countWrapper.attr("data-count",a.settings.initialCount));a.hasToggle&&(a.toggleLink=a.element.find("span.like-toggle a"),a.toggleLink.evolutionToggleLink({onHtml:a.settings.unlikeText,offHtml:a.settings.likeText,onTitle:"",
offTitle:"",processingHtml:"...",changeState:function(c){b(c,a)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:"true"===a.settings.initialState}));a.hasMessage&&(a.messageWrapper=a.element.find("span.like-message"),a.messageWrapper.html(a.settings.initialMessage))},d=function(a,b){var c="";if(0<b.count){var d=0;b.accessingLikes?1===b.count?c=a.settings.whoLikesAccessingText:2===b.count?(c=a.settings.whoLikesAccessingTwoText,
d=-1):2<b.count&&(c=a.settings.whoLikesAccessingMultipleText,d=-1):1===b.count?c=a.settings.whoLikesOtherText:2===b.count?(d=-1,c=a.settings.whoLikesOtherTwoText):2<b.count&&(d=-1,c=a.settings.whoLikesOtherMultipleText);c=c.replace(/\{count\}/gi,b.count+d);c=c.replace(/\{user_profile_url\}/gi,b.latestUserProfileUrl);c=c.replace(/\{user_display_name\}/gi,b.latestUserDisplayName)}return c},c=function(a,b,c){var f=d(a,{count:b.count,accessingLikes:c,latestUserProfileUrl:null!=b.latestLike&&null!=b.latestLike.User?
b.latestLike.User.ProfileUrl:null,latestUserDisplayName:null!=b.latestLike&&null!=b.latestLike.User?b.latestLike.User.DisplayName:null});e.telligent.evolution.messaging.publish("ui.like",{contentId:a.settings.contentId,contentTypeId:a.settings.contentTypeId,typeId:a.settings.typeId,count:b.count,liked:c,message:f},{crossWindow:!0})},b=function(a,b){if(a)b.settings.onLike(b.settings.contentId,b.settings.contentTypeId,b.settings.typeId,function(a){c(b,a,!0)});else b.settings.onUnlike(b.settings.contentId,
b.settings.contentTypeId,b.settings.typeId,function(a){c(b,a,!1)})},a=function(a,b){return e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",data:{ContentId:b.contentId,TypeId:b.typeId},cache:!1}).then(function(a){return null!=a.Like})},n=function(a){l||(l=!0,e.telligent.evolution.messaging.subscribe("like.created",function(b){p(a,b,!0)}),e.telligent.evolution.messaging.subscribe("like.deleted",function(b){p(a,b,!1)}))},p=function(b,c,f){a(b,c).then(function(a){a=
d(b,{count:c.total,accessingLikes:a,latestUserProfileUrl:c.latestUser.profileUrl,latestUserDisplayName:c.latestUser.displayName});e.telligent.evolution.messaging.publish("ui.like",{contentId:c.contentId,contentTypeId:c.contentTypeId,typeId:c.typeId,count:c.total,liked:f,message:a})})},u=function(a){e.telligent.evolution.messaging.subscribe("ui.like",function(b){b.contentId===a.settings.contentId&&(b.contentTypeId===a.settings.contentTypeId&&b.typeId===a.settings.typeId)&&(a.hasToggle&&a.toggleLink.evolutionToggleLink("val",
b.liked),a.hasCount&&(a.countWrapper.html(b.count),a.countWrapper.attr("data-count",b.count)),a.hasMessage&&a.messageWrapper.html(b.message))})};e.fn.evolutionLike=function(a){var b=e.extend({},e.fn.evolutionLike.defaults,a||{});return this.each(function(){var a={element:e(this),settings:b,hasCount:0<=b.format.indexOf("{count}"),hasToggle:0<=b.format.indexOf("{toggle}"),hasMessage:0<=b.format.indexOf("{message}")};h(a);u(a);n(a)})};e.fn.evolutionLike.delegatePopups=function(a){if(!k){k=!0;var b=e.extend({},
e.fn.evolutionLike.defaults,a||{}),c=e.telligent.evolution.template.compile(b.likersTemplate),d=e.telligent.evolution.template.compile(b.likersPopupTemplate),f=function(a,c,d){b.onList(a.contentId,a.contentTypeId,a.typeId,function(a){d(a)},a.pageSize,c)},g=function(a,g){var h=0,n=e(c(a)),k=e(d({likers:n,hasMorePages:a.hasMorePages,showMoreText:b.modalShowMoreText})),l=k.find("ul"),p=k.find(".show-more"),u=b.onOptions(e(g).closest(b.delegatedSelector));l.html(n);p.on("click",function(a){a.preventDefault();
h++;f(u,h,function(a){l.append(c(a));a.hasMorePages?p.show():p.hide();l.scrollTop(l[0].scrollHeight)})});e.glowModal({title:b.modalTitleText,html:k,width:450,height:"100%"})};(function(){e(b.containerSelector).on("click",b.delegatedSelector+" .who-likes",function(a){var c=e(this);a=b.onOptions(e(c).closest(b.delegatedSelector));f(a,0,function(a){g(a,c)})})})()}};e.fn.evolutionLike.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,initialMessage:"",initialCount:0,format:"",onLike:function(a,
b,c,d){},onUnlike:function(a,b,c,d){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',
whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(a,b,c,d){},onOptions:function(a){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <% if(liker.avatarHtml) { %>                          <%= liker.avatarHtml %>                      <% } else { %>                          <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" alt="<%= liker.displayName %>" />                      <% } %>                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '};return{}},jQuery,window);q("plugin.evolutionMasonry",["lib.util"],function(e,f,g,k){function l(a){return f(document.createElement("div")).html("&nbsp;").addClass(a.columnClass).css({"float":"left",
minHeight:"1px",overflow:"hidden"})}function h(a){for(var b=0;b<a.columns.length;b++)f(a.columns[b]).empty()}function d(a){for(var b=null,c=null,d=0;d<a.columns.length;d++)if(null===b||null===c)b=a.columns[d],c=a.columns[d].height();else{var e=a.columns[d].height();e<c&&(b=a.columns[d],c=e)}return b}function c(a,b){var c=d(a);b.rendered?b.rendered.appendTo(c):(b.rendered=f(b.original).appendTo(c),n(f(b.rendered).get(0),function(){b.reflowFromHere=!0;a.reflow()}))}function b(a,b){a.rendering=!0;var d;
b?d=b:(d=a.children,h(a));f.each(d,function(b,d){var e=f(d.original).find("img").first();if(0<e.length&&!e.get(0).complete)e.on("load",function(){c(a,d)});else c(a,d)});a.rendering=!1}function a(a,c){c=c||{};a.scrollTop=f(g).scrollTop();if(c.reflow){for(var d=!1,e=[],h=0;h<a.children.length;h++)a.children[h].reflowFromHere&&(delete a.children[h].reflowFromHere,d=!0),d&&(a.children[h].rendered&&a.children[h].rendered.detach(),e.push(a.children[h]));b(a,e)}else{if(c.resize)for(h=0;h<a.children.length;h++)a.children[h].rendered&&
a.children[h].rendered.detach();a.container.empty();a.columns=[];var e=d=0,h=l(a),n=!1;h.height(1200).appendTo(a.container);e=a.container.width();h.height(0).remove();for(var k=50;d<e&&0<k;){k--;var p=l(a);n?h.before(p):p.appendTo(a.container);d+=p.outerWidth(!0);d<=e?a.columns.push(p):p.remove();n||(h.appendTo(a.container),n=!0)}n&&h.remove();b(a,null)}f(g).scrollTop(a.scrollTop)}function n(a,b){if(MutationObserver){var c=f(a);c.data("observed")||(c.data("observed",!0),(new MutationObserver(function(){var a=
c.data("masonryLastHeight"),d=c.height();a&&a==d||(c.data("masonryLastHeight",d),b())})).observe(a,{childList:!0,subtree:!0,attributes:!0}))}}function p(b){return this.each(function(){var c=f.extend({},f.fn.evolutionMasonry.defaults,b||{});c.container=f(this);c.children=c.container.children().detach().toArray().map(function(a){return{original:a}});var d;c.reflow=function(){g.clearTimeout(d);d=g.setTimeout(function(){a(c,{reflow:!0})},50)};a(c);var e;f(window).on("resized",function(b,d){clearTimeout(e);
e=setTimeout(function(){c.rendering||d&&0<Math.abs(d.oldWidth-d.newWidth)&&a(c,{resize:!0})},100)});c.container.data(u,c)})}var u="_evolutionMasonry_context",t={append:function(a){if(a&&0!=a.length){var c=f(a).filter("div");return this.each(function(){var a=f(this).data(u);if(a){var d=[];c.each(function(){var b={original:this};d.push(b);a.children.push(b)});b(a,d)}})}},empty:function(){return this.each(function(){var b=f(this).data(u);b&&(b.container.empty(),b.children=[],a(b))})}};f.fn.evolutionMasonry=
function(a){if(a in t)return t[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)f.error("Method "+a+" does not exist on jQuery.fn.evolutionMasonry");else return p.apply(this,arguments)};f.fn.evolutionMasonry.defaults={columnClass:"masonry-column"};return f.fn.evolutionMasonry},jQuery,window);q("plugin.evolutionModerate",function(e,f,g){var k=e.telligent.evolution,l=function(d){d.settings.onReport(d.settings.contentId,d.settings.contentTypeId,function(c){k.messaging.publish("ui.reportabuse",
{contentId:d.settings.contentId,contentTypeId:d.settings.contentTypeId});showNotification(d,c.Report)})},h=function(d){d.hideTimer&&(clearTimeout(d.hideTimer),d.hideTimer=null)};buildModerationLink=function(d){d.moderationLink=e(k.template.compile(d.settings.moderationLinkTemplate)({linkClassName:d.settings.linkClassName,resources:{moderateLinkText:d.settings.moderateLinkText}})).appendTo(d.element)};buildModerationPopup=function(d){d.popup=e("<div></div>").glowPopUpPanel({cssClass:"content-moderation",
position:"downleft",zIndex:1E3,hideOnDocumentClick:!0});d.popup.on({glowPopUpPanelShown:function(c){d.moderationLink.addClass("open")},glowPopUpPanelHidden:function(c){d.moderationLink.removeClass("open")}})};buildModerationMenuContent=function(d,c){d.settings.onGetAdditionalLinks(function(b){var a=[],a=d.settings.supportsAbuse?d.settings.initialState?b.concat([{href:"#",className:"evolutionModerateFlagged",text:d.settings.reportedLinkText}]):b.concat([{href:"#",className:"evolutionModerateFlag",
text:d.settings.reportLinkText}]):b;b=e(k.template.compile(d.settings.moderationMenuTemplate)({links:a}));b.on("mouseleave",function(a){hideMenu(d)});b.on("mouseenter",function(a){h(d)});b.on("click","a",function(a){var b=e(a.target);b.hasClass("evolutionModerateFlag")?(a.preventDefault(),l(d)):b.hasClass("evolutionModerateFlagged")?a.preventDefault():("#"===b.attr("href")&&a.preventDefault(),d.element.trigger("evolutionModerateLinkClicked",a.target))});c(b)})};showMenu=function(d){d.popup||buildModerationPopup(d);
buildModerationMenuContent(d,function(c){h(d);d.popup.glowPopUpPanel("html",c).glowPopUpPanel("show",d.moderationLink)})};hideMenu=function(d){d.hideTimer||(d.hideTimer=setTimeout(function(){d.popup.glowPopUpPanel("hide");d.hideTimer=null},200))};formatNotificationMessage=function(d,c){return d.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,c&&c.AuthorUser&&c.AuthorUser.DisplayName?c.AuthorUser.DisplayName:"")};showNotification=function(d,c){var b=k.template.compile(d.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(d,
c),undoLinkText:d.settings.undoLinkText},contextId:d.contextId});k.notifications.show(b,{type:"moderation",duration:d.settings.notificationDuration,cssClass:""})};handleFlagMessages=function(d){k.messaging.subscribe("ui.reportabuse",function(c){d.settings.contentId===c.contentId&&d.settings.contentTypeId===c.contentTypeId&&(d.settings.initialState=!0)})};init=function(d){buildModerationLink(d);d.moderationLink.on({mouseenter:function(c){c.preventDefault();d.popup&&d.popup.glowPopUpPanel("isShown")?
hideMenu(d):showMenu(d);h(d)},mouseleave:function(c){e(c.relatedTarget).is(".content-moderation")||0!==e(c.relatedTarget).closest(".content-moderation").length||hideMenu(d)}});handleFlagMessages(d)};e.fn.evolutionModerate=function(d){var c=e.extend({},e.fn.evolutionModerate.defaults,d||{});return this.each(function(){var b={element:e(this),settings:c};init(b)})};e.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:!1,linkClassName:"",onReport:function(d,c,b){},onGetAdditionalLinks:function(d){d([])},
notificationDuration:5E3,moderateLinkText:"moderate",supportsAbuse:!0,reportLinkText:"Report as abusive",reportedLinkText:"Reported as abusive",reportedNotificationMessageText:"{NAME}'s post has been reported. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',
notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"};return{}},jQuery,window);q("plugin.evolutionPager",function(e,f,g){var k={},l={},h={},d=function(a){var b=[],c=a.settings,d=function(a){var b={};b[c.pageKey]=a;a={url:c.baseUrl,query:b};c.hash&&0<c.hash.length&&(a[c.hash]=c.hash);return e.telligent.evolution.url.modify(a)};0===c.totalItems||0===c.pageSize?a=0:(a=Math.floor(c.totalItems/c.pageSize),0<c.totalItems%c.pageSize&&(a+=1));if(1<a){c.showFirst&&3<=c.currentPage&&
a>c.numberOfPagesToDisplay&&(b[b.length]={type:"first",selected:!1,page:1,url:d(1),label:c.firstLabel});c.showPrevious&&0<c.currentPage&&(b[b.length]={type:"previous",selected:!1,page:c.currentPage,url:d(c.currentPage),label:c.previousLabel});if(c.showIndividualPages){var f;f=a<c.numberOfPagesToDisplay||0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?0:c.currentPage+Math.floor(c.numberOfPagesToDisplay/2)>=a?a-c.numberOfPagesToDisplay:c.currentPage-Math.floor(c.numberOfPagesToDisplay/2);var g;
g=Math.floor(c.numberOfPagesToDisplay/2);0===c.numberOfPagesToDisplay%2&&(g-=1);for(g=a<c.numberOfPagesToDisplay||c.currentPage+g>=a?a-1:0>c.currentPage-Math.floor(c.numberOfPagesToDisplay/2)?c.numberOfPagesToDisplay-1:c.currentPage+g;f<=g;f++)b[b.length]={type:"page",selected:c.currentPage===f,page:f+1,url:d(f+1),label:c.individualPageLabel.replace(/\{0\}/g,f+1)}}c.showNext&&c.currentPage+1<a&&(b[b.length]={type:"next",selected:!1,page:c.currentPage+2,url:d(c.currentPage+2),label:c.nextLabel});c.showLast&&
c.currentPage+3<a&&a>c.numberOfPagesToDisplay&&(b[b.length]={type:"last",selected:!1,page:a,url:d(a),label:c.lastLabel})}return b},c=function(a){var b=a.template({links:a.links});a.selection.html(b)},b=function(a){if(!a.settings.refreshOnAnyHashChange)return null;var b=e.telligent.evolution.url.hashData(),c=null,d;for(d in b)0==d.indexOf(a.settings.pageKey)&&(c=c||{},c[d.substr(a.settings.pageKey.length)]=b[d]);return c},a=function(a){var c=parseInt(e.telligent.evolution.url.hashData()[a.settings.pageKey],
10),d=b(a);d&&(c=c||1);isNaN(c)||c===a.settings.currentPage||h[a.settings.pageKey]||(h[a.settings.pageKey]=!0,a.settings.onPage(c,function(b){a.currentPageIndex=c;t(a,c,0,b,!1)},d||{}))},n=function(a){e(a.selection).on("click","a",function(b){b.preventDefault();b=e(this);var c={};c[a.settings.pageKey]=b.data("page");e.telligent.evolution.url.hashData(c)})},p=function(a){k[a.settings.pageKey]||(k[a.settings.pageKey]=!0,a.currentPageIndex=parseInt(e.telligent.evolution.url.hashData()[a.settings.pageKey],
10),isNaN(a.currentPageIndex)&&(a.currentPageIndex=a.settings.currentPage),e(window).on("hashchange",function(c){c=parseInt(e.telligent.evolution.url.hashData()[a.settings.pageKey],10);if(b(a)||!isNaN(c)&&a.currentPageIndex!=c){a.newPageIndex=c;var d={currentPage:a.currentPageIndex||1,newPage:a.newPageIndex||1,container:a.settings.pagedContentContainer};e.telligent.evolution.messaging.publish(a.settings.pagedContentPagingEvent,d);a.selection.trigger("evolutionPagerPaging",d);a.currentPageIndex=c}}))},
u=function(a){l[a.settings.pagedContentPagingEvent]&&(a.currentPageIndex=parseInt(e.telligent.evolution.url.hashData()[a.settings.pageKey],10),e.telligent.evolution.messaging.unsubscribe(l[a.settings.pagedContentPagingEvent]));l[a.settings.pagedContentPagingEvent]=e.telligent.evolution.messaging.subscribe(a.settings.pagedContentPagingEvent,function(c){h[a.settings.pageKey]||(h[a.settings.pageKey]=!0,a.settings.onPage(c.newPage,function(b){a.currentPageIndex=c.newPage;t(a,c.newPage,c.currentPage,b,
!0)},b(a)||{}))})},t=function(a,b,f,g,n){var k=function(){var c={page:b,container:a.settings.pagedContentContainer};e.telligent.evolution.messaging.publish(a.settings.pagedContentPagedEvent,c);a.selection.trigger("evolutionPagerPaged",c)};!n||"slide"!==a.settings.transition&&"fade"!==a.settings.transition?(e(a.settings.pagedContentContainer).html(g),k(),h[a.settings.pageKey]=!1):(n="fade","slide"===a.settings.transition&&(n=b<f?"slideRight":"slideLeft"),f=e(a.settings.pagedContentContainer),g=e("<div></div>").attr("id",
f.attr("id")).html(g).hide().insertAfter(a.settings.pagedContentContainer),f.glowTransition(g,{type:n,duration:a.settings.transitionDuration,complete:function(){e(a.settings.pagedContentContainer).css({width:"",height:"",overflow:"hidden"});k();h[a.settings.pageKey]=!1}}));a.settings.currentPage=b-1;a.links=d(a);c(a)};e.fn.evolutionPager=function(b){b=e.extend({},e.fn.evolutionPager.defaults,b||{});var f={selection:this,settings:b,template:e.telligent.evolution.template.compile(b.template)};f.links=
d(f);c(f);b.onPage&&(b.pagedContentContainer&&0<b.pagedContentContainer.length)&&(u(f),p(f),n(f),a(f));return this};e.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:!1,showNext:!1,showFirst:!0,showLast:!0,previousLabel:"Go to previous page",nextLabel:"Go to next page",firstLabel:"Go to first page",lastLabel:"Go to last page",individualPageLabel:"Go to page {0}",showIndividualPages:!0,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(a,
b){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,refreshOnAnyHashChange:!1,template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false" title="<%= link.label %>"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false" title="<%= link.label %>"><span>&#60;</span></a>     <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>" title="<%= link.label %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false" title="<%= link.label %>"><span>&#62;</span></a>     <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false" title="<%= link.label %>"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
return{}},jQuery,window);q("plugin.evolutionProgressIndicator",["module.notifications","lib.globalConfiguration"],function(e,f,g,k,l){function h(c){var d=g.extend({},g.fn.evolutionProgressIndicator.defaults,{beforeUnloadMessageTip:f.beforeUnloadMessageTip,beforeUnloadMessageLabel:f.beforeUnloadMessageLabel,pendingTip:f.pendingTip},c||{});u=u||g.telligent.evolution.template.compile(p);return this.each(function(){g(this).append(u(d));d.wrapper=g(this).find(".progress-indicator");d.percentLabel=g(this).find(".progress-percent").first();
d.percentLabelSmaller=g(this).find(".progress-percent-smaller").first();d.log=g(this).find(".progress-log").first();d.graphWrapper=g(this).find(".progress-graph-wrapper").first();d.graph=g(this).find(".progress-graph").first();d.graphLeft=g(this).find(".progress-graph .left").first();d.graphRight=g(this).find(".progress-graph .right").first();d.pending=g(this).find(".progress-pending").first();d.beforeUnloadMessage=g(this).find(".progress-note").first();d.showPending?(d.pending.show(),d.percentLabel.hide(),
d.percentLabelSmaller.hide()):b(d);d.warnBeforeUnload?d.warnBeforeUnload&&(d.beforeUnloadMessage.show(),g.telligent.evolution.administration&&g.telligent.evolution.administration.panelWrapper&&g.telligent.evolution.administration.panelWrapper()&&0<g.telligent.evolution.administration.panelWrapper().length?g.telligent.evolution.administration.navigationConfirmation.enable():g.telligent.evolution.navigationConfirmation.enable()):a(d);d.includeLatestMessage&&!d.includeAllMessages&&d.wrapper.addClass("latest-message");
d.includePercentComplete||d.graphWrapper.hide();g(this).data(n,d)})}function d(a,b){if(a.includePercentComplete){var c=Math.round(100*b);a.percentLabel.html(c);a.wrapper.addClass(a.progressClass);50<c?(a.graph.css({clip:"rect(auto, auto, auto, auto)"}),a.graphLeft.css({transform:"rotate("+Math.round(360*b)+"deg)"}),a.graphRight.css({transform:"rotate(180deg)",display:"block"})):(a.graph.css({clip:"rect(0, 1em, 1em, 0.5em)"}),a.graphLeft.css({transform:"rotate("+Math.round(360*b)+"deg)"}),a.graphRight.css({display:"none"}))}}
function c(a,b){a.includeAllMessages?a.log.append(g("<li></li>").text(b)):a.includeLatestMessage?a.log.empty().append(g("<li></li>").text(b)):a.log.hide()}function b(a){a.pending.hide();a.percentLabelSmaller.show();a.percentLabel.show()}function a(a){a.beforeUnloadMessage.hide();g.telligent.evolution.administration&&g.telligent.evolution.administration.panelWrapper&&g.telligent.evolution.administration.panelWrapper()&&0<g.telligent.evolution.administration.panelWrapper().length?g.telligent.evolution.administration.navigationConfirmation.disable():
g.telligent.evolution.navigationConfirmation.disable()}var n="evolutionProgressIndicator_context",p='\t<div class="progress-indicator">\t\t<div class="progress-graph-wrapper">\t\t\t<span class="progress-label">\t\t\t\t<span class="progress-percent">0</span><span class="progress-percent-smaller">%</span>\t\t\t\t<span class="progress-pending ui-loading ui-tip" data-tip="<%= pendingTip %>" data-width="32" data-height="32"></span>\t\t\t</span>\t\t\t<div class="progress-graph">\t\t\t\t<div class="left half"></div>\t\t\t\t<div class="right half"></div>\t\t\t</div>\t\t\t<div class="progress-shadow"></div>\t\t</div>\t\t<span class="progress-note ui-tip" data-tip="<%= beforeUnloadMessageTip %>"><%= beforeUnloadMessageLabel %></span>\t\t<ul class="progress-log"></ul>\t</div>',
u,t={progress:function(a){var e=this.data(n);if(null!==e)return this.each(function(){b(e);e.finalized||a.percentComplete!==l&&null!==a.percentComplete&&d(e,a.percentComplete);a.message&&0<a.message.length&&c(e,a.message)})},complete:function(c){var e=this.data(n);if(null!==e)return b(e),a(e),e.finalized=!0,this.each(function(){d(e,1);e.wrapper.addClass(e.completeClass)})},error:function(d){var e=this.data(n);if(null!==e)return b(e),a(e),e.finalized=!0,this.each(function(){e.wrapper.addClass(e.errorClass);
e.includeLatestMessage||e.includeAllMessages?c(e,d):g.telligent.evolution.notifications.show(d,{type:"error"})})}};g.fn.evolutionProgressIndicator=function(a){if(a in t)return t[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)g.error("Method "+a+" does not exist on jQuery.fn.evolutionProgressIndicator");else return h.apply(this,arguments)};g.fn.evolutionProgressIndicator.defaults={includePercentComplete:!0,includeLatestMessage:!0,includeAllMessages:!1,progressClass:"progress-indicator-progress",
completeClass:"progress-indicator-complete",errorClass:"progress-indicator-error",warnBeforeUnload:!1,showPending:!1,beforeUnloadMessageTip:null,beforeUnloadMessageLabel:null,pendingTip:null};return{}},jQuery,window);q("plugin.evolutionResize",function(e,f,g){function k(){if(!h){h=!0;var b=e("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");1>=Math.abs(b.prop("scrollHeight")-b.height())&&(l=0);b.remove()}}var l=null,h=!1,d=function(b){b.area.css({height:"auto"}).css({height:b.area.prop("scrollHeight")-
(null===l?b.offset:l)});var a=b.area.outerHeight();a!==b.oldHeight&&(a>=b.maxHeight?b.area.css({overflow:"visible"}):b.area.css({overflow:"hidden"}),b.area.trigger("evolutionResize",{newHeight:a,oldHeight:b.oldHeight}),b.oldHeight=a)},c=function(b){return parseInt(b.replace("px",""),10)};e.fn.evolutionResize=function(){k();return this.filter("textarea").each(function(){var b=e(this).css({resize:"none",overflow:"hidden"}),a={area:b,oldHeight:b.height(),maxHeight:c(b.css("max-height")),offset:b.innerHeight()!==
b.height()?c(b.css("padding-top"))+c(b.css("padding-bottom")):0};b.on("input keydown keyup",function(){d(a)});d(a)})};return{}},jQuery,window);q("plugin.evolutionScrollable",function(e,f,g){function k(a){return this.each(function(){var d=e(this),g=e.extend({},e.fn.evolutionScrollable.defaults,a||{},{selection:d,loadingEnabled:!0});g.pageIndex=g.initialPageIndex;g.wrapper||(g.wrapper=c(this));g.target||(g.target=d);g.wrapperIsGlobal=g.wrapper.get(0)==document||g.wrapper.get(0)==f;var k=0;g.wrapperIsGlobal?
k=g.wrapper.outerHeight()-g.target.offset().top:"absolute"==g.wrapper.css("position")||"fixed"==g.wrapper.css("position")?(k=g.wrapper.get(0).scrollHeight-(g.target.offset().top-g.wrapper.offset().top+g.target.outerHeight()),0>k&&(k=0)):k=g.wrapper.get(0).scrollHeight-(g.wrapper.offset().top-g.target.offset().top+g.target.outerHeight());g.wrapper.on("scrollend",{prefill:!1,delay:80,padding:k+150},function(){b(g)&&(0<g.batch&&0<g.pageIndex&&0==g.pageIndex%g.batch)&&(n(g),b(g,!1));m(g);!g.topIndicatorElement||
(g.topIndicatorShown||g.scrolling)||(g.topIndicatorElement.fadeIn(g.animationDuration),g.topIndicatorShown=!0);l(g)});h(g);d.data(v,g)})}function l(a,c){b(a)&&a.load&&(b(a,!1),u(a),a.load(a.pageIndex).then(function(e){!e||e instanceof jQuery&&0===e.length||"string"==typeof e&&0===e.trim().length?(b(a,!1),t(a)):(a.pageIndex++,!0!==e&&a.target.append(e),t(a),b(a,!0),c&&(c.prefilling&&a.pageIndex<a.prefill-1&&!d(a))&&l(a,c))})["catch"](function(){t(a);b(a,!1)}))}function h(a){a.target.empty();0<a.prefill&&
!d(a)&&l(a,{prefilling:!0})}function d(a){height=a.target.offset().top-(a.wrapperIsGlobal?0:a.wrapper.offset().top)+a.target.get(0).scrollHeight-(a.loadingIndicatorElement?a.loadingIndicatorElement.outerHeight():0);return height>(a.wrapperIsGlobal?e(window).height():a.wrapper.height())}function c(a){a=e(a);var b=a.css("position"),c="absolute"===b,d=/(auto|scroll)/,f=a.add(a.parents()).filter(function(){var a=e(this);return c&&"static"===a.css("position")?!1:d.test(a.css("overflow")+a.css("overflow-y")+
a.css("overflow-x"))}).eq(-1);return"fixed"!==b&&f.length?f:e(a[0].ownerDocument||document)}function b(a,b){b!==g&&(a.loadingEnabled=b);return a.loadingEnabled}function a(a){!a.loadMoreIndicatorElement&&a.loadMoreIndicator&&(a.loadMoreIndicatorElement=e(a.loadMoreIndicator(a)).hide().appendTo(a.selection).on("click",function(c){p(a);b(a,!0);l(a);return!1}))}function n(b){a(b);b.loadMoreIndicatorElement&&b.loadMoreIndicatorElement.appendTo(b.selection).show()}function p(a,b){a.loadMoreIndicatorElement&&
(a.loadMoreIndicatorElement.hide().appendTo(a.selection),b&&(a.loadMoreIndicatorElement.remove(),a.loadMoreIndicatorElement=null))}function u(a){!a.loadingIndicatorElement&&a.loadingIndicator&&(a.loadingIndicatorElement=e(a.loadingIndicator(a)).css({visibility:"hidden"}).appendTo(a.selection));a.loadingIndicatorElement&&a.loadingIndicatorElement.appendTo(a.selection).css({visibility:"visible"})}function t(a,b){a.loadingIndicatorElement&&(a.loadingIndicatorElement.css({visibility:"hidden"}).appendTo(a.selection),
b&&(a.loadingIndicatorElement.remove(),a.loadingIndicatorElement=null));p(a,b)}function m(a){!a.topIndicatorElement&&(a.wrapperIsGlobal&&a.topIndicator)&&(a.topIndicatorElement=e(a.topIndicator(a)).css({position:"fixed",bottom:"10px",right:"10px"}).appendTo("body").hide().on("click",function(){s(a);a.scrolling=!0;e("html, body").animate({scrollTop:0},{duration:a.animationDuration,complete:function(){a.scrolling=!1}})}))}function s(a,b){a.topIndicatorElement&&(a.topIndicatorElement.fadeOut(a.animationDuration),
a.topIndicatorShown=!1,b&&(a.topIndicatorElement.remove(),a.topIndicatorElement=null))}var v="evolutionScrollable_context",y={reset:function(){var a=this.data(v);if(null!==a)return this.each(function(){a.target.empty();a.pageIndex=0;t(a,!0);s(a,!0);b(a,!0);a.wrapper.scrollTop(0);h(a)})},loadMoreVisible:function(a){var b=this.data(v);if(null!==b)return this.each(function(){a!==g&&(a?n(b):p(b))})}};e.fn.evolutionScrollable=function(a){if(a in y)return y[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionScrollable");else return k.apply(this,arguments)};e.fn.evolutionScrollable.defaults={load:null,target:null,wrapper:null,initialPageIndex:0,prefill:10,batch:10,animationDuration:250,loadMoreLabel:"Load More",returnToTopLabel:"Return to Top",loadMoreIndicator:function(a){return"<span class='scrollable-load-more'>"+a.loadMoreLabel+"</span>"},loadingIndicator:function(a){return"<span class='scrollable-loading ui-loading' data-width='26' data-height='26'></span>"},
topIndicator:function(a){return"<span class='scrollable-top'>"+a.returnToTopLabel+"</span>"}};return{}},jQuery,window);q("plugin.evolutionScrollSlider",["lib.util"],function(e,f,g,k){var l=!1,h=function(c){var b=c.window.height()>=c.document.height(),a=function(){var a=c.document.height(),b=c.window.height(),d=c.window.scrollTop();return(a-d-b)/a};c.window.on("scroll.evolutionScrollSlider",e.requestAnimationFrameThrottle(function(){b=!0}));setInterval(function(){b&&(b=!1,!l&&1-a()>=c.revealAt?(l=
!0,c.document.trigger("evolutionScrollSliderShow")):l&&1-a()<c.revealAt&&(l=!1,c.document.trigger("evolutionScrollSliderHide")))},c.bounceDelay)},d=function(c){var b=f("<div></div>").hide().addClass(c.className).css({width:c.width,minHeight:c.height,maxHeight:0.7*c.window.height(),position:"fixed",bottom:c.offsetBottom,right:"0px"}).appendTo("body"),a=function(){c.load(function(a){a&&(b.html(a),f.fn.evolutionTransform.accelerated()?b.hide().evolutionTransform({left:b.width()+c.offsetRight,opacity:0},
{duration:0}).show().evolutionTransform({left:-1*c.offsetRight,opacity:1},{duration:200}):b.css({right:-b.width()}).show().animate({right:c.offsetRight},{duration:c.animationDuration}))})},d=function(){f.fn.evolutionTransform.accelerated()?b.evolutionTransform({opacity:0},{duration:100,complete:function(){b.hide()}}):b.animate({right:-b.width()},{duration:c.animationDuration,complete:function(){b.hide()}})};c.document.on("evolutionScrollSliderShow.evolutionScrollSlider",function(){a()}).on("evolutionScrollSliderHide.evolutionScrollSlider",
function(){d()})};f.evolutionScrollSlider=function(c){c=f.extend({},f.evolutionScrollSlider.defaults,c||{},{window:f(window),document:f(document)});c.document.off(".evolutionScrollSlider");c.window.off(".evolutionScrollSlider");h(c);d(c)};f.evolutionScrollSlider.hide=function(){f(document).trigger("evolutionScrollSliderHide")};f.evolutionScrollSlider.defaults={load:function(c){c(null)},width:400,height:75,className:"slider-content",animationDuration:250,offsetBottom:25,offsetRight:25,bounceDelay:150,
revealAt:0.8};return{}},jQuery,window);q("plugin.evolutionStarRating",function(e,f,g){var k=[],l=function(c,b){return c.internal.imagesInCfs?1==b%2?c.settings.imagesPathUrl+"star_2D00_right_2D00_on.png":c.settings.imagesPathUrl+"star_2D00_left_2D00_on.png":1==b%2?c.settings.imagesPathUrl+"star-right-on.png":c.settings.imagesPathUrl+"star-left-on.png"},h=function(c,b){return c.internal.imagesInCfs?1==b%2?c.settings.imagesPathUrl+"star_2D00_right_2D00_off.png":c.settings.imagesPathUrl+"star_2D00_left_2D00_off.png":
1==b%2?c.settings.imagesPathUrl+"star-right-off.png":c.settings.imagesPathUrl+"star-left-off.png"};_cacheImages=function(c){var b,a,d;if("img"==c.settings.starElement)for(d=0;2>d;d++)a=l(c,d),_isImageCached(a)||(b=new Image,b.src=a,k[k.length]=b),a=h(c,d),_isImageCached(a)||(b=new Image,b.src=a,k[k.length]=b)};_isImageCached=function(c,b){var a;for(a=0;a<k.length;a++)if(k[a].src==b)return!0;return!1};_getItemTitle=function(c,b,a){return"object"==typeof c.settings.titles?c.settings.titles[b].replace("{0}",
a):c.settings.titles?c.settings.titles.replace("{0}",a):a};_getValue=function(c){return"undefined"!==typeof c.internal.value?c.internal.value:c.settings.value};_setValue=function(c,b){c.internal.isInitialized&&!c.settings.isReadOnly&&(c.internal.value=b,c.settings.allowMultipleSelections||(c.settings.isReadOnly=!0),c.internal.savingValue=!0,c.settings.onRate(b))};_showValue=function(c,b){var a,d=2*c.settings.maxRating;b=2*b-1;var f="img"==c.settings.starElement;for(a=0;a<d;a++)a<=b?f?e(c.internal.state.find("img").get(a)).attr("src",
l(c,a)).removeClass().addClass("star-on-"+(0==a%2?"left":"right")):e(c.internal.state.find(c.settings.starElement).get(a)).removeClass().addClass("star-on-"+(0==a%2?"left":"right")):f?e(c.internal.state.find("img").get(a)).attr("src",h(c,a)).removeClass().addClass("star-off-"+(0==a%2?"left":"right")):e(c.internal.state.find(c.settings.starElement).get(a)).removeClass().addClass("star-off-"+(0==a%2?"left":"right"))};_mouseOver=function(c,b){c.internal.isInitialized&&!c.settings.isReadOnly&&(c.internal.state.addClass(c.settings.overClass),
_showValue(c,b))};_mouseOut=function(c,b){c.internal.isInitialized&&!c.settings.isReadOnly&&(c.internal.state.removeClass(c.settings.overClass),_showValue(c,b))};_init=function(c){return this.each(function(){var b={settings:e.extend({},e.fn.evolutionStarRating.defaults,c||{}),internal:{state:e(this)}};b.settings.imagesPathUrl||(b.settings.imagesPathUrl=e.telligent.evolution.site.getBaseUrl()+"cfs-file/__key/system/images/");b.internal.imagesInCfs=0<=b.settings.imagesPathUrl.indexOf("cfs-file");_cacheImages(b);
e(this).data("evolutionStarRating_context",b);_initialize(b)})};_initialize=function(c){c.internal.state.addClass(c.settings.starClass).css("white-space","nowrap").find("a").off(".evolutionStarRating").end().empty().on("mouseleave",function(){_showValue(c,_getValue(c))});c.settings.isReadOnly&&c.internal.state.addClass(c.settings.readOnlyClass);var b,a=2*c.settings.maxRating,d="undefined"===typeof c.settings.ratingCount,f="img"==c.settings.starElement;for(b=0;b<a;b++)(function(){var a,g;g=f?e("<img />").css({borderLeftWidth:"0px",
borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"}):e("<"+c.settings.starElement+"></"+c.settings.starElement+">");c.settings.isReadOnly||(a=e('<a href="#" />').css({textDecoration:"none"}).append(g));var k=(b+1)/2;k<=c.settings.value?f?g.attr("src",l(c,b)).addClass("star-on-"+(0==b%2?"left":"right")):g.addClass("star-on-"+(0==b%2?"left":"right")):f?g.attr("src",h(c,b)).addClass("star-off-"+(0==b%2?"left":"right")):g.addClass("star-off-"+(0==b%2?"left":"right"));if(!c.settings.isReadOnly){if(c.settings.useHalfStars)s=
_getItemTitle(c,b,k);else var k=Math.ceil(k),s=_getItemTitle(c,k,k);d&&a.attr("title",s).addClass("ui-tip");f&&g.attr("alt",s);a.data("rating-value",k).on("click.evolutionStarRating",function(b){_setValue(c,a.data("rating-value"));return!1}).on("focus.evolutionStarRating",function(b){_mouseOver(c,a.data("rating-value"))}).on("mouseover.evolutionStarRating",function(b){_mouseOver(c,a.data("rating-value"))}).on("blur.evolutionStarRating",function(b){_mouseOut(c,a.data("rating-value"))}).on("mouseout.evolutionStarRating",
function(b){_mouseOut(c,a.data("rating-value"))})}f&&g.attr("align","absmiddle").attr("border",0);a?c.internal.state.append(a):c.internal.state.append(g)})();_setMessage(c);c.internal.isInitialized=!0};_setMessage=function(c){if(c.settings.ratingMessageFormat&&!isNaN(parseInt(c.settings.ratingCount))&&!isNaN(parseInt(c.settings.value))){var b=c.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(10*c.settings.value)/10).replace(/\{max_rating\}/gi,c.settings.maxRating).replace(/\{count\}/gi,
c.settings.ratingCount);c.internal.state.attr("title",b).attr("aria-label",b)}};var d={val:function(c){var b=this.data("evolutionStarRating_context");return null!==b?"undefined"!==typeof c?(b.internal.value=c,_showValue(b,c),c):_getValue(b):0},readOnly:function(c){var b=this.data("evolutionStarRating_context");if(null!==b)if("undefined"!==typeof c)(b.settings.isReadOnly=c)?b.internal.state.find("a").css({cursor:"default"}):b.internal.state.find("a").css({cursor:"pointer"});else return b.settings.isReadOnly;
return!0},option:function(c,b){if("object"===typeof c)return this.each(function(){var a=e(this).data("evolutionStarRating_context");null!=a&&(a.settings=e.extend({},a.settings,c),_init.apply(e(this),[a.settings]))});if("undefined"!==typeof c&&"undefined"!==typeof b)return this.each(function(){var a=e(this).data("evolutionStarRating_context");null!=a&&(a.settings[c]=b,_init.apply(e(this),[a.settings]))});if("undefined"!==typeof c){var a=this.data("evolutionStarRating_context");return null!==a?a.settings[c]:
null}}};e.fn.evolutionStarRating=function(c){if(c in d)return d[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)e.error("Method "+c+" does not exist on jQuery.fn.evolutionStarRating");else return _init.apply(this,arguments)};e.extend(e.fn.evolutionStarRating,{defaults:{value:0,maxRating:5,imagesPathUrl:"",starElement:"img",useHalfStars:!1,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:"Terrible Poor Fair Average Good Excellent".split(" "),isReadOnly:!1,
allowMultipleSelections:!0,ratingCount:void 0,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(c){}}});return{}},jQuery,window);q("plugin.evolutionTagTextBox",function(e,f,g){var k={openTagSelector:function(){var b=this.data("evolutionTagTextBox");if(b){window.__tagEditor={SetSelectedTags:function(a){h(b,a)},GetAllTagsWithEncoding:function(){for(var a=[],c=b.settings.allTags,d=e("<div></div>"),f=0;f<c.length;f++)d.text(c[f]),a[f]=[c[f],d.html()];return a},GetSelectedTags:function(){return d(b)}};
var a=e.telligent.evolution.ensureRemoteUrlEncoding(b.settings.selectTagsModalUrl);"~/"==a.substr(0,2)&&(a=e.telligent.evolution.site.getBaseUrl()+a.substr(2));window.Telligent_Modal?window.Telligent_Modal.Open(a,400,350,null):e.glowModal&&e.glowModal(a,{width:400,height:350})}},val:function(b){if(b===g)return(b=this.data("evolutionTagTextBox"))?d(b).join(","):"";var a=[];0<=b.indexOf(";")&&(b=b.replace(/;/g,","));b=b.split(/,/g);for(var c=0;c<b.length;c++){var f=e.trim(b[c]);f&&a.push(f)}return this.each(function(){var b=
e(this).data("evolutionTagTextBox");b&&h(b,a)})}},l=function(b){return this.each(function(){var a={settings:e.extend({},e.fn.evolutionTagTextBox.defaults,b||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",currentTag:"",currentTagPosition:0}},d=e(this);0<=d.val().indexOf(";")&&d.val(d.val().replace(/;/g,","));for(var f=d.val().split(/,/g),g=[],h=0;h<f.length;h++){var k=e.trim(f[h]);k&&g.push(e.telligent.evolution.html.encode(k))}d.data("evolutionTagTextBox",a);
d.glowLookUpTextBox({emptyHtml:"",maxValues:100,selectedLookUpsHtml:g,minimumLookUpLength:0,onGetLookUps:function(b,d){window.clearTimeout(a.suggestTimeout);d&&b.glowLookUpTextBox("updateSuggestions",[b.glowLookUpTextBox("createLookUp","",'<span class="ui-loading" width="48" height="48"></span>','<span class="ui-loading" width="48" height="48"></span>',!1)]);a.suggestTimeout=window.setTimeout(function(){c(a,d).then(function(a){for(var c=[],f=!1,g=0;g<a.length;g++)a[g].toLowerCase()==d.toLowerCase()?
f=!0:c.push(b.glowLookUpTextBox("createLookUp",a[g],e.telligent.evolution.html.encode(a[g]),e.telligent.evolution.html.encode(a[g]),!0));d&&(f?c.unshift(b.glowLookUpTextBox("createLookUp",d,e.telligent.evolution.html.encode(d),e.telligent.evolution.html.encode(d),!0)):c.unshift(b.glowLookUpTextBox("createLookUp",d,'<em class="new-tag">'+e.telligent.evolution.html.encode(d)+"</em>",'<em class="new-tag">'+e.telligent.evolution.html.encode(d)+"</em>",!0)));b.glowLookUpTextBox("updateSuggestions",c)})},
500)}}).on("glowLookUpTextBoxChange",function(){d.trigger("change")})})},h=function(b,a){for(var c=e(b.internal.state);0<c.glowLookUpTextBox("count");)c.glowLookUpTextBox("removeByIndex",0);for(var d=0;d<a.length;d++){var f=c.glowLookUpTextBox("createLookUp",a[d],e.telligent.evolution.html.encode(a[d]),e.telligent.evolution.html.encode(a[d]),!0);c.glowLookUpTextBox("add",f)}},d=function(b){var a=[];b=e(b.internal.state);for(var c=b.glowLookUpTextBox("count"),d=0;d<c;d++){var f=b.glowLookUpTextBox("getByIndex",
d);f&&a.push(f.Value)}return a},c=function(b,a){return e.Deferred(function(c){var f,g,h,k,l=d(b);if(b.settings.applicationId)e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/aggregatetags.json",data:{ApplicationId:b.settings.applicationId,TagNameFilter:a,PageSize:a?20:100,PageIndex:0,MinimumContentCount:0,TypeId:b.settings.typeId,SortBy:"ContentCount",SortOrder:"Descending"}}).then(function(a){var b=[];for(f=0;f<a.AggregateTags.length;f++){h=!1;k=e.telligent.evolution.html.decode(a.AggregateTags[f].Name);
for(g=0;g<l.length&&!h;g++)l[g].toLowerCase()==k.toLowerCase()&&(h=!0);h||b.push(k)}c.resolve(b)})["catch"](function(){c.resolve([])});else{var v=b.settings.allTags,q=[];for(f=0;f<v.length&&(!a||20>=q.length);f++)if(0===v[f].toLowerCase().indexOf(a.toLowerCase())){h=!1;for(g=0;g<l.length&&!h;g++)l[g].toLowerCase()==v[f].toLowerCase()&&(h=!0);h||q.push(v[f])}c.resolve(q)}}).promise()};e.fn.evolutionTagTextBox=function(b){if(b in k)return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==
typeof b&&b)e.error("Method "+b+" does not exist on jQuery.fn.evolutionTagTextBox");else return l.apply(this,arguments)};e.extend(e.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/tagselector?TagEditor=__tagEditor",applicationId:null,typeId:null}});return{}},jQuery,window);q("plugin.evolutionTextEditor",function(e,f,g){var k=function(a){return e(a).data("__EVOLUTIONTEXTEDITOR_CONTEXT")},l=function(a){var b="";a.isReadOnly?b=a.readOnlyView.html():e.telligent.evolution.put({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/html/fromtext.json",data:{text:a.editor.evolutionComposer("val")},dataType:"json",async:!1,success:function(a){b=a.Html}});return b},h=function(a,b){e.telligent.evolution.put({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/text/fromhtml.json",data:{html:b},dataType:"json",async:!1,success:function(c){c.TextConversion.IsDataLost?(a.isReadOnly||(a.readOnlyView.css("height",a.editor.height()+"px"),a.readOnlyView.css("width",a.editor.width()+"px"),a.isReadOnly=!0,a.readOnlyView.show(),
a.editorWrapper.hide()),a.readOnlyView.html(b),a.editor.val("<!html>"+b)):(a.isReadOnly&&(a.isReadOnly=!1,a.readOnlyView.hide(),a.editorWrapper.show()),a.editor.evolutionComposer("val",c.TextConversion.Text),a.editor.trigger("input"))}})},d=function(a){var b=function(){var c=a.editorWrapper.offset(),d=a.editorWrapper.height();if(!a.isReadOnly)if(d){var g=e(f),h=g.scrollTop(),g=g.height(),k=Math.max(0,g-e("body").height());h+g<c.top+d?e("body, html").animate({scrollTop:(d>g-k?c.top-k:c.top-(g-d-5))+
"px"},200,"swing",function(){a.editor.focus()}):h+k>c.top?e("body, html").animate({scrollTop:c.top-k+"px"},200,"swing",function(){a.editor.focus()}):a.editor.focus()}else f.clearTimeout(a.attemptFocusHandle),a.attemptFocusHandle=f.setTimeout(function(){b()},50)};b()},c=function(a,b,c){a.editor.evolutionComposer("resize",b,c);isNaN(parseInt(b,10))||a.readOnlyView.css("width",b+"px");isNaN(parseInt(c,10))||a.readOnlyView.css("height",c+"px")},b=function(a){var b=a.width,d=a.height;"%"==a.cssWidth.substr(a.cssWidth.length-
1)&&(b=a.editorWrapper.parent().width()*(parseInt(a.cssWidth,10)/100)-parseInt(a.editor.css("padding-left"),10)-parseInt(a.editor.css("padding-right"),10)-(a.editor.outerWidth()-a.editor.innerWidth()),c(a,b,d))},a={init:function(a){return this.each(function(){var b=e(this),c,d;if(!b.data("__EVOLUTIONTEXTEDITOR_CONTEXT")){var f=b.css("width"),g=b.css("height"),l=b.innerWidth()-parseInt(b.css("padding-left"),10)-parseInt(b.css("padding-right"),10),q=b.innerHeight()-parseInt(b.css("padding-top"),10)-
parseInt(b.css("padding-bottom"),10),x=b.val(),r=e('<div class="text-editor-wrapper"></div>');r.insertAfter(b);r.append(b);if(a.onSubmit){var w="cb_"+(new Date).getTime(),z=[];z.push('<div class="text-editor-submit-panel">');z.push(a.beforeSubmitHtml||"");a.enableToggle&&(z.push('<span class="text-editor-submit-panel-message">'),z.push('<input type="checkbox" id="'+w+'_enable" />'),z.push('<label for="'+w+'_enable">'+(a.submitEnterMessage||"Press enter to send")+"</label>"),z.push("</span>"));z.push('<button type="button" class="text-editor-submit-panel-button" id="'+
w+'_submit">');z.push(a.submitButtonText||"Send");z.push("</button>");z.push(a.afterSubmitHtml||"");z.push("</div>");r.append(z.join(""));c=r.find("#"+w+"_enable");d=r.find("#"+w+"_submit")}w=e('<div class="text-editor-read-only" style="overflow: auto; padding: 2px; border: 1px solid; box-sizing: border-box"></div>').hide();w.on("click",function(){a.readOnlyMessage&&alert(a.readOnlyMessage)});w.insertAfter(r);b.evolutionComposer({plugins:a.plugins,focus:!1}).data("__EVOLUTIONTEXTEDITOR_CONTEXT",{editorWrapper:r,
editor:b,readOnlyView:w,isReadOnly:!1,onKeyDowns:[],onChanges:[],cssWidth:f,cssHeight:g,width:l,height:q});b.evolutionComposer("oninput",function(a){var c=k(b);if(c&&c.onChanges&&0<c.onChanges.length)for(var d=0;d<c.onChanges.length;d++)try{c.onChanges[d](a)}catch(e){}return!0});if(a.onSubmit){if(a.enableToggle){b.evolutionComposer("onkeydown",function(d){if(13!=d.keyCode||!c.is(":checked")||d.shiftKey||d.altKey){var e=k(b);if(e&&e.onKeyDowns&&0<e.onKeyDowns.length)for(var f=0;f<e.onKeyDowns.length;f++)try{e.onKeyDowns[f](d)}catch(g){}return!0}if(a.onSubmit)a.onSubmit();
return!1});f=a.enterToSubmit;null!=window.localStorage&&null!==window.localStorage.getItem("tinymce-entertosubmit")&&(f="true"==window.localStorage.getItem("tinymce-entertosubmit"));f?c.prop("checked",!0):c.prop("checked",!1);var A=function(){c.is(":checked")?d.hide():d.show();null!=window.localStorage&&window.localStorage.setItem("tinymce-entertosubmit",c.is(":checked").toString())};c.on("change",function(){A();return!0});A()}d.on("click",function(b){if(a.onSubmit)a.onSubmit();return!1})}else b.evolutionComposer("onkeydown",
function(a){var c=k(b);if(c&&c.onKeyDowns&&0<c.onKeyDowns.length)for(var d=0;d<c.onKeyDowns.length;d++)try{c.onKeyDowns[d](a)}catch(e){}return!0});setTimeout(function(){b.evolutionComposer("resize",l,q)},50);0<e.trim(x).length&&h(k(b),x)}})},val:function(a){if("undefined"!==typeof a){var b=k(this);if(b)return h(b,a)}else return(b=k(this))?l(b):"";return this},focus:function(){var a=k(this);a&&(b(a),d(a));return this},onKeyDown:function(a){var b=k(this);b&&b.onKeyDowns.push(a);return this},onChange:function(a){var b=
k(this);b&&b.onChanges.push(a);return this},resize:function(a,b){var d=k(this);d&&c(d,a,b);return this},appendTo:function(a){var c=k(this);c?(c.editorWrapper.appendTo(a),b(c)):this.appendTo(a);return this}};e.fn.evolutionTextEditor=function(b){if(a[b])return a[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)e.error("Method "+b+" does not exist on jQuery.evolutionTextEditor");else return a.init.apply(this,arguments)};return{}},jQuery,window);q("plugin.evolutionSqueezeText",
function(e,f,g){function k(b){return parseFloat(e(b).css("font-size"))}function l(b){return parseFloat(e(b).css("letter-spacing"))}function h(b,a){e(b).css("font-size",a)}function d(b,a){e(b).css("letter-spacing",a)}var c={minSize:9,minSpacing:-0.5,enableSpacing:!0,resetOnFailure:!1,truncateOnFailure:!0,onFailure:function(){}};e.fn.evolutionSqueezeText=function(b){var a=e.extend({},c,b||{});return this.each(function(){e(this).css({"white-space":"nowrap",overflow:"hidden"});if(!(this.scrollWidth<=
this.offsetWidth)){var b=a.enableSpacing?1:2,c=a.minSpacing,f=a.minSize,g=l(this),m=k(this),s=m,v=g,q=g,x=m,r=0,w,z;for(z=0;50>z;z++)if(1===b&&a.enableSpacing){if(this.scrollWidth<=this.offsetWidth){w=g;var A=l(this);w=A+(w-A)/2}else w=c,A=l(this),w+=(A-w)/2;d(this,w);this.scrollWidth<=this.offsetWidth?c=w:g=w;if(0.01>=Math.abs(w-a.minSpacing)&&2>r)r++,b=2,g=q=v,c=a.minSpacing,d(this,v);else if(0.01>=Math.abs(q-w))break;else q=w}else if(2===b)if(this.scrollWidth<=this.offsetWidth?(w=m,A=k(this),w=
A+(w-A)/2):(w=f,A=k(this),w+=(A-w)/2),h(this,w),this.scrollWidth<=this.offsetWidth?f=w:m=w,0.01>=Math.abs(w-a.minSize)&&a.enableSpacing&&2>r)r++,b=1;else if(0.01>=Math.abs(x-w))if(a.enableSpacing&&2>r)r++,b=1;else break;else x=w;this.scrollWidth<=this.offsetWidth||(a.resetOnFailure&&(h(this,s),d(this,v)),a.truncateOnFailure&&e(this).css("text-overflow","ellipsis"),a.onFailure&&a.onFailure.apply(this))}})};e.fn.evolutionSqueezeText.defaults=c;return{}},jQuery,window);q("plugin.evolutionTheater",["lib.globalConfiguration"],
function(e,f,g,k){var l={show:function(h){var d=f.extend({},l.defaults,h||{});h=e.previewClose;var c=f('<div class="theater-mask"></div>').css("opacity","0").appendTo("body"),b=f('<div class="theater-loading"><span class="ui-loading"></span></div>').appendTo(c),a=f('<div class="theater-container"></div>').css("opacity","0").appendTo(c),k=f('<div class="theater-content-container"></div>').appendTo(a),p=f('<div class="theater-content"></div>').appendTo(k),u=f('<a href="#" class="theater-close">'+h+
"</a>").appendTo(c),t=null,m=function(c,e){t=c;c(function(c){e?e(p,c):p.html(c);g.setTimeout(function(){b.hide();d.loaded(p);a.css("opacity","1")},50)})},s=function(){c.css("opacity","0");window.setTimeout(function(){c.remove()},100);u.off("._evolution_theater");a.off("._evolution_theater");f(document).off("._evolution_theater");f(document).off("._evolution_theater");f("body").css("overflow","")};l.refresh=function(a){m(t,a)};l.hide=function(){s()};(function(){f("body").css({overflow:"hidden"});f(document).off(".evolutionTheater").on("pointerstart._evolution_theater",
".theater-mask",function(a){a=this.scrollTop;var b=this.scrollHeight,c=a+this.offsetHeight;0===a?this.scrollTop=1:c===b&&(this.scrollTop=a-1)}).on("pointermove._evolution_theater",{passive:!1},function(a){for(var b=a.target,c=!1;null!==b;){if(b.classList&&b.classList.contains("theater-mask")){c=!0;break}b=b.parentNode}c||a.preventDefault()})})();u.on("click._evolution_theater",function(a){a.preventDefault();s()});a.on("click._evolution_theater",function(b){b.target===a.get(0)&&s()});f(document).on("keydown._evolution_theater",
function(a){27===a.which&&s()});c.css("opacity","1");m(d.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},loaded:function(){}}};f.evolutionTheater=l;return{}},jQuery,window);q("plugin.evolutionThreadReplies.controller",["plugin.evolutionThreadReplies.model","plugin.evolutionThreadReplies.navigator","plugin.evolutionThreadReplies.repliesView","plugin.evolutionThreadReplies.votersPopup","plugin.evolutionThreadReplies.utility"],function(e,f,g,k,l,h,d,c){function b(b){b.model=
new e({onListReplies:b.onListReplies,onListVoters:b.onListVoters,onAddReply:b.onAddReply,onEditReply:b.onEditReply,onGetReply:b.onGetReply,onVoteReply:b.onVoteReply,onFilterChange:b.onFilterChange,onTyping:b.onTyping,onInit:b.onInit,onTypingStarted:function(a){b.view.indicateTyping({typing:!0,parentId:a.parentId,authorDisplayName:a.authorDisplayName});b.typingTimeouts=b.typingTimeouts||{};d.clearTimeout(b.typingTimeouts[a.parentId]);delete b.typingTimeouts[a.parentId];b.typingTimeouts[a.parentId]=
d.setTimeout(function(){b.view.indicateTyping({typing:!1,parentId:a.parentId,authorDisplayName:a.authorDisplayName})},1.5*a.delay)},onReplyCreated:function(a,c){var d=a.forceRender;if(!d){b.view.indicateTyping({typing:!1,parentId:a.parentId});if(b.interacting){b.view.indicateNewReplies({parentId:a.parentId,replyId:a.replyId});return}if(!b.view.isContainerVisible({parentId:a.parentId})||b.interacting){b.view.indicateNewReplies({parentId:a.parentId,replyId:a.replyId});return}}b.model.getReply({replyId:a.replyId}).then(function(c){c=
b.view.renderReplies({replies:[c],highlightNew:!0,permaLinked:a.replyId,includeExplicitLoaders:!0,sortBy:b.sortBy,sortOrder:b.sortOrder,onlyIfVisible:!d}).added;x(b);d?b.view.scrollTo({replyId:a.replyId}):c||b.view.indicateNewReplies({parentId:a.parentId,replyId:a.replyId})})},onReplyUpdated:function(a){s(b,a.replyId)||b.view.isReplyRendered({replyId:a.replyId})&&b.model.getReply({replyId:a.replyId}).then(function(c){!1!==c.isApproved&&b.view.renderReplies({replies:[c],highlightNew:!0,permaLinked:a.replyId,
highlightPermaLinked:!0})})},onVote:function(a){b.view.updateVotes({replyId:a.replyId,yesVotes:a.yesVotes,noVotes:a.noVotes,value:a.value})},onReplyDeleted:function(c){s(b,c.replyId)||a(b,c.replyId,c.deleteChildren)},onAttemptDelete:function(c){m(b,c.replyId);a(b,c.replyId,c.deleteChildren)},onShowReplyForm:function(a){b.view.showReplyForm(a)},onAttemptTyping:l.throttle(function(a){b.model.type({parentId:a.parentId})},1500),onAttemptCreate:function(a){a&&(a.body&&0!=h.trim(a.body).length)&&(b.view.hideReplyForms(),
m(b),b.model.addReply({parentId:a.parentId,body:a.body,data:a.data}).then(function(c){!1!==c.isApproved&&(b.view.renderReplies({replies:[c],sortBy:a.sortBy||b.sortBy,sortOrder:a.sortOrder||b.sortOrder,flattenedSortBy:b.flattenedSortBy,flattenedSortOrder:b.flattenedSortOrder,highlightNew:!0,permaLinked:c.id,includeExplicitLoaders:!0}),b.view.scrollTo({replyId:c.id}))}))},onAttemptUpdate:function(a){a&&(a.body&&0!=h.trim(a.body).length)&&(m(b,a.replyId),b.view.hideReplyForms(),b.model.editReply({replyId:a.replyId,
body:a.body,data:a.data}).then(function(a){!1!==a.isApproved&&b.view.renderReplies({replies:[a],highlightPermaLinked:!0,permaLinked:a.id})}))},shouldHandleLiveMutations:function(){return null==b.filter}})}function a(a,b,c){a.view.isReplyRendered({replyId:b})?c?a.view.removeReply({replyId:b}):a.model.getReply({replyId:b}).then(function(c){a.view.renderReplies({replies:[c],permaLinked:b})}):a.view.indicateRemovedReplies({replyId:b})}function n(a){a.flattenedSortOrder="CreatedDate"==a.sortBy?a.sortOrder:
"Ascending";a.navigator=new f({onParseReplyId:a.onParseReplyId,onGenerateReplyUrl:a.onGenerateReplyUrl,replySortByQueryStringKey:a.replySortByQueryStringKey,replyFilterQueryStringKey:a.replyFilterQueryStringKey,replySortOrderQueryStringKey:a.replySortOrderQueryStringKey,defaultReplyIdQueryStringValue:a.defaultReplyIdQueryStringValue,defaultReplySortByQueryStringValue:a.defaultReplySortByQueryStringValue,defaultReplySortOrderQueryStringValue:a.defaultReplySortOrderQueryStringValue,initialSortBy:a.sortBy,
initialSortOrder:a.sortOrder,initialFilter:a.filter,onLoadReply:function(b){return a.model.listReplies({replyId:b.replyId})},onLoadReplies:function(b){a.view.empty();a.view.showLoading();return a.model.listReplies({sortBy:b.replySortBy,sortOrder:b.replySortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,filter:b.replyFilter})},onRenderReply:function(b,c,d){d.resetFilter&&(a.model.filterChange(d),a.view.empty());a.view.renderReplies({replies:b,permaLinked:c,sortBy:d.sortBy,
sortOrder:d.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder});a.view.scrollTo({replyId:c,highlight:!0})},onRenderReplies:function(b,c){a.model.filterChange(c);a.view.empty();a.view.renderReplies({replies:b,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,appendOnly:!0})},onAdjustGlobalSort:function(b){a.sortBy=b.sortBy;a.filter=b.filter;a.sortOrder=b.sortOrder;a.flattenedSortOrder="CreatedDate"==b.sortBy?
b.sortOrder:"Ascending"}})}function p(a){h(a.container).empty().show();a.view=new g({wrapper:a.wrapper,container:a.container,loadMoreTemplate:a.loadMoreTemplate,newRepliesTemplate:a.newRepliesTemplate,replyTemplate:a.replyTemplate,typingIndicatorTemplate:a.typingIndicatorTemplate,replyListTemplate:a.replyListTemplate,replyFormTemplate:a.replyFormTemplate,pageSize:a.pageSize,flattenedDepth:a.flattenedDepth,threadUrl:a.threadUrl,loadOnScroll:a.loadOnScroll,delayLoadOnScroll:a.delayLoadOnScroll,highlightClassName:a.highlightClassName,
loadMoreSelector:a.loadMoreSelector,containerSelector:a.containerSelector,replySelector:a.replySelector,permalinkSelector:a.permalinkSelector,loadMorePreviousSelector:a.loadMorePreviousSelector,renderedContentSelector:a.renderedContentSelector,loadMoreNextSelector:a.loadMoreNextSelector,loadMoreLinkSelector:a.loadMoreLinkSelector,newReplySelector:a.newReplySelector,submitReplySelector:a.submitReplySelector,cancelReplySelector:a.cancelReplySelector,onEditorAppendTo:a.onEditorAppendTo,onEditorRemove:a.onEditorRemove,
onEditorVal:a.onEditorVal,onEditorFocus:a.onEditorFocus,baseLoadIndicatorsOnSiblings:a.baseLoadIndicatorsOnSiblings,highlightTimeout:1E3*a.highlightNewReplySeconds,onGetFilter:function(){return a.filter}})}function u(a){a.voterPopup=new k({modalTitleText:a.text.peopleWhoVoted,modalShowMoreText:a.text.more,noVotesText:a.text.noVotes,loadVoters:function(b){return a.model.listVoters(b)}});a.voterPopup.handleVoterPopupRequests({container:a.container})}function t(a){r.subscribe("ui.replies.navigate",function(b){a.navigator.navigate({url:b.url})});
r.subscribe("ui.replies.loadpage",function(b){a.model.listReplies({parentId:b.parentId,startReplyId:b.startReplyId,endReplyId:b.endReplyId,flattenedDepth:a.flattenedDepth-b.currentDepth+1,sortBy:b.sortBy,sortOrder:b.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,filter:b.filter,explicitPageIndex:b.explicitPageIndex}).then(function(c){0==a.view.renderReplies({replies:c.replies,sortBy:b.sortBy,sortOrder:b.sortOrder,offsetElement:b.offsetElement,flattenedSortBy:a.flattenedSortBy,
flattenedSortOrder:a.flattenedSortOrder,loadDirection:b.loadDirection,explicitContainer:b.explicitContainer,loadInline:b.loadInline}).addedCount&&a.noRepliesMessage&&h.telligent.evolution.notifications.show(a.noRepliesMessage)})});r.subscribe("ui.replies.delete",function(b){if(a.onDeletePrompt)a.onDeletePrompt({replyId:h(b.target).data("id")})});r.subscribe("ui.replies.edit.cancel",function(b){a.view.hideReplyForms()});r.subscribe("ui.replies.edit",function(b){var c=h(b.target).data("id");a.model.getReply({replyId:c}).then(function(b){h.fn.uilinks.hide();
a.view.renderEdit({replyId:c,reply:b})})});r.subscribe("ui.replies.interaction.start",function(){a.interacting=!0});r.subscribe("ui.replies.interaction.stop",function(){a.interacting=!1});r.subscribe("ui.replies.cancel",function(){a.view.hideReplyForms()});r.subscribe("ui.replies.new",function(b){var c=h(b.target).data("replyid");a.model.listReplies({replyId:c,includeSiblings:!0}).then(function(b){a.view.renderReplies({replies:b.replies,permaLinked:c,sortBy:a.sortBy,sortOrder:a.sortOrder,highlightNew:!0,
includeExplicitLoaders:!0,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder});a.view.scrollTo({replyId:c})}).fail(function(){a.view.indicateRemovedReplies({replyId:c})})});r.subscribe("ui.replies.vote.message",function(a){a=h(a.target);h.fn.evolutionTip.hide();a.hasClass("selected")?r.publish("ui.replies.unvote",{replyId:a.data("replyid")}):r.publish("ui.replies.vote",{replyId:a.data("replyid"),value:a.data("value")})});r.subscribe("ui.replies.vote",function(b){a.model.voteReply({replyId:b.replyId,
value:b.value}).then(function(c){a.view.updateVotes({replyId:b.replyId,yesVotes:c.yesVotes,noVotes:c.noVotes,value:c.value})})});r.subscribe("ui.replies.unvote",function(b){a.model.voteReply({replyId:b.replyId}).then(function(c){a.view.updateVotes({replyId:b.replyId,value:null})})})}function m(a,b,c){b=b||"root";a.blockedReplies||(a.blockedReplies={});a.blockedReplies[b]||(a.blockedReplies[b]=d.setTimeout(function(){delete a.blockedReplies[b]},c||2E3))}function s(a,b){return a.blockedReplies&&a.blockedReplies[b||
"root"]}function v(a){var b={sortBy:a.sortBy,sortOrder:a.sortOrder,filter:a.filter,initial:!0};a.replyId&&(b.replyId=a.replyId);a.replyOffsetId&&a.replyOffsetDirection&&("Previous"==a.replyOffsetDirection?b.endReplyId=a.replyOffsetId:b.startReplyId=a.replyOffsetId);return b}function q(a){var b=v(a);b.includeSiblings=!0;return a.model.listReplies(b).then(function(a){return a})}function x(a){a.headerContentRendered||(a.headerContentRendered=!0,a.headerContent&&a.view.appendHeaderContent(a.headerContent))}
var r=h.telligent.evolution.messaging,w={};return function(a){var c=h.extend({},w,a||{});c.replyId&&c.loadOnScroll&&(c.delayLoadOnScroll=!0);b(c);n(c);a=q(c);p(c);u(c);t(c);c.view.showLoading();a.then(function(a){a.replies&&0<a.replies.length&&x(c);c.view.empty();if(c.includeFirstPageOnPermalinks&&c.replyId&&!a.initialPage){var b=v(c);delete b.replyId;c.model.listReplies(b).then(function(b){h.telligent.evolution.ui.defer(h(".content-list.threaded").get(0),function(){c.view.renderReplies({replies:b.replies,
sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,appendOnly:!0});c.view.renderReplies({replies:a.replies,permaLinked:c.replyId,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,includeExplicitLoaders:!0})});setTimeout(function(){c.preFocus&&c.view.showReplyForm({replyId:c.replyId,focus:!0});c.view.scrollTo({replyId:c.replyId,highlight:!0})},300)})}else c.view.renderReplies({replies:a.replies,
permaLinked:a.initialPage?!1:c.replyId,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,appendOnly:!0}),c.replyId&&setTimeout(function(){c.preFocus&&c.view.showReplyForm({replyId:c.replyId,focus:!0});c.view.scrollTo({replyId:c.replyId,highlight:!0})},300);c.model.filterChange(v(c))});return{}}},jQuery,window);q("plugin.evolutionThreadReplies",["plugin.evolutionThreadReplies.controller"],function(e,f,g,k){var l={replyId:null,sortBy:null,
sortOrder:null,flattenedSortBy:null,flattenedSortOrder:null,replyOffsetId:null,replyOffsetDirection:null,preFocus:!1,headerContent:null,replyIdQueryStringKey:null,replySortByQueryStringKey:null,replyFilterQueryStringKey:null,replySortOrderQueryStringKey:null,threadUrl:"",pageSize:0,loadOnScroll:!1,onListReplies:function(e){},onListVoters:function(e){},onAddReply:function(e){},onEditReply:function(e){},onGetReply:function(e){},onVoteReply:function(e){},onFilterChange:function(e){},onDeletePrompt:function(e){},
onEditorAppendTo:function(e){},onEditorRemove:function(e){},onEditorVal:function(e){},onEditorFocus:function(e){},onInit:function(e){},replyTemplate:null,loadMoreTemplate:null,typingIndicatorTemplate:null,newRepliesTemplate:null,replyListTemplate:null,replyFormTemplate:null,highlightClassName:"new",loadMoreSelector:".load-more",loadMoreLinkSelector:".load-more a",loadMoreNextSelector:".load-more.next",loadMorePreviousSelector:".load-more.previous",containerSelector:"ul.content-list.threaded",replySelector:"li.threaded.content-item",
permalinkSelector:".reply-permalink",newReplySelector:"a.new-reply",submitReplySelector:"a.submit-new-reply",cancelReplySelector:"a.cancel-new-reply",renderedContentSelector:".rendered-content",wrapper:"",container:"",includeFirstPageOnPermalinks:!1,baseLoadIndicatorsOnSiblings:!1,highlightNewReplySeconds:4};f.fn.evolutionThreadedReplies=function(g){var d=f.extend({},l,g||{});return f(this).each(function(){new e(d)})};f.fn.evolutionThreadedReplies.defaults=l;return{}},jQuery,window);q("plugin.evolutionThreadReplies.model",
function(e,f,g){function k(e){if(e.onInit)e.onInit({raiseTypingStart:function(d){if(e.shouldHandleLiveMutations()&&e.onTypingStarted)e.onTypingStarted(d)},raiseReplyCreated:function(d){if(e.shouldHandleLiveMutations()&&e.onReplyCreated)e.onReplyCreated(d)},raiseReplyUpdated:function(d){if(e.onReplyUpdated)e.onReplyUpdated(d)},raiseVote:function(d){if(e.onVote)e.onVote(d)},raiseReplyDeleted:function(d){if(e.onReplyDeleted)e.onReplyDeleted(d)},attemptDelete:function(d){if(e.onAttemptDelete)e.onAttemptDelete(d)},
attemptTyping:function(d){if(e.onAttemptTyping)e.onAttemptTyping(d)},attemptCreate:function(d){if(e.onAttemptCreate)e.onAttemptCreate(d)},attemptUpdate:function(d){if(e.onAttemptUpdate)e.onAttemptUpdate(d)},showReplyForm:function(d){if(e.onShowReplyForm)e.onShowReplyForm(d||{})}})}var l={onListReplies:function(e){},onListVoters:function(e){},onAddReply:function(e){},onEditReply:function(e){},onGetReply:function(e){},getReply:function(e){},onTyping:function(e){},onInit:function(e){},onTypingStarted:function(e){},
onReplyCreated:function(e){},onReplyUpdated:function(e){},onVote:function(e){},onReplyDeleted:function(e){}};return function(f){var d=e.extend({},l,f||{});k(d);return{listReplies:function(c){if(d.onListReplies)return d.onListReplies(c)},listVoters:function(c){if(d.onListVoters)return d.onListVoters(c)},addReply:function(c){if(d.onAddReply)return d.onAddReply(c)},editReply:function(c){if(d.onEditReply)return d.onEditReply(c)},getReply:function(c){if(d.onGetReply)return d.onGetReply(c)},voteReply:function(c){if(d.onVoteReply)return d.onVoteReply(c)},
filterChange:function(c){if(d.onFilterChange)return d.onFilterChange(c)},type:function(c){if(d.onTyping)return d.onTyping(c)}}}},jQuery,window);q("plugin.evolutionThreadReplies.navigator",function(e,f,g){function k(h){var d=e.telligent.evolution.url.parseQuery(f.location.href),c=e.extend({replySortBy:h.defaultReplySortByQueryStringValue,replySortOrder:h.defaultReplySortOrderQueryStringValue,replyFilter:null},{replySortBy:d[h.replySortByQueryStringKey],replyFilter:d[h.replyFilterQueryStringKey],replySortOrder:d[h.replySortOrderQueryStringKey]});
if(h.onParseReplyId){var b=h.onParseReplyId();b!==g&&(null!==b&&!1!==b)&&(c.replyId=b)}var a=c.replyId&&h.currentFilter;h.currentSortBy=c.replySortBy;h.currentSortOrder=c.replySortOrder;h.currentFilter=c.replyFilter;c.replySortBy&&c.replySortOrder&&d[h.replySortByQueryStringKey]&&d[h.replySortOrderQueryStringKey]?(h.onAdjustGlobalSort({sortBy:c.replySortBy,sortOrder:c.replySortOrder,filter:c.replyFilter}),h.onLoadReplies(c).then(function(a){if(a&&a.replies&&h.onRenderReplies)h.onRenderReplies(a.replies,
{sortBy:c.replySortBy,sortOrder:c.replySortOrder,filter:c.replyFilter})})):c.replyId&&(h.onAdjustGlobalSort({sortBy:c.replySortBy,sortOrder:c.replySortOrder,filter:c.replyFilter}),h.onLoadReply(c).then(function(b){if(b&&b.replies&&h.onRenderReply)h.onRenderReply(b.replies,c.replyId,{sortBy:c.replySortBy,sortOrder:c.replySortOrder,filter:c.replyFilter,resetFilter:a})}))}var l={onParseReplyId:function(){},onGenerateReplyUrl:function(){},replySortByQueryStringKey:"",replyFilterQueryStringKey:"",replySortOrderQueryStringKey:"",
defaultReplySortByQueryStringValue:null,defaultReplySortOrderQueryStringValue:null,onLoadReply:function(e){},onLoadReplies:function(e){},onRenderReply:function(e,d){},onRenderReplies:function(e){}};return function(h){var d=e.extend({},l,h||{});e.extend(d,{currentSortBy:h.initialSortBy,currentSortOrder:h.initialSortOrder,currentFilter:h.initialFilter});var c=f.location.pathname;e(f).on("popstate",function(b){f.location.pathname!=c&&k(d);c=f.location.pathname});return{navigate:function(b){if(b.url)history.pushState({},
"",b.url);else{b.replyId&&(delete b.replySortOrder,delete b.replySortBy,delete b.replyFilter);var a={},c=null;b.replyId&&null!==b.newUrl&&b.newUrl!==g?c=d.onGenerateReplyUrl(b.replyId):(b.replySortBy&&(a[d.replySortByQueryStringKey]=b.replySortBy),b.replySortOrder&&(a[d.replySortOrderQueryStringKey]=b.replySortOrder),b.replyFilter&&(a[d.replyFilterQueryStringKey]=b.replyFilter),c=e.telligent.evolution.url.modify({url:f.location.href,query:a}));history.pushState({},"",c)}k(d)}}}},jQuery,window);q("plugin.evolutionThreadReplies.indicatorRegistrarView",
["plugin.evolutionThreadReplies.indicatorView"],function(e,f,g,k){var l={container:null,onGetExistingRenderedReply:function(e){},template:null};return function(g){var d=f.extend({},l,g||{},{indicators:{},offscreenIndicator:null});return{increment:function(c){var b=d.indicators[c.parentId];if(!b){var a=d.onGetExistingRenderedReply(c.parentId);a&&0<a.length&&(b=new e({container:a.find(".new-replies-wrapper").first(),template:d.template}),d.indicators[c.parentId]=b)}b&&b.increment(f.extend(c,{width:d.container.width()}));
b&&b.isVisible()||(d.offscreenIndicatorContainer=d.offscreenIndicatorContainer||f("<div></div>").prependTo(d.container),d.offscreenIndicator||(d.offscreenIndicator=new e({container:d.offscreenIndicatorContainer,offscreen:!0,template:d.template}),d.indicators.offscreen=d.offscreenIndicator),d.offscreenIndicator.increment(f.extend(c,{width:d.container.width()})));f.telligent.evolution.notifications.unread("+1",{isLocal:!0,namespace:"evolutionThreadReplies"})},isIndicating:function(c){return(c=d.indicators[c])?
c.isIndicating():!1},decrement:function(c){f.each(d.indicators,function(b,a){a.decrement(f.extend(c,{width:d.container.width()}))||(a.remove(),delete a[b])});f.telligent.evolution.notifications.unread("-1",{isLocal:!0,namespace:"evolutionThreadReplies"})}}}},jQuery,window);q("plugin.evolutionThreadReplies.indicatorView",["plugin.evolutionThreadReplies.utility"],function(e,f,g,k){var l={container:null,offscreen:!1,parentId:null,template:null};return function(g){var d=f.extend({},l,g||{},{replyStack:[]});
return{increment:function(c){var b=c.replyId.toString();0<d.replyStack.indexOf(b)||(d.replyStack.push(b),d.container.empty(),c=f(d.template({newReplies:d.replyStack.length,replyId:d.replyStack[0],offscreen:d.offscreen,width:c.width||100})),d.container.append(c))},decrement:function(c){var b=d.replyStack.indexOf(c.replyId.toString());0<=b&&d.replyStack.splice(b,1);return 0<d.replyStack.length?(d.container.empty(),c=f(d.template({newReplies:d.replyStack.length,replyId:d.replyStack[0],offscreen:d.offscreen,
width:c.width||100})),d.container.append(c),!0):!1},isIndicating:function(){return d.replyStack&&0<d.replyStack.length},isVisible:function(){return e.isFullyVisible(document,d.container,100)},remove:function(){d.container.empty()}}}},jQuery,window);q("plugin.evolutionThreadReplies.repliesView",["plugin.evolutionThreadReplies.indicatorRegistrarView","plugin.evolutionThreadReplies.utility","lib.util"],function(e,f,g,k,l,h){function d(a){k(document).on("scrollend",function(){if(!a.scrolling&&!a.loadingPage){var b=
a.container.find(a.loadMoreNextSelector+" a").last(),c=!1;b.parents(a.replySelector).each(function(){var b=k(this).next(a.replySelector);b&&0<b.length&&(c=!0)});c||b.trigger("click")}})}function c(a){a.wrapper=k(a.wrapper);a.container=k(a.container);a.headerContainer=k('<div class="reply-header"></div>').appendTo(a.container);x(a);a.replyTemplate=k.telligent.evolution.template(a.replyTemplate);a.loadMoreTemplate=k.telligent.evolution.template(a.loadMoreTemplate);a.typingIndicatorTemplate=k.telligent.evolution.template(a.typingIndicatorTemplate);
a.newRepliesTemplate=k.telligent.evolution.template(a.newRepliesTemplate);a.replyListTemplate=k.telligent.evolution.template(a.replyListTemplate);a.replyFormTemplate=k.telligent.evolution.template(a.replyFormTemplate);a.loadOnScroll&&!a.delayLoadOnScroll&&d(a);a.newRepliesIndicatorRegistrar=new e({container:a.container,onGetExistingRenderedReply:function(b){return a.root?v(a,a.root,b):null},template:a.newRepliesTemplate})}function b(b){b.wrapper.on("click","a.navigable",function(a){a.stopPropagation();
a.preventDefault();a=k(this).attr("href");k.telligent.evolution.messaging.publish("ui.replies.navigate",{url:a});return!1});b.wrapper.on("click",b.loadMoreLinkSelector,function(a){a.preventDefault();b.delayLoadOnScroll&&(b.loadOnScroll&&!b.loadOnScrollInited)&&(b.loadOnScrollInited=!0,d(b));var c=!1;"inline"==k(a.target).data("inline")&&(c=!0);var e=k(this).closest(b.replySelector).data("id"),f=k(this).closest(b.containerSelector),g=k(this).hasClass("previous")?"previous":"next",h=null,l=null;if("previous"==
g)h=k(this).closest(b.loadMoreSelector).next(b.replySelector);else{var h=k(this).closest(b.loadMoreSelector).prev(b.replySelector),m=h.find(".explicitpager");m&&0<m.length&&(l=m.data("explicitpageindex"))}m=n(b,f);b.loadingPage=!0;k.telligent.evolution.messaging.publish("ui.replies.loadpage",{parentId:e,startReplyId:"next"==g&&h&&0<h.length?h.data("id"):null,endReplyId:"previous"==g&&h&&0<h.length?h.data("id"):null,offsetElement:h,currentDepth:m,sortBy:f.data("sortby"),sortOrder:f.data("sortorder"),
filter:f.data("filter"),explicitPageIndex:l,loadDirection:g,explicitContainer:f,loadInline:c});k(a.target).closest("li").addClass("loading");return!1});b.wrapper.on("click",b.newReplySelector,function(a){a.preventDefault();a=k(a.target);0==a.closest(b.replySelector).find(">.newreply .reply-form").length?(B(b,a.closest(b.replySelector).data("id"),!0),a.data("label-cancel")&&a.html(a.data("label-cancel"))):(A(b),a.data("label-reply")&&a.html(a.data("label-reply")));return!1});var c=f.debounce(function(){k.telligent.evolution.messaging.publish("ui.replies.interaction.stop")},
2E3,function(){a(b)}),e=f.debounce(function(){b.container.find("li.content-item."+b.highlightClassName).each(function(){var a=k(this);a.data("_unhighlighting")||(a.data("_unhighlighting",!0),l.setTimeout(function(){a.removeClass(b.highlightClassName)},b.highlightTimeout))})},250);k(l).on("scroll",g.requestAnimationFrameThrottle(function(){c();e()}))}function a(a){k.telligent.evolution.messaging.publish("ui.replies.interaction.start")}function n(a,b){var c=b.data("depth");if(null==c||c==h)c=b.parents(a.containerSelector).length+
1,b.data("depth",c);return c}function p(a,b,c){c.addClass(a.highlightClassName);f.isPartiallyVisible(document,c)&&l.setTimeout(function(){c.removeClass(a.highlightClassName)},a.highlightTimeout)}function u(a,b,c,d){b&&(c&&d)&&(c.addClass("pending"),b[d.direction](c))}function t(a,b){b.find(a.loadMoreSelector+".pending").each(function(){var c=k(this),d=c.find("a").first(),e=c.hasClass("previous")?"Previous":"Next",f=null,f="Previous"==e?c.next(a.replySelector):c.prev(a.replySelector),g=c.closest(a.containerSelector),
h=n(a,g),l=a.threadUrl;1<h&&(l=g.closest(a.replySelector).find(a.permalinkSelector).first().attr("href"));e=k.telligent.evolution.url.modify({url:l,query:{ReplyOffsetId:f&&0<f.length?f.data("id"):null,ReplyOffsetDirection:e,ReplySortBy:b.data("sortby"),ReplySortOrder:b.data("sortorder")}});d.attr("href",e);c.removeClass("pending")})}function m(a,b,c,d,e,g){var h=!1,l=!1,r=null,w=null;e.permaLinked&&(e.includeExplicitLoaders&&0<c.length)&&(l=!0);if(l){var t=a.baseLoadIndicatorsOnSiblings,z;z=null;
z=b.children(a.loadMoreNextSelector+"");null!==z&&0<z.length&&(r=z,a.baseLoadIndicatorsOnSiblings&&(t=!0));t&&(a.baseLoadIndicatorsOnSiblings?(t=c[0].PreviousSiblingCount,z=b.children(a.replySelector).length,t>z&&(t=q(a,b,"previous",{inlineOnly:!0}),t&&0!=t.length&&document.contains(t[0])||(w=q(a,b,"previous",{createOnly:!0}),u(a,b,w,{direction:"append"})))):(t=q(a,b,"previous",{inlineOnly:!0}),t&&0!=t.length&&document.contains(t[0])||(w=q(a,b,"previous",{createOnly:!0}),u(a,b,w,{direction:"append"}))))}for(t=
0;t<c.length;t++){z=c[t];var A=v(a,b,z.id);if(A){e.loadInline&&0<A.next("li.load-more[data-inline]").length&&(h=!0);z.isDeleted&&A.addClass("deleted");A.data("createddate",z.createdDate);A.data("yesvotes",z.yesVotes);A.data("novotes",z.noVotes);A.data("model",z);var B=A.find(".rendered-content").first();B.empty().append(z.body);B.get(0).className="rendered-content "+z.status}else{if(g&&0==d&&0==t||!l&&e.permaLinked&&!e.touchedPermaLink){var x=q(a,b,"previous");a.baseLoadIndicatorsOnSiblings?0<z.PreviousSiblingCount?
u(a,b,x,{direction:"prepend"}):x.remove():u(a,b,x,{direction:"prepend"})}x=n(a,b);z.sortBy=x>a.flattenedDepth+1?e.flattenedSortBy:e.sortBy;z.sortOrder=x>a.flattenedDepth+1?e.flattenedSortOrder:e.sortOrder;a:{var C=a,A=b,Q=z,M=e.appendOnly,B=e.onlyIfVisible;Q.filter=C.filter;var x=k(C.replyTemplate(Q)),K=void 0,K=Q,L=x;L.data(G+"votes",K.yesVotes-K.noVotes);L.data(G+"createdDate",K.createdDateTicks||k.telligent.evolution.parseDate(K.createdDate).getTime());if(M)A.append(x),K=I.down;else if(M=A.children(C.replySelector),
C=s(C,M,Q,x),C<M.length){if(B&&!f.isBottomVisible(document,k(M.get(C)))){x=!1;break a}A=x.get(0);B=M.get(C);B.parentNode.insertBefore(A,B);K=I.up}else{if(B&&!f.isBottomVisible(document,A)){x=!1;break a}A.append(x);K=I.down}x={renderedReply:x,appendDirection:K}}if(x)x.appendDirection===I.down&&null!==r?r.remove():x.appendDirection===I.up&&null!==w&&w.remove();else return w&&w.remove(),!1;e.addedCount++;A=x.renderedReply;A.data("model",z);e.permaLinked&&!e.touchedPermaLink&&(B=q(a,b,"next"),a.baseLoadIndicatorsOnSiblings?
0<z.NextSiblingCount?(C=A.nextAll(a.replySelector),z.NextSiblingCount>C.length&&u(a,b,B,{direction:"append"})):B.remove():u(a,b,B,{direction:"append"}));z.id==e.permaLinked&&(e.touchedPermaLink=!0);e.highlightNew&&p(a,b,A)}e.highlightPermaLinked&&z.id==e.permaLinked&&p(a,b,A);a.newRepliesIndicatorRegistrar.decrement({replyId:z.id});if(z.children&&0<z.children.length&&(A=A.find(a.containerSelector).first(),!m(a,A,z.children,d+1,e)))return!1}e.loadInline&&(g=q(a,b,"previous",{inlineOnly:!0}),a.baseLoadIndicatorsOnSiblings?
(h=c[0],g.prevAll(a.replySelector).length>=h.PreviousSiblingCount&&g.remove()):(c.length<a.pageSize||h)&&g.remove());h=0===d&&e.loadDirection?"previous"==e.loadDirection?"previous":"down":x&&x.appendDirection==I.up?"previous":"down";if(!e.loadInline||0<d)c.length>=a.pageSize?(c=q(a,b,h),a.baseLoadIndicatorsOnSiblings?"previous"==h?(h=b.children(a.replySelector).first().data("model"))&&0<h.PreviousSiblingCount&&u(a,b,c,{direction:"prepend"}):(h=b.children(a.replySelector).last().data("model"))&&0<
h.NextSiblingCount&&u(a,b,c,{direction:"append"}):"previous"==h?u(a,b,c,{direction:"prepend"}):u(a,b,c,{direction:"append"})):e.permaLinked||q(a,b,h).remove();return!0}function s(a,b,c,d){var e="Ascending"==c.sortOrder?1:-1;return f.determineInsertionIndex(b,d,function(a,b){a=k(a);b=k(b);if("CreatedDate"==c.sortBy)return aDate=a.data(G+"createdDate"),bDate=b.data(G+"createdDate"),aDate<bDate?-1*e:aDate>bDate?1*e:0;aDate=a.data(G+"createdDate");bDate=b.data(G+"createdDate");aVotes=a.data(G+"votes");
bVotes=b.data(G+"votes");return aVotes<bVotes?-1*e:aVotes>bVotes?1*e:aDate<bDate?-1:aDate>bDate?1:0},{equivalentBefore:!1})}function v(a,b,c){return(a=b.find('li.content-item[data-id="'+c+'"]').first())&&a.length?a:null}function q(a,b,c,d){d=k.extend({createOnly:!1,inlineOnly:!1},d||{});var e=null;d&&!d.createOnly&&(e="previous"==c?b.children(a.loadMorePreviousSelector+(d.inlineOnly?"[data-inline]":"")):b.children(a.loadMoreNextSelector+(d.inlineOnly?"[data-inline]":"")));return e&&0<e.length?(d&&
!d.inlineOnly&&e.detach(),e):k(a.loadMoreTemplate({previous:"previous"==c,loadInline:d&&d.createOnly}))}function x(a){a.onEditorRemove();delete a.root;var b=a.container.children(".reply-header").detach();a.container.empty().append(b)}function r(a,b){var c=v(a,a.container,b.replyId);c&&0<c.length&&(clearTimeout(a.currentlyScrollingTiemeout),a.scrolling=!0,b.highlight&&(a.container.find(".permalinked").removeClass("permalinked"),c.addClass("permalinked")),c=c.find(a.renderedContentSelector).first(),
f.scrollToElementIfNotVisible(document,c,130),a.currentlyScrollingTiemeout=setTimeout(function(){a.scrolling=!1},1E3))}function w(a){a.fadeOut(500,function(){a.remove()})}function z(a,b){a.root.find('li.content-item[data-parentid="'+b+'"]').each(function(){var b=k(this);z(a,b.data("id"));var c=b.prev(a.loadMorePreviousSelector);w(c);w(b)})}function A(a){a.onEditorRemove();a.container.find(".reply-form").each(function(){k(this).closest(".threaded.content-item").removeClass("hide-content").removeClass("edit")}).remove();
a=a.wrapper.find(a.newReplySelector);a.data("label-reply")&&a.html(a.data("label-reply"))}function B(b,c){A(b);var d=null;if((d=v(b,b.root,c).find(".newreply").first())&&0!=d.length){var e=d.find(".reply-form").first();0==e.length&&(e=k(b.replyFormTemplate({editingReplyId:null})),d.append(e));b.onEditorAppendTo({container:e.find(".editor").first()});b.onEditorFocus();a(b)}}var C={replyTemplate:null,loadMoreTemplate:null,typingIndicatorTemplate:null,newRepliesTemplate:null,highlightClassName:"new",
wrapper:null,container:null,highlightTimeout:4E3,flattenedDepth:null,loadOnScroll:!1,threadUrl:""},G="_evolutionThreadReplies:",I={up:1,down:2};return function(d){var e=k.extend({},C,d||{});c(e);b(e);return{renderReplies:function(a){return k.telligent.evolution.ui.defer(k(".content-list.threaded").get(0),function(){e.container.find(e.loadMoreSelector).removeClass("loading");var b=e.loadingPage=!1;e.root||(b=!0,e.root=k(e.replyListTemplate({sortBy:0==e.flattenedDepth?a.flattenedSortBy:a.sortBy,sortOrder:0==
e.flattenedSortOrder?a.flattenedSortOrder:a.sortOrder,filter:e.filter===h?e.onGetFilter():e.filter})).appendTo(e.container));var c=a.explicitContainer?a.explicitContainer:e.root;if(!a.explicitContainer&&a.replies&&0<a.replies.length&&a.replies[0].parentId){var d=v(e,e.root,a.replies[0].parentId);d&&(c=d.find(e.containerSelector).first())}d=n(e,c)-1;!a.explicitContainer&&d>e.flattenedDepth&&(c=c.parents(e.containerSelector).first());a.addedCount=0;b=m(e,c,a.replies,0,a,b);t(e,c);return{added:b,addedCount:a.addedCount}})},
empty:function(){return x(e)},scrollTo:function(a){return r(e,a)},indicateTyping:function(a){if(!e.newRepliesIndicatorRegistrar.isIndicating(a.parentId)){var b=v(e,e.root,a.parentId),b=null!==b?b.find(".typing-status-wrapper").first():e.wrapper.find(".typing-status-wrapper").first();a.typing?b.empty().append(e.typingIndicatorTemplate({displayName:a.authorDisplayName})):b.empty()}},indicateNewReplies:function(a){e.root&&v(e,e.root,a.parentId);e.newRepliesIndicatorRegistrar.increment({parentId:a.parentId,
replyId:a.replyId})},indicateRemovedReplies:function(a){e.newRepliesIndicatorRegistrar.decrement({replyId:a.replyId})},updateVotes:function(a){var b=v(e,e.root,a.replyId);b&&0<b.length&&(b=b.find(".votes").first(),!0===a.value?(b.find("a.vote").removeClass("selected"),b.find(".up").first().addClass("selected")):!1===a.value?(b.find("a.vote").removeClass("selected"),b.find(".down").first().addClass("selected")):null===a.value&&b.find("a.vote").removeClass("selected"),a.yesVotes!==h&&a.noVotes!==h&&
(a=a.yesVotes-a.noVotes,b.find(".vote.current").html(0<a?"+"+a:a)))},renderEdit:function(b){var c=v(e,e.root,b.replyId);if(c&&0<c.length){c.addClass("hide-content").addClass("edit");A(e);var c=c.find(".edit-form").first(),d=c.find(".reply-form").first();0==d.length&&(d=k(e.replyFormTemplate({editingReplyId:b.replyId})),c.append(d));e.onEditorAppendTo({container:d.find(".editor").first()});e.onEditorVal({val:b.reply.rawBody,meta:b.reply});e.onEditorFocus();a(e)}},isContainerVisible:function(a){e.root?
(a=v(e,e.root,a.parentId),a&&0!=a.length||(a=e.root),a=f.isPartiallyVisible(document,a)):a=!1;return a},isReplyRendered:function(a){a=e.root?(a=v(e,e.root,a.replyId))&&0<a.length:!1;return a},hideReplyForms:function(){return A(e)},removeReply:function(a){e.onEditorRemove();if(e.root){var b=v(e,e.root,a.replyId);if(0<b.length){var c=b.prev(e.loadMorePreviousSelector);w(c)}w(b);z(e,a.replyId);e.newRepliesIndicatorRegistrar.decrement({replyId:a.replyId});a=void 0}else a=!1;return a},showReplyForm:function(a){return B(e,
a.replyId)},appendHeaderContent:function(a){e.headerContainer.append(a)},showLoading:function(){e.container.append('<span class="ui-loading" data-width="48" data-height="48"></span>')}}}},jQuery,window);q("plugin.evolutionThreadReplies.utility",function(e,f,g){var k={throttle:function(e,g){var d,c;return function(){var b=this,a=(new Date).getTime(),k=arguments;d&&d+(g||50)>a?(f.clearTimeout(c),c=f.setTimeout(function(){d=a;e.apply(b,k)},g||50)):(d=a,e.apply(b,k))}},debounce:function(e,f,d){var c;
return function(){var b=this,a=arguments;d&&!c&&d.apply(b,a);clearTimeout(c);c=null;c=setTimeout(function(){e.apply(b,a);clearTimeout(c);c=null},f||10)}},determineInsertionIndex:function(e,f,d,c){if(null==e||0===e.length||null===f)return 0;var b=0,a=e.length,g,k;g=d(f,e[b]);k=a-1===b?g:d(f,e[a-1]);if(0>g)return b;if(0===g)return c&&c.equivalentBefore?b:b+1;if(0<k)return a;if(0===k)return c&&c.equivalentBefore?a-1:a;for(;b<a;){g=Math.floor((b+a)/2);k=d(e[g],f);if(0===k)return c&&c.equivalentBefore?
g:g+1;0>k?b=g+1:a=g}return b},isPartiallyVisible:function(g,h,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var c=h instanceof jQuery?h.get(0).getBoundingClientRect():h.getBoundingClientRect();return 0<c.top-d&&c.top+d<=(f.innerHeight||document.documentElement.clientHeight)||0<c.bottom-d&&c.bottom+d<=(f.innerHeight||document.documentElement.clientHeight)}g=e(g);c=h.offset().top;h=c+h.height();var b=g.offset().top;g=b+g.height();return c+d>=b&&c-d<=g||h-d<=g&&h+
d>=b},isFullyVisible:function(g,h,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var c=h instanceof jQuery?h.get(0).getBoundingClientRect():h.getBoundingClientRect();return 0<c.top-d&&c.top+d<=(f.innerHeight||document.documentElement.clientHeight)&&0<c.bottom-d&&c.bottom+d<=(f.innerHeight||document.documentElement.clientHeight)}g=e(g);c=h.offset().top;h=c+h.height();var b=g.offset().top;g=b+g.height();return c+d>=b&&h-d<=g},isBottomVisible:function(g,h,d){d=d||
0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var c=h instanceof jQuery?h.get(0).getBoundingClientRect():h.getBoundingClientRect();return 0<c.bottom-d&&c.bottom+d<=(f.innerHeight||document.documentElement.clientHeight)}g=e(g);c=g.scrollTop();g=c+g.height();h=h.offset().top+h.height();return h-d<=g&&h+d>=c},isTopVisible:function(g,h,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var c=h instanceof jQuery?h.get(0).getBoundingClientRect():
h.getBoundingClientRect();return 0<c.top-d&&c.top+d<=(f.innerHeight||document.documentElement.clientHeight)}g=e(g);c=g.scrollTop();g=c+g.height();h=h.offset().top;return h+d<=g&&h-d>=c},scrollToElementIfNotVisible:function(f,g,d,c){d=d||0;c=c||100;k.isFullyVisible(f,g,d)||(f=e(f),f.get(0)==document&&(f=e("html, body")),f.stop().animate({scrollTop:g.offset().top-d},c))}};return k},jQuery,window);q("plugin.evolutionThreadReplies.votersPopup",function(e,f,g){var k={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',noVotesText:"No Votes",delegatedSelector:".votes .current",modalTitleText:"",modalShowMoreText:"More",loadVoters:function(e){}};return function(f){var g=e.extend({},k,f||{}),d=e.extend({},k,f||{}),
c=e.telligent.evolution.template.compile(d.votersTemplate),b=e.telligent.evolution.template.compile(d.votersPopupTemplate),a=function(a,b,c){g.loadVoters({replyId:a.replyid,pageIndex:b}).then(function(a){e.telligent.evolution.batch(function(){e.each(a.Users,function(a,b){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:b.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){b.userAvatarHtml=a.Html})})}).then(function(){c({voters:e.map(a.Users,
function(a){return{displayName:a.DisplayName,profileUrl:a.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},n=function(f,g){var h=0,l=e(c(e.extend(f,{noVotesText:d.noVotesText||k.noVotesText}))),n=e.telligent.evolution.ui.data(e(g)),v=e(b({voters:l,hasMorePages:f.hasMorePages,showMoreText:d.modalShowMoreText})),q=v.find("ul"),x=v.find(".show-more");q.html(l);x.on("click",function(b){b.preventDefault();h++;a(n,h,function(a){q.append(c(a));a.hasMorePages?
x.show():x.hide();q.scrollTop(q[0].scrollHeight)})});e.glowModal({title:d.modalTitleText,html:v,width:450,height:"100%"})};return{handleVoterPopupRequests:function(b){e(b.container).on("click",d.delegatedSelector,function(b){b.preventDefault();var c=e(this);b=e.telligent.evolution.ui.data(e(c));a(b,0,function(a){n(a,c)});return!1})}}}},jQuery,window);q("plugin.evolutionTip",["module.html"],function(e,f,g,k){function l(e,g){h();for(var k=f(e),l=["data-"+g.attribute,"title","alt"],s,q,y=0;y<l.length;y++){s=
l[y];var x=k.attr(s);if(x&&0<f.trim(x).length){q=f("<div>"+(x||"")+"</div>").text();break}}q&&0!=q.length&&(d={attribute:s,content:q,element:k,options:g,ui:f(g.template({content:q})).css({position:"absolute",top:-500,left:-500}).appendTo("body")},"title"!=d.attribute&&"alt"!=d.attribute||d.element.attr(d.attribute,""),q=f(window),s=f(document).scrollTop(),l=k.offset(),targetWidth=k.outerWidth(),targetHeight=k.outerHeight(),windowWidth=q.outerWidth(),windowHeight=q.outerHeight(),tipWidth=d.ui.outerWidth(),
tipHeight=d.ui.outerHeight(!0),g.horizontal?k=g.horizontal:(k=a.center,l.left-tipWidth/2<=b?k=a.left:windowWidth-(l.left+targetWidth+tipWidth/2)<=b&&(k=a.right)),g.vertical?q=g.vertical:(q=n.above,targetHeight+l.top-tipHeight-s<=b&&(q=n.below)),s=k==a.right?l.left+targetWidth-tipWidth:k==a.left?l.left:l.left+targetWidth/2-tipWidth/2,l=q==n.above?l.top-tipHeight:l.top+targetHeight,d.options.shown=!0,d.ui.addClass(q).addClass(k).css({left:s,top:l,"z-index":1E6}),clearInterval(c),c=setInterval(function(){d&&
d.element&&d.element.is(":visible")||h()},200))}function h(){d&&(d.ui.remove(),"title"!=d.attribute&&"alt"!=d.attribute||d.element.attr(d.attribute,e.encode(d.content)),d.options.shown=!1);clearInterval(c)}var d,c,b=30,a={left:"left",center:"center",right:"right"},n={above:"above",below:"below"};f.fn.evolutionTip=function(a){var b=f.extend({},f.fn.evolutionTip.defaults,a||{});b.template=f.telligent.evolution.template.compile(b.template);return this.off("._evolutionTip").on("mouseenter._evolutionTip mouseover._evolutionTip focus._evolutionTip",
function(a){a.originalEvent&&(a.originalEvent._evolutionTipHandled||b.shown||l(this,b),a.originalEvent._evolutionTipHandled=!0)}).on("mouseleave._evolutionTip blur._evolutionTip",function(){b.shown&&h()})};f.fn.evolutionTip.hide=function(){h()};f.fn.evolutionTip.defaults={template:'<div class="tip"><%: content %></div>',attribute:"tip"};return{}},jQuery,window);q("plugin.evolutionToggleLink",function(e,f,g){var k={val:function(d){if(void 0===d){var c=this.data("evolutionToggleLink");return c?c.settings.val:
!1}return this.each(function(){var b=e(this).data("evolutionToggleLink");b&&(b.settings.val=d,b.internal.processing=!1,h(b))})}},l=function(d){return this.each(function(){var c={settings:e.extend({},e.fn.evolutionToggleLink.defaults,d||{}),internal:{state:e(this),processing:!1}};c.internal.state.data("evolutionToggleLink",c).on("click",function(b){!c.internal.processing&&c.settings.changeState&&(c.internal.processing=!0,h(c),c.settings.changeState(!c.settings.val));return!1});h(c)})},h=function(d){d.internal.processing?
d.internal.state.attr("class",d.settings.processingCssClass).attr("title",""==d.settings.processingTitle?null:d.settings.processingTitle).html(d.settings.processingHtml):d.settings.val?d.internal.state.attr("class",d.settings.onCssClass).attr("title",""==d.settings.onTitle?null:d.settings.onTitle).html(d.settings.onHtml):d.internal.state.attr("class",d.settings.offCssClass).attr("title",""==d.settings.offTitle?null:d.settings.offTitle).html(d.settings.offHtml)};e.fn.evolutionToggleLink=function(d){if(d in
k)return k[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)e.error("Method "+d+" does not exist on jQuery.fn.evolutionToggleLink");else return l.apply(this,arguments)};e.extend(e.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:!1}});return{}},jQuery,window);q("plugin.evolutionTokenTextBox",function(e,f,g){function k(b){var a=b.internal.textbox.val(),
c="",d=0;b.internal.tokens.sort(function(a,b){return a.start-b.start});for(var e=0;e<b.internal.tokens.length;e++){var f=b.internal.tokens[e];f.start>d&&(c+=a.substr(d,f.start-d));c+=f.value;d=f.stop}d<a.length&&(c+=a.substr(d));b.internal.state.val(c);b.internal.lastLength=b.internal.textbox.val().length;b.internal.textbox.evolutionHighlight({ranges:b.internal.tokens})}function l(b){var a=b.internal.textbox.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){b=document.selection.createRange();
if(null===b)return 0;var a=a.createTextRange(),c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0}function h(b){for(var a=/\$\{token:([0-9a-f]{8,8}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{12,12})(?::([^}]*))?\}/gi,c,e=0,f="",g=b.internal.state.val(),h=[],l=0;c=a.exec(g);){var q=c.index;q>e&&(f+=g.substr(e,q-e));e=c[0];q=d[e];!q&&b.settings.previewToken&&(q=b.settings.previewToken(e));q||(q=e);h.push({start:c.index-l,stop:c.index-
l+q.length,value:e,text:q,className:b.settings.highlightClassName});l+=e.length-q.length;f+=q;e=a.lastIndex}e<g.length&&(f+=g.substr(e));b.internal.tokens=h;b.internal.textbox.val(f);k(b)}var d={},c={init:function(b){return e(this).each(function(){b.tokenPlaceholders&&(d=e.extend({},d,b.tokenPlaceholders),delete b.tokenPlaceholders);var a={settings:e.extend({},e.fn.evolutionTokenTextBox.defaults,b),internal:{state:e(this),textbox:e(this).clone().removeAttr("id").removeAttr("name").css("box-sizing",
"content-box"),lastLength:e(this).val().length,tokens:[]}};a.internal.state.after(a.internal.textbox).hide().data("_evolutionTokenTextBox",a);a.internal.textbox.on("evolutionRangeClick",function(b,c){f.evolutionInsertEditTokenOptions={dataTypeIds:a.settings.tokenDataTypeIds,token:c.value,save:function(b,f){d[b]=f;var g=a.internal.textbox.val(),g=g.substr(0,c.start)+f+g.substr(c.stop);a.internal.textbox.val(g);var h=c.stop,l=f.length-c.text.length;c.stop=c.start+f.length;c.value=b;c.text=f;e.each(a.internal.tokens,
function(){this.start>=h&&(this.start+=l,this.stop+=l)});k(a)},del:function(){var b=a.internal.textbox.val(),b=b.substr(0,c.start)+b.substr(c.stop),d=c.stop-c.start,f=c.start;a.internal.textbox.val(b);a.internal.tokens=e.grep(a.internal.tokens,function(a){return a.start!=f});e.each(a.internal.tokens,function(){this.start>=f&&(this.start-=d,this.stop-=d)});k(a)}};e.glowModal(a.settings.insertEditTokenUrl,{width:a.settings.insertEditTokenModalWidth,height:a.settings.insertEditTokenModalHeight})});a.internal.textbox.evolutionResize().on("evolutionResize",
function(){a.internal.textbox.evolutionHighlight("resize",a.internal.textbox.outerWidth(),a.internal.textbox.outerHeight())});a.internal.textbox.on("keydown",function(b){var c=l(a),d=!1,f=null;(37>b.which||40<b.which)&&e.each(a.internal.tokens,function(){(this.start<c||this.start==c&&46==b.which)&&(this.stop>c||this.stop==c&&8==b.which)&&(d=!0,f=this)});if(d){if(8==b.which||46==b.which){var g=a.internal.textbox.val(),g=g.substr(0,f.start)+g.substr(f.stop),h=f.stop-f.start,q=f.start;a.internal.textbox.val(g);
a.internal.tokens=e.grep(a.internal.tokens,function(a){return a.start!=q});e.each(a.internal.tokens,function(){this.start>=q&&(this.start-=h,this.stop-=h)});k(a);g=a.internal.textbox.get(0);g.createTextRange?(g=g.createTextRange(),g.move("character",c>q?c-h:c),g.select()):g.selectionStart&&(g.focus(),g.setSelectionRange(c>q?c-h:c,c>q?c-h:c))}b.preventDefault();b.stopPropagation();return!1}});a.internal.textbox.on("keyup",function(){var b=a.internal.textbox.val().length;if(b!=a.internal.lastLength){var c=
b-a.internal.lastLength;a.internal.lastLength=b;var d=l(a);e.each(a.internal.tokens,function(){this.start>=d-1&&(this.start+=c,this.stop+=c)});k(a)}});h(a)})},val:function(b){if(b===g){var a=e(this).data("_evolutionTokenTextBox");return a?a.internal.state.val():""}return e(this).each(function(){var a=e(this).data("_evolutionTokenTextBox");a&&(a.internal.state.val(b),h(a))})},insertToken:function(){return e(this).each(function(){var b=e(this).data("_evolutionTokenTextBox");b&&(f.evolutionInsertEditTokenOptions=
{dataTypeIds:b.settings.tokenDataTypeIds,token:"",save:function(a,c){d[a]=c;var f=l(b);b.internal.textbox.val(b.internal.textbox.val().substr(0,f)+c+b.internal.textbox.val().substr(f));e.each(b.internal.tokens,function(){this.start>=f&&(this.start+=c.length,this.stop+=c.length)});b.internal.tokens.push({start:f,stop:f+c.length,value:a,text:c,className:b.settings.highlightClassName});k(b)},del:function(){}},e.glowModal(b.settings.insertEditTokenUrl,{width:b.settings.insertEditTokenModalWidth,height:b.settings.insertEditTokenModalHeight}))})},
tokenDataTypeIds:function(b){if(b===g){var a=e(this).data("_evolutionTokenTextBox");return a?a.settings.tokenDataTypeIds:[]}return e(this).each(function(){var a=e(this).data("_evolutionTokenTextBox");a&&(a.settings.tokenDataTypeIds=b||[])})}};e.fn.evolutionTokenTextBox=function(b){if(c[b])return c[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)e.error("Method "+b+" does not exist on jQuery.evolutionHighlight");else return c.init.apply(this,arguments)};e.fn.evolutionTokenTextBox.defaults=
{highlightClassName:"token-highlight",insertEditTokenUrl:"",previewToken:function(b){return b},insertEditTokenModalWidth:400,insertEditTokenModalHeight:500,tokenDataTypeIds:[],tokenPlaceholders:null};return{}},jQuery,window);q("plugin.evolutionTransform",function(e,f,g){function k(){var a=(document.body||document.documentElement).style,b="Moz webkit Webkit Khtml O ms".split(" ");if("string"==typeof a.transition)return!0;for(var c=0;c<b.length;c++)if("string"==typeof a[b[c]+"Transition"])return!0;
return!1}function l(y,x){if(!this||0==this.length)return this;var r=y||{};x=x||{};var w=[],z,A,B=null,C=null,G=null,I=null;y=[];null===s&&(s=k());this.each(function(){if(3!==this.nodeType){var k=e(this),F=!1,O=null,P=function(){f.clearTimeout(O);F||(F=!0,k.css({transition:"all 0s"}).off(".evolutionTransform"),x.complete&&x.complete())};k.off(".evolutionTransform").on("transitionend.evolutionTransform webkitTransitionEnd.evolutionTransform oTransitionEnd.evolutionTransform MSTransitionEnd.evolutionTransform",
function(){P()});if(!s)return r.x&&(r.left=r.x),r.y&&(r.y=r.y),k.css(r);for(var H in l.defaults)x[H]||(x[H]=l.defaults[H]);for(var E in r)H=r[E],E===h||E===c?(z=H,delete r[E]):E===d||E===b?(A=H,delete r[E]):E===a?(B=H,delete r[E]):E===n?(C=H,delete r[E]):E===p?(G=H,delete r[E]):E===q?(I=H,delete r[E]):(E==t?0===H?r[E]=1E-5:1===H&&(r[E]=0.99999):"number"===typeof H&&0==H%1&&(r[E]=H+"px"),w[w.length]=E);if(z!=g||A!=g)y[y.length]="translate3d("+(z||0)+"px, "+(A||0)+"px, 0px)";B!=g&&(y[y.length]="rotateZ("+
B+"deg)");C!=g&&(y[y.length]="rotateX("+C+"deg)");G!=g&&(y[y.length]="rotateY("+G+"deg)");I!=g&&(y[y.length]="scale("+I+")");0<y.length&&(H=v+"transform",mergedTransforms=y.join(" "),w[w.length]=H,r[H]=mergedTransforms,r.transform=mergedTransforms);H=e.fn.evolutionTransform.animationEnabled?x.duration/1E3+"s "+x.easing:"";transition=w.join(" "+H+", ")+" "+H;e.noop(this.offsetHeight);if(G||C)m=m||e("body").get(0),m.style[v+"perspective"]=x.perspective,m.style.perspective=x.perspective;this.style[v+
"transition"]=transition;this.style.transition=transition;for(E in r)this.style[E]=r[E];O=f.setTimeout(function(){P()},x.duration+100)}});return this}var h="x",d="y",c="left",b="top",a="rotate",n="rotateX",p="rotateY",q="scale",t="opacity",m,s=null,v=function(){if(!("getComputedStyle"in window))return"";var a=window.getComputedStyle(document.documentElement,"");return"-"+(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1]+"-"}();l.defaults={duration:0,easing:"linear",
perspective:250,complete:null};e.fn.evolutionTransform=l;e.fn.evolutionTransform.animationEnabled=!0;e.fn.evolutionTransform.accelerated=function(){null===s&&(s=k());return s};return{}},jQuery,window);q("plugin.evolutionUserFileTextBox",function(e,f,g){var k={},l=1,h=function(d){return this.each(function(){var c={settings:e.extend({},e.fn.evolutionUserFileTextBox.defaults,d||{}),internal:{state:this,preview:null,select:null,remove:null}};e.telligent.evolution.post({url:c.settings.endpoint,data:{m:"c"},
success:function(b){c.internal.contextid=b.uploadContextId;c.internal.uploadurl=b.uploadUrl;b=e("<div></div>").attr("class",c.settings.cssClass);c.internal.preview=e("<div></div>").attr("class",c.settings.previewCssClass);b.append(c.internal.preview);c.internal.select=e('<a href="#" class="upload"></a>').attr("id","userfiletextbox_"+(new Date).getTime()+"_"+l++).html(c.settings.selectText).glowUpload({fileFilter:null,uploadUrl:c.internal.uploadurl,renderMode:"link"}).on("glowUploadBegun",function(a){c.uploading=
!0;c.internal.select.html("0%")}).on("glowUploadComplete",function(a,b){c.internal.select.html(c.settings.selectText);b&&0<b.name.length&&e.telligent.evolution.post({url:c.settings.endpoint,data:{m:"f",ContextId:c.internal.contextid,FileName:b.name},success:function(a){c.internal.state.value=a.url;c.uploading=!1;c.internal.preview.html(a.previewHtml).slideDown(100);c.internal.remove.show()}})}).on("glowUploadFileProgress",function(a,b){c.internal.select.html(b.percent+"%")});b.append(c.internal.select);
c.internal.remove=e('<a href="#" class="remove" style="margin-left: 1em;"></a>').html(c.settings.removeText).on("click",function(){c.internal.preview.html("").slideUp(100);c.internal.state.value="";c.internal.remove.hide();return!1}).hide();b.append(c.internal.remove);var a=e(c.internal.state).val();a?(c.internal.remove.show(),e.telligent.evolution.post({url:c.settings.endpoint,data:{m:"p",Url:a},success:function(a){c.internal.preview.html(a.previewHtml).slideDown(100)}})):c.internal.preview.html("").hide();
e(c.internal.state).data("evolutionUserFileTextBox",c).before(b).hide()}})})};e.fn.evolutionUserFileTextBox=function(d){if(d in k)return k[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)e.error("Method "+d+" does not exist on jQuery.fn.evolutionUserFileTextBox");else return h.apply(this,arguments)};e.extend(e.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",
endpoint:""}});return{}},jQuery,window);q("plugin.validation",function(e,f,g){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});var k={};e.telligent.evolution.validation={registerExtensions:function(a){k.date={isValid:function(a,b,c){return!s(a)||null==(new Date(a)).toString().match(/Invalid|NaN/)},message:function(b,c){return c||a.date},cache:!0};k.dateISO={isValid:function(a,b,c){return!s(a)||null!=(a+"").match(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/)},
message:function(b,c){return c||a.dateISO},cache:!0};k.digits={isValid:function(a,b,c){return!s(a)||null!=a.match(/^\d*$/)},message:function(b,c){return c||a.digits},cache:!0};k.email={isValid:function(b,c,d){return!s(b)||null!=b.match(RegExp(a.emailRegex))},message:function(b,c){return c||a.email},cache:!0};k.emailexists={isValid:function(a,b,c){return e.Deferred(function(b){if(s(a)){c="string"==typeof c&&{url:c}||c;var d=e.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";
c.url&&(d=c.url);e.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({email:a||""})}).then(function(a){b.resolve(!0===a.d.IsValid)})["catch"](function(){b.resolve(!1)})}else b.resolve(!0)}).promise()},message:function(b,c){return c||a.emailexists},cache:!0};k.emails={isValid:function(b,c,d){c=b.split(/[;,]/);d=!0;for(var e=RegExp(a.emailRegex),f=0;f<c.length;f++)jQuery.trim(c[f]).match(e)||(d=!1);return!s(b)||d},message:function(b,c){return c||
a.emails},cache:!0};k.equalTo={isValid:function(a,b,c){if(!s(a))return!0;b=p(e(c));return a==b},message:function(b,c){return c||a.equalTo},cache:!1};k.groupnameexists={isValid:function(a,b,c){if(!s(a))return!0;var d=e(b).data("_groupnameexists_previous")||{},f=c.getParentId();return d.value!==a||d.parentGroupId!=f?e.Deferred(function(c){var d=e.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";e.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",
data:JSON.stringify({groupName:a||"",parentGroupId:f||""})}).then(function(d){d=!0===d.d.IsValid;e(b).data("_groupnameexists_previous",{value:a||"",valid:d,parentGroupId:f});c.resolve(d)})["catch"](function(){c.resolve(!1)})}).promise():d.valid},message:function(b,c){return c||a.groupnameexists},cache:!1};k.mailinglistnameexists={isValid:function(a,b,c){return e.Deferred(function(b){if(s(a)){c="string"==typeof c&&{url:c}||c;var d=e.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";
c.url&&(d=c.url);var f;c.id&&(f=c.id);e.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({mailingListName:a||"",existingMailingListId:f||""})}).then(function(a){b.resolve(!0===a.d.IsValid)})["catch"](function(){b.resolve(!1)})}else b.resolve(!0)}).promise()},message:function(b,c){return c||a.mailinglistnameexists},cache:!0};k.max={isValid:function(a,b,c){if(!s(a))return!0;b=parseFloat(c);a=parseFloat(a);return!isNaN(a)&&!isNaN(b)&&a<=
b},message:function(b,c){return y(c||a.max,b)},cache:!0};k.maxlength={isValid:function(a,b,c){if(!s(a))return!0;c=parseFloat(c);return!isNaN(c)&&v(a,b)<=c},message:function(b,c){return y(c||a.maxlength,b)},cache:!1};k.min={isValid:function(a,b,c){if(!s(a))return!0;b=parseFloat(c);a=parseFloat(a);return!isNaN(a)&&!isNaN(b)&&a>=b},message:function(b,c){return y(c||a.min,b)},cache:!0};k.minlength={isValid:function(a,b,c){if(!s(a))return!0;c=parseFloat(c);return!isNaN(c)&&v(a,b)>=c},message:function(b,
c){return y(c||a.min,b)},cache:!1};k.number={isValid:function(a,b,c){return!s(a)||null!=a.match(/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/)},message:function(b,c){return c||a.number},cache:!0};k.passwordvalid={isValid:function(b,c,d){return!s(b)||null!=b.match(a.passwordRegex)},message:function(b,c){return c||a.password},cache:!0};k.pattern={isValid:function(a,b,c){return!s(a)||null!=a.match(c||/.*/)},message:function(b,c){return c||a.pattern},cache:!0};k.range={isValid:function(a,b,c){if(!s(a))return!0;
a=parseFloat(a);b=parseFloat(c[0]);c=parseFloat(c[1]);return!isNaN(b)&&!isNaN(c)&&!isNaN(a)&&a>=b&&a<=c},message:function(b,c){return y(c||a.range,b)},cache:!0};k.rangelength={isValid:function(a,b,c){if(!s(a))return!0;var d=parseFloat(c[0]);c=parseFloat(c[1]);a=v(a,b);return!isNaN(d)&&!isNaN(c)&&a>=d&&a<=c},message:function(b,c){return y(c||a.rangelength,b)},cache:!1};k.required={isValid:function(a,b,c){return c&&"function"===typeof c&&!c()?!0:s(a)},message:function(b,c){return c||a.required},cache:!1};
k.step={isValid:function(a,b,c){if(!s(a))return!0;a=parseFloat(a);c=parseFloat(c);return!isNaN(c)&&!isNaN(a)&&0==a%c},message:function(b,c){return y(c||a.step,b)},cache:!0};k.url={isValid:function(b,c,d){return!s(b)||b.match(a.urlRegex)?!0:("http://"+b).match(a.urlRegex)?(e(c).val("http://"+b),!0):!1},message:function(b,c){return c||a.url},cache:!0};k.username={isValid:function(b,c,d){return!s(b)||null!=b.match(a.usernameRegex)},message:function(b,c){return c||a.username},cache:!0};k.usernameexists=
{isValid:function(a,b,c){return e.Deferred(function(b){if(s(a)){c="string"==typeof c&&{url:c}||c;var d=e.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";c.url&&(d=c.url);e.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({username:a})}).then(function(a){b.resolve(!0===a.d.IsValid)})["catch"](function(){b.resolve(!1)})}else b.resolve(!0)}).promise()},message:function(b,c){return c||a.usernameexists},
cache:!0};k.wikipageexists={isValid:function(a,b,c){var d=e.trim(a);if(!s(d))return!0;a=e(b).data("_wikipageexists_previous")||{};var f=c.parentPageId()||-1;return a.value!==d||a.parentPageId!=f?e.Deferred(function(a){var g=e.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";e.telligent.evolution.post({url:g,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({pageName:d,wikiId:c.wikiId||-1,pageId:c.pageId||-1,parentPageId:f})}).then(function(c){c=
!0===c.d.IsValid;e(b).data("_wikipageexists_previous",{value:d||"",parentPageId:f,valid:c});a.resolve(c)})["catch"](function(){a.resolve(!1)})}).promise():a.valid},message:function(b,c){return c||a.wikipageexists},cache:!1}}};var l={addField:function(a,b,c,f){var g=this.data("evolutionValidation");if(g&&"undefined"!==typeof g){var h=e(a);d(h,this);var l=!1,m=h.data("evolutionValidation");m||(l=!0,m={validationContext:g,selector:a,messageSelector:c,isValid:null,context:f,rules:[],lastValue:void 0});
a=Object.keys(b);e.each(a,function(a,c){var d=k[c];d&&!1!==b[c]&&m.rules.push({check:function(a,e){var f=this;f.isValid=null;var g=d.isValid(a,h,b[c]);g.then?g.then(function(a){f.isValid=a;e(f.isValid)})["catch"](function(){f.isValid=!1;e(f.isValid)}):(f.isValid=!0===g,e(f.isValid))},message:d.message(b[c],(b.messages||{})[c])||"Error",cache:!0===d.cache,isValid:null})});h.data("evolutionValidation",m);l&&g.internal.fields.push(m);if(l=h.get(0)){l="input"!=(l.nodeName||"").toLowerCase()||!l.name||
"radio"!=l.type.toLowerCase()&&"checkbox"!=l.type.toLowerCase()?e(l):e('input[name="'+l.name+'"]');try{l.on("input",function(){g.internal.hasAttemptedSubmit&&(window.clearTimeout(g.internal.keyPressValidationHandle),g.internal.keyPressValidationHandle=window.setTimeout(function(){n(g,h,null,!0)},499))})}catch(p){}l.on("blur",function(){n(g,h,null,!0)})}}return this},addCustomValidation:function(a,b,c,d,e){var f=this.data("evolutionValidation");if(f&&"undefined"!==typeof f){var g=f.internal.customValidations.length;
f.internal.customValidations[g]={id:a,validationFunction:b,message:c,messageSelector:d,isValid:null,context:e};return function(a){return q(f,g,x(a),!0)}}},isValid:function(b){b=x(b);var c=this.data("evolutionValidation");return c?a(c,b,!0):(b&&b(!1),!1)},validate:function(b){b=x(b);var c=this.data("evolutionValidation");return c?a(c,b,!0):(b&&b(!1),!1)},validateField:function(a,b){b=x(b);var c=this.data("evolutionValidation");return c?n(c,e(a),b,!0):(b&&b(!0),!0)},validateCustom:function(a,b){b=x(b);
var c=this.data("evolutionValidation");if(!c)return b&&b(!0),!0;for(var d=0;d<c.internal.customValidations.length;d++)if(c.internal.customValidations[d].id==a)return q(c,d,b,!0);b&&b(!0);return!0},reset:function(){var a=this.data("evolutionValidation");if(!a)return this;for(var b=0;b<a.internal.customValidations.length;b++)e(a.internal.customValidations[b].messageSelector).hide(),a.internal.customValidations[b].isValid=null;for(b=0;b<a.internal.fields.length;b++)e(a.internal.fields[b].messageSelector).hide(),
a.internal.fields[b].errorMessage=null,a.internal.fields[b].isValid=null,a.internal.fields[b].lastValue=null;a.internal.submitButtonClicked=!1;a.internal.hasAttemptedSubmit=!1;window.clearTimeout(a.internal.initialValidationHandle);a.internal.initialValidationHandle=window.setTimeout(function(){c(a)},249)}},h=function(a){return this.each(function(){var b={settings:e.extend({},e.fn.evolutionValidation.defaults,a||{}),internal:{state:this,submitButtonClicked:!1,hasAttemptedSubmit:!1,fields:[],customValidations:[],
initialValidationHandle:null,ignoreRevalidation:!1}};e(this).data("evolutionValidation",b);d(this,this);e(this).on("click",function(a){return t(b,a)});window.clearTimeout(b.internal.initialValidationHandle);b.internal.initialValidationHandle=window.setTimeout(function(){c(b)},499)})},d=function(a,b,c){a=e(a).closest("form");if(0<a.length){var d=null;a.off(".evolutionValidation").on("submit.evolutionValidation",function(){if(null==d||10<(new Date).getTime()-d)return d=(new Date).getTime(),e(b).trigger("click"),
!1})}},c=function(b){window.clearTimeout(b.internal.initialValidationHandle);try{var d=!1;if(!0===b.settings.validateOnLoad)d=!0;else if(!1!==b.settings.validateOnLoad)for(var f=0;f<b.internal.fields.length;f++){var g=e(b.internal.fields[f].selector),h=g.attr("type");if("checkbox"!=h&&"radio"!=h&&"select"!=h&&"submit"!=h&&"button"!=h&&"reset"!=h&&""!=p(g)){d=!0;break}}if(d)b.internal.hasAttemptedSubmit=!0,a(b,function(){m(b)},!0);else if(!b.internal.hasAttemptedSubmit&&b.settings.onValidated)b.settings.onValidated(!0,
!1,null)}catch(k){b.internal.initialValidationHandle=window.setTimeout(function(){c(b)},499)}},b=function(a){var b=!0;e.each(a.internal.fields,function(a,c){!1===c.isValid?!0===b&&(b=!1):null===c.isValid&&(b=null)});e.each(a.internal.customValidations,function(a,c){!1===c.isValid?!0===b&&(b=!1):null===c.isValid&&(b=null)});return!0===b},a=function(a,b,c){for(var d=!1,f=function(){if(d){var f=null,g=!0;e.each(a.internal.fields,function(a,b){!1===b.isValid?!0===g&&(g=!1,f=b.context):null===b.isValid&&
(g=null)});e.each(a.internal.customValidations,function(a,b){!1===b.isValid?!0===g&&(g=!1,f=b.context):null===b.isValid&&(g=null)});if(null!==g){if(c&&a.settings.onValidated)a.settings.onValidated(g,a.internal.submitButtonClicked,f);b&&b(g);return g}return!1}},g=0;g<a.internal.fields.length;g++)n(a,e(a.internal.fields[g].selector),f,!1);for(g=0;g<a.internal.customValidations.length;g++)q(a,g,f,!1);d=!0;return f()},n=function(a,c,d,f){var g,h=p(c),k=c.data("evolutionValidation");if(null==k)return d(!0),
!0;var l=h!=k.lastValue,m=function(){var c=!0;for(g=0;g<k.rules.length;g++){if(!1===k.rules[g].isValid){if(!1!==k.isValid){k.errorMessage=k.rules[g].message;k.isValid=!1;k.validationContext.internal.hasAttemptedSubmit&&e(k.messageSelector).html(k.errorMessage).show();if(f&&a.settings.onValidated)a.settings.onValidated(b(a),a.internal.submitButtonClicked,k.context);d&&d(!1)}return!1}null===k.rules[g].isValid&&(c=!1)}if(c){k.errorMessage=null;k.isValid=!0;e(k.messageSelector).empty().hide();if(f&&a.settings.onValidated)a.settings.onValidated(b(a),
a.internal.submitButtonClicked,null);d&&d(!0);return!0}return!1};e.each(k.rules,function(a,b){if(l||!b.cache)k.isValid=null,b.check(h,m)});k.lastValue=h;return m()},p=function(a){return"checkbox"==a.attr("type")||"radio"==a.attr("type")?a.get(0).checked?a.val():"":a.val()},q=function(a,c,d,f){if(0>c||c>=a.internal.customValidations.length)return d(!0),!0;var g=a.internal.customValidations[c];g.isValid=null;var h=function(){if(!0===g.isValid){e(g.messageSelector).empty().hide();if(f&&a.settings.onValidated)a.settings.onValidated(b(a),
a.internal.submitButtonClicked,g.context);d&&d(!0);return!0}if(!1===g.isValid){a.internal.hasAttemptedSubmit&&e(g.messageSelector).html(g.message).show();if(f&&a.settings.onValidated)a.settings.onValidated(b(a),a.internal.submitButtonClicked,null);d&&d(!1)}return!1};c=g.validationFunction();c.then?c.then(function(a){g.isValid=!0===a;h()})["catch"](function(){g.isValid=!1;h()}):g.isValid=!0===c;return h()},t=function(b,c){var d=!b.internal.hasAttemptedSubmit;b.internal.hasAttemptedSubmit=!0;b.internal.submitButtonClicked=
!0;var f=!1,h=!1,k=g,l=function(a){d&&!a&&m(b);if(f)a&&(b.internal.ignoreRevalidation=!0,e(b.internal.state).trigger("click"),b.internal.ignoreRevalidation=!1);else{var g=!0;a&&b.settings.onSuccessfulClick&&(g=b.settings.onSuccessfulClick(c));b.internal.submitButtonClicked=!1;k=a&&!1!==g;h=!0}};b.internal.ignoreRevalidation?l(!0):a(b,l,!0);f=!0;!h&&c&&(c.cancelBubble=!0,k=c.returnValue=!1);return k},m=function(a){for(var b=0;b<a.internal.fields.length;b++)!1===a.internal.fields[b].isValid&&null!=
a.internal.fields[b].errorMessage&&e(a.internal.fields[b].messageSelector).html(a.internal.fields[b].errorMessage).show();for(b=0;b<a.internal.customValidations.length;b++)!1===a.internal.customValidations[b].isValid&&e(a.internal.customValidations[b].messageSelector).html(a.internal.customValidations[b].message).show()},s=function(a){return null!=a&&0<e.trim(a+"").length},v=function(a,b){b.get&&(b=b.get(0));var c=(b.nodeName||"").toLowerCase();return"input"!=c||!b.name||"radio"!=b.type.toLowerCase()&&
"checkbox"!=b.type.toLowerCase()?"select"==c?e("option:selected",b).length:(a||"").length:e('input[name="'+b.name+'"]:checked').length},y=function(a,b){b=b||{};if("object"!==typeof b){var c=[];c[0]=b;b=c}return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]||"?"})},x=function(a){return"function"!==typeof a?null:a};e.fn.evolutionValidation=function(a){if(a in l)return l[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionValidation");
else return h.apply(this,arguments)};e.extend(e.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null}});f.Telligent_Validation=function(a,b){this._jq=e(a);b.onValidatedFunction&&(b.onValidated=b.onValidatedFunction);b.onSuccessfulClickFunction&&(b.onSuccessfulClick=b.onSuccessfulClickFunction);this._jq.evolutionValidation(b)};Telligent_Validation.prototype.AddField=function(a,b,c,d){this._jq.evolutionValidation("addField",a,b,c,d)};Telligent_Validation.prototype.AddCustomValidation=
function(a,b,c,d,e){return this._jq.evolutionValidation("addCustomValidation",a,b,c,d,e)};Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",
a)};return{}},jQuery,window);q("plugin.evolutionVote",function(e,f,g){var k=function(a,b,c){if(a.internal.isInitialized&&!a.settings.isReadOnly)if(a.internal.userVote=c,a.settings.allowMultipleSelections||(a.settings.isReadOnly=!0),a.internal.savingValue=!0,null===b||0==c)a.settings.onDeleteVote();else a.settings.onVote(b,c)},l=function(a){var b=parseInt(a);return isNaN(b)?!0===a||"true"==a?1:!1===a||"false"==a?-1:0:b},h=function(a){return this.each(function(){a&&a.userVote!=g&&(a.userVote=l(a.userVote));
var b={settings:e.extend({},e.fn.evolutionUpDownVoting.defaults,a||{}),internal:{state:e(this)}};e(this).data("evolutionUpDownVoting_context",b);b.internal.state.addClass(b.settings.voteClass).css("white-space","nowrap").find("a").off(".evolutionUpDownVoting").empty().end();b.internal.state.empty();"true"==b.settings.userVote?b.settings.userVote=!0:"false"==b.settings.userVote&&(b.settings.userVote=!1);b.settings.isReadOnly&&b.internal.state.addClass(b.settings.readOnlyClass);d(b,!0);var c="",f="neutral";
0<b.settings.score?(f="positive",c=b.settings.positiveScoreModifier):0>b.settings.score&&(f="negative",c=b.settings.negativeScoreModifier);c='<div class="vote-score '+f+'">'+c+Math.abs(b.settings.score)+"</div>";b.settings.canViewVotes&&(c='<a class="ui-tip" title="'+b.settings.viewVotesMessage+'" href='+b.settings.voteUrl+">"+c+"</a>");b.internal.state.append('<div class="score-summary">'+c+"</div>");d(b,!1)})},d=function(a,b){(function(){if(!a.settings.isUserRegistered||!a.settings.isUserGroupMember||
!1!=b||a.settings.canUserDownVote)if(!a.settings.isUserRegistered||!a.settings.isUserGroupMember||!0!=b||a.settings.canUserUpVote){var d,f="",f=c(a,b);d=!a.settings.isUserRegistered||!0==b&&a.settings.canUserUpVote||!1==b&&a.settings.canUserDownVote?e('<a href="#" >'+f+"</a>").css({textDecoration:"none"}).attr("title",f).addClass("votingenabled ui-tip"):e('<a disabled="disabled">'+f+"</a>").addClass(a.settings.readOnlyClass).attr("title",f).addClass("votingdisabled ui-tip");d.addClass("vote");1==
b?d.addClass("upvote"):d.addClass("downvote");if(!a.settings.isReadOnly)if(!a.settings.isUserRegistered)d.attr("href",a.settings.loginUrl);else if(!0==b&&a.settings.canUserUpVote||!1==b&&a.settings.canUserDownVote)if(a.settings.userVote&&0<a.settings.userVote==b)0<a.settings.userVote==b&&(d.data("rating-value",b).addClass("selected").on("click.evolutionUpDownVoting",function(c){a.settings.allowMultipleVotes?(c=a.settings.userVote+(b?1:-1),k(a,d.data("rating-value"),c)):k(a,null,0);return!1}),1<Math.abs(a.settings.userVote)?
(f=Math.abs(a.settings.userVote),9<f&&(f="9+"),d.addClass("multiple").append('<span class="multiple-value">'+f+"</span>")):d.removeClass("multiple"));else d.data("rating-value",b).on("click.evolutionUpDownVoting",function(c){c=b?1:-1;a.settings.allowMultipleVotes&&(c+=a.settings.userVote);k(a,d.data("rating-value"),c);return!1});a.internal.state.append(d)}})();a.internal.isInitialized=!0},c=function(a,b){if(a.settings.isReadOnly)return a.settings.readOnlyMessage;if((!b||a.settings.canUserUpVote)&&
(b||a.settings.canUserDownVote)||a.settings.isUserRegistered){if(b&&!a.settings.canUserUpVote||!b&&!a.settings.canUserDownVote)return a.settings.isUserGroupMember?a.settings.noPermissionMessage:a.settings.notGroupMemberMessage;if(0<a.settings.userVote&&b||0>a.settings.userVote&&!b)return a.settings.allowMultipleVotes?b?a.settings.voteUpAgainMessage:a.settings.voteDownAgainMessage:a.settings.deleteMessage;if(b&&0==a.settings.userVote)return a.settings.voteUpMessage;if(b&&0>a.settings.userVote)return a.settings.allowMultipleVotes?
a.settings.removeDownVoteMessage:a.settings.switchToUpVoteMessage;if(!b&&0==a.settings.userVote)return a.settings.voteDownMessage;if(!b&&0<a.settings.userVote)return a.settings.allowMultipleVotes?a.settings.removeUpVoteMessage:a.settings.switchToDownVoteMessage}else return a.settings.loginMessage;return""},b={val:function(a){var b=this.data("evolutionUpDownVoting_context");if(null!==b){if("undefined"!==typeof a)return b.internal.yesVotes=a;a="undefined"!==typeof b.internal.yesVotes?b.internal.yesVotes:
b.settings.yesVotes;return a}return 0},readOnly:function(a){var b=this.data("evolutionUpDownVoting_context");if(null!==b)if("undefined"!==typeof a)(b.settings.isReadOnly=a)?b.internal.state.find("a").css({cursor:"default"}):b.internal.state.find("a").css({cursor:"pointer"});else return b.settings.isReadOnly;return!0},option:function(a,b){if("object"===typeof a)return this.each(function(){var b=e(this).data("evolutionUpDownVoting_context");null!=b&&(a.userVote&&(a.userVote=l(a.userVote)),b.settings=
e.extend({},b.settings,a),h.apply(e(this),[b.settings]))});if("undefined"!==typeof a&&"undefined"!==typeof b)return this.each(function(){var c=e(this).data("evolutionUpDownVoting_context");null!=c&&("userVote"==a&&(b=l(b)),c.settings[a]=b,h.apply(e(this),[c.settings]))});if("undefined"!==typeof a){var c=this.data("evolutionUpDownVoting_context");return null!==c?c.settings[a]:null}}};e.fn.evolutionUpDownVoting=function(a){if(a in b)return b[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==
typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionUpDownVoting");else return h.apply(this,arguments)};e.extend(e.fn.evolutionUpDownVoting,{defaults:{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:0,voteClass:"updownvote",overClass:"active",readOnlyClass:"readonly",isReadOnly:!1,allowMultipleSelections:!0,allowMultipleVotes:!1,canUserUpVote:!1,canUserDownVote:!1,canViewVotes:!1,isUserRegistered:!0,loginUrl:"",voteUrl:"",isUserGroupMember:!1,voteDownMessage:"Vote against this idea",
voteUpMessage:"Vote for this idea",voteDownAgainMessage:"Vote against this idea again",voteUpAgainMessage:"Vote for this idea again",loginMessage:"Sign in to vote on ideas",noPermissionMessage:"You do not have permission to vote for this idea",notGroupMemberMessage:"Join this group to vote on this idea",deleteMessage:"Remove your vote for this idea",removeDownVoteMessage:"Remove a vote against this idea",removeUpVoteMessage:"Remove a vote for this idea",readOnlyMessage:"Voting has been disabled",
switchToDownVoteMessage:"Vote against this idea instead of for it",switchToUpVoteMessage:"Vote for this idea instead of against it",viewVotesMessage:"View votes",positiveScoreModifier:"+",negativeScoreModifier:"-",onVote:function(a){},onDeleteVote:function(a){}}});return{}},jQuery,window);$.telligent=$.telligent||{};$.telligent.evolution=$.telligent.evolution||{};L("components composers events lib modules plugins lib.messageLinks lib.sheetProvider lib.sheet lib.actionSheet lib.touchEventAdapter lib.reflow lib.storageShim lib.imagePreview lib.legacyFormFilter lib.jsSupport lib.devicePixelRatio module.ui module.scriptRendering module.themePreview module.notifications module.systemNotifications lib.jQueryShim lib.keyboardActive module.shortcuts module.scheduledFile module.navigationConfirmation module.authentication".split(" "),
function(e,f,g,k,l,h,d,c,b,a,n,p,q,t,m,s,v,y,x,r,w,z,A,B,C,G,I,J,F,L){F(function(){A.shim();J.init();v.setCookie();s.setCookie();q.shim();n.adapt()&&F("body").addClass("touch");C.init();G.init();I.init();y.initiate();x.initiate();r.initiate();w.initiate();z.initiate();p.monitor();c.sheet=new b({parent:F("body"),enablePan:!0,maxHeightPerent:0.8,cssClass:"sheet",backgroundColor:"#333",backgroundOpacity:0.75,animationDuration:250,onOpening:function(){F.telligent.evolution.messaging.publish("sheet.opening")},
onClosing:function(){F.telligent.evolution.messaging.publish("sheet.closing")},onOpened:function(){F.telligent.evolution.messaging.publish("sheet.opened")},onClosed:function(){F.telligent.evolution.messaging.publish("sheet.closed")}});c.actionSheet=new a({sheet:c.sheet});(new d({parent:"body"})).handle("click");m.init();F.telligent.evolution.ui.render();t.register();B.init()})},jQuery,window)})();
